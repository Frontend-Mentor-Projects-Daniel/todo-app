{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// DOM NODES\nconst todos = document.querySelectorAll(\n  '.todo-list-item'\n) as NodeListOf<HTMLLIElement>;\nconst form = document.querySelector('.create-bar-form') as HTMLFormElement;\nconst input = document.querySelector('.create-bar') as HTMLInputElement;\nconst ul = document.querySelector('.list') as HTMLUListElement;\n\n// TYPES\ntype Todo = {\n  id: string;\n  value: string;\n};\n\ntype validButton = 'delete-btn' | 'update-btn' | 'content-editing';\n\n// MODEL\ntype Model = {\n  AllTodos: Todo[];\n};\n\n// GLOBAL STATE\nconst init: Model = {\n  AllTodos: [],\n};\nObject.freeze(init);\n\n// UPDATE\ntype Msg = 'AddTodo' | 'RemoveTodo' | 'UpdateTodo' | 'ReadTodo';\n\nfunction update(msg: Msg, model: Model, value: Todo): void {\n  switch (msg) {\n    case 'AddTodo':\n      model.AllTodos.push(value);\n      break;\n\n    case 'RemoveTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos.splice(index, 1);\n        }\n      });\n      break;\n\n    case 'UpdateTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].value = value.value;\n        }\n      });\n      break;\n\n    case 'ReadTodo':\n      model.AllTodos.push(value);\n      break;\n  }\n}\n// VIEW SCRIPTS\n\n//* Get Todos from localStorage\n((model: Model) => {\n  const getStoredTodos: string = getItemsFromLocalStorage('todos');\n  const parseStoredTodos: Todo[] = parseTodos(getStoredTodos);\n\n  for (const todo of parseStoredTodos) {\n    update('ReadTodo', model, todo);\n  }\n\n  renderTodos(model.AllTodos);\n})(init);\n\n//* Create New Todo\n((model: Model) => {\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const getUserInput = input.value.trim();\n    const isUserInputEmpty = CheckIfEmptyString(getUserInput);\n    const createNewTodo = createTodoObject(getUserInput);\n\n    if (!isUserInputEmpty) {\n      update('AddTodo', model, createNewTodo);\n      saveToLocalStorage(model.AllTodos);\n    }\n\n    renderTodos(model.AllTodos);\n  });\n})(init);\n\n//* Delete Todo\n((model: Model) => {\n  ul.addEventListener('click', (e) => {\n    const xImage = e.target as HTMLImageElement;\n    const button = xImage.parentElement as HTMLButtonElement;\n\n    const li = button.parentElement as HTMLLIElement;\n\n    const todoId = li.dataset.id as string;\n    const isDeleteOrUpdateBtn = checkTypeOfButton(button);\n\n    if (isDeleteOrUpdateBtn === 'delete-btn') {\n      const todoThatShouldBeDeleted = findTodo(todoId, model);\n      deleteTodo(todoThatShouldBeDeleted.id, model, li);\n      update('RemoveTodo', model, todoThatShouldBeDeleted);\n      saveToLocalStorage(model.AllTodos);\n    }\n  });\n})(init);\n\n//* Update Todo\n((model: Model) => {\n  ul.addEventListener('focusout', (e) => {\n    const target = e.target;\n\n    if (target instanceof HTMLParagraphElement) {\n      const text = target.textContent !== null ? target.textContent : '';\n      const listItem = target.parentElement as HTMLLIElement;\n      const listItemID = listItem.dataset.id;\n\n      if (listItemID !== undefined) {\n        const updatedTodo: Todo = {\n          id: listItemID,\n          value: text,\n        };\n        update('UpdateTodo', model, updatedTodo);\n        saveToLocalStorage(model.AllTodos);\n      } else {\n        throw new Error(\"This list item doesn't have an ID\");\n      }\n    }\n  });\n})(init);\n\n// VIEW FUNCTIONS\n\n// create list item\nfunction renderListItem(id: string, text: string): string {\n  const listItem = `\n        <li class=\"list-item\" data-id=${id}>\n          <button class=\"complete-btn\">\n            <img src=\"/src/assets/images/icon-check.svg\" alt=\"\" />\n          </button>\n          <p class=\"list-item-text\" contenteditable=\"true\">${text}</p>\n          <button class=\"delete-btn todo-delete-icon\">\n            <img class=\"d\" src=\"/src/assets/images/icon-cross.svg\" alt=\"\" />\n          </button>\n        </li>\n    `;\n\n  return listItem;\n}\n\n// display all todos on page\nfunction renderTodos(todos: Todo[]) {\n  ul.innerHTML = '';\n\n  let tempStorage: string[] = [];\n  for (const todo of todos) {\n    tempStorage.push(renderListItem(todo.id, todo.value.trim()));\n    input.value = '';\n  }\n  ul.innerHTML = tempStorage.join('');\n}\n\n// HELPER FUNCTIONS\n\n// check if string is empty\nfunction CheckIfEmptyString(str: string): boolean {\n  return str.trim() === '';\n}\n\n// generate unique id\nfunction generateId() {\n  return Math.random().toString(36).slice(2);\n}\n\n// create todo object\nfunction createTodoObject(value: string): Todo {\n  return {\n    id: generateId(),\n    value: value,\n  };\n}\n\n// Check to see if button is update or delete button\nfunction checkTypeOfButton(element: HTMLButtonElement): validButton {\n  if (element.classList.contains('todo-delete-icon')) {\n    return 'delete-btn';\n  } else if (element.classList.contains('todo-update-icon')) {\n    return 'update-btn';\n  } else {\n    return 'content-editing';\n  }\n}\n\n// find a todo\nfunction findTodo(id: string, model: Model): Todo {\n  const matchingTodo = model.AllTodos.filter((todo) => todo.id === id);\n\n  return matchingTodo[0];\n}\n\n// delete a todo\nfunction deleteTodo(\n  id: string,\n  model: Model,\n  listElement: HTMLLIElement\n): Todo {\n  const todo = findTodo(id, model);\n  listElement.remove();\n\n  return todo;\n}\n\n// save todos to local storage\nfunction saveToLocalStorage(todos: Todo[]) {\n  const todoToJson = JSON.stringify(todos);\n  localStorage.setItem('todos', todoToJson);\n}\n\n// get todos from local storage\nfunction getItemsFromLocalStorage(itemName: string): string {\n  const storage = localStorage.getItem(itemName);\n  return storage !== null ? storage : '[]';\n}\n\n// parse todos\nfunction parseTodos(item: string): Todo[] {\n  return JSON.parse(item);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTs7QUFDQSxJQUFNLFFBQVEsU0FBUyxnQkFBVCxDQUNaLGlCQURZLENBQWQ7QUFHQSxJQUFNLE9BQU8sU0FBUyxhQUFULENBQXVCLGtCQUF2QixDQUFiO0FBQ0EsSUFBTSxRQUFRLFNBQVMsYUFBVCxDQUF1QixhQUF2QixDQUFkO0FBQ0EsSUFBTSxLQUFLLFNBQVMsYUFBVCxDQUF1QixPQUF2QixDQUFYO0FBZUE7QUFDQSxJQUFNLE9BQWM7QUFDbEIsY0FBVTtBQURRLENBQXBCO0FBR0EsT0FBTyxNQUFQLENBQWMsSUFBZDtBQUtBLFNBQVMsTUFBVCxDQUFnQixHQUFoQixFQUEwQixLQUExQixFQUF3QyxLQUF4QyxFQUFtRDtBQUNqRCxZQUFRLEdBQVI7QUFDRSxhQUFLLFNBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsSUFBZixDQUFvQixLQUFwQjtBQUNBO0FBRUYsYUFBSyxZQUFMO0FBQ0Usa0JBQU0sUUFBTixDQUFlLE9BQWYsQ0FBdUIsVUFBQyxJQUFELEVBQVM7QUFDOUIsb0JBQUksS0FBSyxFQUFMLEtBQVksTUFBTSxFQUF0QixFQUEwQjtBQUN4Qix3QkFBTSxRQUFRLE1BQU0sUUFBTixDQUFlLE9BQWYsQ0FBdUIsSUFBdkIsQ0FBZDtBQUNBLDBCQUFNLFFBQU4sQ0FBZSxNQUFmLENBQXNCLEtBQXRCLEVBQTZCLENBQTdCO0FBQ0Q7QUFDRixhQUxEO0FBTUE7QUFFRixhQUFLLFlBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixVQUFDLElBQUQsRUFBUztBQUM5QixvQkFBSSxLQUFLLEVBQUwsS0FBWSxNQUFNLEVBQXRCLEVBQTBCO0FBQ3hCLHdCQUFNLFFBQVEsTUFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixJQUF2QixDQUFkO0FBQ0EsMEJBQU0sUUFBTixDQUFlLEtBQWYs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LFFBQVEsU0FBUixDQUFrQixRQUFsQixDQUEyQixrQkFBM0IsQ0FBSixFQUFvRDtBQUN6RCxlQUFPLFlBQVA7QUFDRCxLQUZNLE1BRUE7QUFDTCxlQUFPLGlCQUFQO0FBQ0Q7QUFDRjtBQUVEO0FBQ0EsU0FBUyxRQUFULENBQWtCLEVBQWxCLEVBQThCLEtBQTlCLEVBQTBDO0FBQ3hDLFFBQU0sZUFBZSxNQUFNLFFBQU4sQ0FBZSxNQUFmLENBQXNCLFVBQUMsSUFBRDtBQUFBLGVBQVUsS0FBSyxFQUFMLEtBQVksRUFBdEI7QUFBQSxLQUF0QixDQUFyQjtBQUVBLFdBQU8sYUFBYSxDQUFiLENBQVA7QUFDRDtBQUVEO0FBQ0EsU0FBUyxVQUFULENBQ0UsRUFERixFQUVFLEtBRkYsRUFHRSxXQUhGLEVBRzRCO0FBRTFCLFFBQU0sT0FBTyxTQUFTLEVBQVQsRUFBYSxLQUFiLENBQWI7QUFDQSxnQkFBWSxNQUFaO0FBRUEsV0FBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNBLFNBQVMsa0JBQVQsQ0FBNEIsS0FBNUIsRUFBeUM7QUFDdkMsUUFBTSxhQUFhLEtBQUssU0FBTCxDQUFlLEtBQWYsQ0FBbkI7QUFDQSxpQkFBYSxPQUFiLENBQXFCLE9BQXJCLEVBQThCLFVBQTlCO0FBQ0Q7QUFFRDtBQUNBLFNBQVMsd0JBQVQsQ0FBa0MsUUFBbEMsRUFBa0Q7QUFDaEQsUUFBTSxVQUFVLGFBQWEsT0FBYixDQUFxQixRQUFyQixDQUFoQjtBQUNBLFdBQU8sWUFBWSxJQUFaLEdBQW1CLE9BQW5CLEdBQTZCLElBQXBDO0FBQ0Q7QUFFRDtBQUNBLFNBQVMsVUFBVCxDQUFvQixJQUFwQixFQUFnQztBQUM5QixXQUFPLEtBQUssS0FBTCxDQUFXLElBQVgsQ0FBUDtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gRE9NIE5PREVTXG5jb25zdCB0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICcudG9kby1saXN0LWl0ZW0nXG4pIGFzIE5vZGVMaXN0T2Y8SFRNTExJRWxlbWVudD47XG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1iYXItZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudDtcbmNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1iYXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3QgdWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XG5cbi8vIFRZUEVTXG50eXBlIFRvZG8gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG59O1xuXG50eXBlIHZhbGlkQnV0dG9uID0gJ2RlbGV0ZS1idG4nIHwgJ3VwZGF0ZS1idG4nIHwgJ2NvbnRlbnQtZWRpdGluZyc7XG5cbi8vIE1PREVMXG50eXBlIE1vZGVsID0ge1xuICBBbGxUb2RvczogVG9kb1tdO1xufTtcblxuLy8gR0xPQkFMIFNUQVRFXG5jb25zdCBpbml0OiBNb2RlbCA9IHtcbiAgQWxsVG9kb3M6IFtdLFxufTtcbk9iamVjdC5mcmVlemUoaW5pdCk7XG5cbi8vIFVQREFURVxudHlwZSBNc2cgPSAnQWRkVG9kbycgfCAnUmVtb3ZlVG9kbycgfCAnVXBkYXRlVG9kbycgfCAnUmVhZFRvZG8nO1xuXG5mdW5jdGlvbiB1cGRhdGUobXNnOiBNc2csIG1vZGVsOiBNb2RlbCwgdmFsdWU6IFRvZG8pOiB2b2lkIHtcbiAgc3dpdGNoIChtc2cpIHtcbiAgICBjYXNlICdBZGRUb2RvJzpcbiAgICAgIG1vZGVsLkFsbFRvZG9zLnB1c2godmFsdWUpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdSZW1vdmVUb2RvJzpcbiAgICAgIG1vZGVsLkFsbFRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcbiAgICAgICAgaWYgKHRvZG8uaWQgPT09IHZhbHVlLmlkKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBtb2RlbC5BbGxUb2Rvcy5pbmRleE9mKHRvZG8pO1xuICAgICAgICAgIG1vZGVsLkFsbFRvZG9zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdVcGRhdGVUb2RvJzpcbiAgICAgIG1vZGVsLkFsbFRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcbiAgICAgICAgaWYgKHRvZG8uaWQgPT09IHZhbHVlLmlkKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBtb2RlbC5BbGxUb2Rvcy5pbmRleE9mKHRvZG8pO1xuICAgICAgICAgIG1vZGVsLkFsbFRvZG9zW2luZGV4XS52YWx1ZSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUmVhZFRvZG8nOlxuICAgICAgbW9kZWwuQWxsVG9kb3MucHVzaCh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgfVxufVxuLy8gVklFVyBTQ1JJUFRTXG5cbi8vKiBHZXQgVG9kb3MgZnJvbSBsb2NhbFN0b3JhZ2VcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIGNvbnN0IGdldFN0b3JlZFRvZG9zOiBzdHJpbmcgPSBnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UoJ3RvZG9zJyk7XG4gIGNvbnN0IHBhcnNlU3RvcmVkVG9kb3M6IFRvZG9bXSA9IHBhcnNlVG9kb3MoZ2V0U3RvcmVkVG9kb3MpO1xuXG4gIGZvciAoY29uc3QgdG9kbyBvZiBwYXJzZVN0b3JlZFRvZG9zKSB7XG4gICAgdXBkYXRlKCdSZWFkVG9kbycsIG1vZGVsLCB0b2RvKTtcbiAgfVxuXG4gIHJlbmRlclRvZG9zKG1vZGVsLkFsbFRvZG9zKTtcbn0pKGluaXQpO1xuXG4vLyogQ3JlYXRlIE5ldyBUb2RvXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGdldFVzZXJJbnB1dCA9IGlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICBjb25zdCBpc1VzZXJJbnB1dEVtcHR5ID0gQ2hlY2tJZkVtcHR5U3RyaW5nKGdldFVzZXJJbnB1dCk7XG4gICAgY29uc3QgY3JlYXRlTmV3VG9kbyA9IGNyZWF0ZVRvZG9PYmplY3QoZ2V0VXNlcklucHV0KTtcblxuICAgIGlmICghaXNVc2VySW5wdXRFbXB0eSkge1xuICAgICAgdXBkYXRlKCdBZGRUb2RvJywgbW9kZWwsIGNyZWF0ZU5ld1RvZG8pO1xuICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICB9XG5cbiAgICByZW5kZXJUb2Rvcyhtb2RlbC5BbGxUb2Rvcyk7XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vKiBEZWxldGUgVG9kb1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgdWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IHhJbWFnZSA9IGUudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgY29uc3QgYnV0dG9uID0geEltYWdlLnBhcmVudEVsZW1lbnQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBjb25zdCBsaSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50IGFzIEhUTUxMSUVsZW1lbnQ7XG5cbiAgICBjb25zdCB0b2RvSWQgPSBsaS5kYXRhc2V0LmlkIGFzIHN0cmluZztcbiAgICBjb25zdCBpc0RlbGV0ZU9yVXBkYXRlQnRuID0gY2hlY2tUeXBlT2ZCdXR0b24oYnV0dG9uKTtcblxuICAgIGlmIChpc0RlbGV0ZU9yVXBkYXRlQnRuID09PSAnZGVsZXRlLWJ0bicpIHtcbiAgICAgIGNvbnN0IHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkID0gZmluZFRvZG8odG9kb0lkLCBtb2RlbCk7XG4gICAgICBkZWxldGVUb2RvKHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkLmlkLCBtb2RlbCwgbGkpO1xuICAgICAgdXBkYXRlKCdSZW1vdmVUb2RvJywgbW9kZWwsIHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkKTtcbiAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgfVxuICB9KTtcbn0pKGluaXQpO1xuXG4vLyogVXBkYXRlIFRvZG9cbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MUGFyYWdyYXBoRWxlbWVudCkge1xuICAgICAgY29uc3QgdGV4dCA9IHRhcmdldC50ZXh0Q29udGVudCAhPT0gbnVsbCA/IHRhcmdldC50ZXh0Q29udGVudCA6ICcnO1xuICAgICAgY29uc3QgbGlzdEl0ZW0gPSB0YXJnZXQucGFyZW50RWxlbWVudCBhcyBIVE1MTElFbGVtZW50O1xuICAgICAgY29uc3QgbGlzdEl0ZW1JRCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQ7XG5cbiAgICAgIGlmIChsaXN0SXRlbUlEICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZFRvZG86IFRvZG8gPSB7XG4gICAgICAgICAgaWQ6IGxpc3RJdGVtSUQsXG4gICAgICAgICAgdmFsdWU6IHRleHQsXG4gICAgICAgIH07XG4gICAgICAgIHVwZGF0ZSgnVXBkYXRlVG9kbycsIG1vZGVsLCB1cGRhdGVkVG9kbyk7XG4gICAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGxpc3QgaXRlbSBkb2Vzbid0IGhhdmUgYW4gSURcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKGluaXQpO1xuXG4vLyBWSUVXIEZVTkNUSU9OU1xuXG4vLyBjcmVhdGUgbGlzdCBpdGVtXG5mdW5jdGlvbiByZW5kZXJMaXN0SXRlbShpZDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBsaXN0SXRlbSA9IGBcbiAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1pdGVtXCIgZGF0YS1pZD0ke2lkfT5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29tcGxldGUtYnRuXCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIi9zcmMvYXNzZXRzL2ltYWdlcy9pY29uLWNoZWNrLnN2Z1wiIGFsdD1cIlwiIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPHAgY2xhc3M9XCJsaXN0LWl0ZW0tdGV4dFwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke3RleHR9PC9wPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGUtYnRuIHRvZG8tZGVsZXRlLWljb25cIj5cbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJkXCIgc3JjPVwiL3NyYy9hc3NldHMvaW1hZ2VzL2ljb24tY3Jvc3Muc3ZnXCIgYWx0PVwiXCIgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9saT5cbiAgICBgO1xuXG4gIHJldHVybiBsaXN0SXRlbTtcbn1cblxuLy8gZGlzcGxheSBhbGwgdG9kb3Mgb24gcGFnZVxuZnVuY3Rpb24gcmVuZGVyVG9kb3ModG9kb3M6IFRvZG9bXSkge1xuICB1bC5pbm5lckhUTUwgPSAnJztcblxuICBsZXQgdGVtcFN0b3JhZ2U6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgdG9kbyBvZiB0b2Rvcykge1xuICAgIHRlbXBTdG9yYWdlLnB1c2gocmVuZGVyTGlzdEl0ZW0odG9kby5pZCwgdG9kby52YWx1ZS50cmltKCkpKTtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9XG4gIHVsLmlubmVySFRNTCA9IHRlbXBTdG9yYWdlLmpvaW4oJycpO1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG5cbi8vIGNoZWNrIGlmIHN0cmluZyBpcyBlbXB0eVxuZnVuY3Rpb24gQ2hlY2tJZkVtcHR5U3RyaW5nKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBzdHIudHJpbSgpID09PSAnJztcbn1cblxuLy8gZ2VuZXJhdGUgdW5pcXVlIGlkXG5mdW5jdGlvbiBnZW5lcmF0ZUlkKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG59XG5cbi8vIGNyZWF0ZSB0b2RvIG9iamVjdFxuZnVuY3Rpb24gY3JlYXRlVG9kb09iamVjdCh2YWx1ZTogc3RyaW5nKTogVG9kbyB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoKSxcbiAgICB2YWx1ZTogdmFsdWUsXG4gIH07XG59XG5cbi8vIENoZWNrIHRvIHNlZSBpZiBidXR0b24gaXMgdXBkYXRlIG9yIGRlbGV0ZSBidXR0b25cbmZ1bmN0aW9uIGNoZWNrVHlwZU9mQnV0dG9uKGVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50KTogdmFsaWRCdXR0b24ge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tZGVsZXRlLWljb24nKSkge1xuICAgIHJldHVybiAnZGVsZXRlLWJ0bic7XG4gIH0gZWxzZSBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tdXBkYXRlLWljb24nKSkge1xuICAgIHJldHVybiAndXBkYXRlLWJ0bic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdjb250ZW50LWVkaXRpbmcnO1xuICB9XG59XG5cbi8vIGZpbmQgYSB0b2RvXG5mdW5jdGlvbiBmaW5kVG9kbyhpZDogc3RyaW5nLCBtb2RlbDogTW9kZWwpOiBUb2RvIHtcbiAgY29uc3QgbWF0Y2hpbmdUb2RvID0gbW9kZWwuQWxsVG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB0b2RvLmlkID09PSBpZCk7XG5cbiAgcmV0dXJuIG1hdGNoaW5nVG9kb1swXTtcbn1cblxuLy8gZGVsZXRlIGEgdG9kb1xuZnVuY3Rpb24gZGVsZXRlVG9kbyhcbiAgaWQ6IHN0cmluZyxcbiAgbW9kZWw6IE1vZGVsLFxuICBsaXN0RWxlbWVudDogSFRNTExJRWxlbWVudFxuKTogVG9kbyB7XG4gIGNvbnN0IHRvZG8gPSBmaW5kVG9kbyhpZCwgbW9kZWwpO1xuICBsaXN0RWxlbWVudC5yZW1vdmUoKTtcblxuICByZXR1cm4gdG9kbztcbn1cblxuLy8gc2F2ZSB0b2RvcyB0byBsb2NhbCBzdG9yYWdlXG5mdW5jdGlvbiBzYXZlVG9Mb2NhbFN0b3JhZ2UodG9kb3M6IFRvZG9bXSkge1xuICBjb25zdCB0b2RvVG9Kc29uID0gSlNPTi5zdHJpbmdpZnkodG9kb3MpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCB0b2RvVG9Kc29uKTtcbn1cblxuLy8gZ2V0IHRvZG9zIGZyb20gbG9jYWwgc3RvcmFnZVxuZnVuY3Rpb24gZ2V0SXRlbXNGcm9tTG9jYWxTdG9yYWdlKGl0ZW1OYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaXRlbU5hbWUpO1xuICByZXR1cm4gc3RvcmFnZSAhPT0gbnVsbCA/IHN0b3JhZ2UgOiAnW10nO1xufVxuXG4vLyBwYXJzZSB0b2Rvc1xuZnVuY3Rpb24gcGFyc2VUb2RvcyhpdGVtOiBzdHJpbmcpOiBUb2RvW10ge1xuICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcbn1cbiJdfQ=="}