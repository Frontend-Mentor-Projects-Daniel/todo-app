{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// get the id of the todo ✅\n// find the specific todo ✅\n// change the completed property to true ✅\n// add to exceptions any .complete-btn with the data-attribute of completed=\"true\" should have a background of the gradient\n\n// ------------------------------------------------------------------------------\n//                                 DOM NODES\n\n//-------------------------------------------------------------------------------\nconst todos = document.querySelectorAll(\n  '.todo-list-item'\n) as NodeListOf<HTMLLIElement>;\nconst form = document.querySelector('.create-bar-form') as HTMLFormElement;\nconst input = document.querySelector('.create-bar') as HTMLInputElement;\nconst ul = document.querySelector('.list') as HTMLUListElement;\nconst template = document.querySelector(\n  '#example-list-item'\n) as HTMLTemplateElement;\n\n// ------------------------------------------------------------------------------\n//                                 TYPES\n//-------------------------------------------------------------------------------\ntype Todo = {\n  id: string;\n  value: string;\n  completed: boolean;\n};\n\ntype validButton = 'delete-btn' | 'complete-btn' | 'not-a-button';\n\ntype allowedElements = 'p' | 'ins' | 'del';\n\n// ------------------------------------------------------------------------------\n//                                 MODEL\n//-------------------------------------------------------------------------------\ntype Model = {\n  AllTodos: Todo[];\n};\n\n// ------------------------------------------------------------------------------\n//                               GLOBAL STATE\n//-------------------------------------------------------------------------------\nconst init: Model = {\n  AllTodos: [],\n};\nObject.freeze(init);\n\n// ------------------------------------------------------------------------------\n//                             UPDATE FUNCTION\n//-------------------------------------------------------------------------------\ntype Msg = 'AddTodo' | 'RemoveTodo' | 'UpdateTodo' | 'CompleteTodo';\n\nfunction update(msg: Msg, model: Model, value: Todo): void {\n  switch (msg) {\n    case 'AddTodo':\n      model.AllTodos.push(value);\n      break;\n\n    case 'RemoveTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos.splice(index, 1);\n        }\n      });\n      break;\n\n    case 'UpdateTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].value = value.value;\n        }\n      });\n      break;\n\n    case 'CompleteTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].completed = value.completed;\n        }\n      });\n      break;\n  }\n}\n\n// ------------------------------------------------------------------------------\n//                                   SCRIPTS\n//-------------------------------------------------------------------------------\n\n// GET TODOS FROM LOCAL STORAGE AND DISPLAY THEM\n((model: Model) => {\n  const getStoredTodos: string = getItemsFromLocalStorage('todos');\n  const parseStoredTodos: Todo[] = parseTodos(getStoredTodos);\n\n  // if there're no previous todo's, create example todo\n  if (parseStoredTodos.length === 0) {\n    const newTodo = renderListItemNode(template);\n    update('AddTodo', model, newTodo);\n  } else {\n    for (const todo of parseStoredTodos) {\n      update('AddTodo', model, todo);\n    }\n  }\n\n  renderTodos(model.AllTodos);\n\n  // add event listener to initial todo so that it can be set to complete as well\n  const allTodos = document.querySelectorAll('.complete-btn');\n  allTodos.forEach((todo) => {\n    todo.addEventListener('click', (e) => {\n      // handleCompletedClick(e, model);\n      saveToLocalStorage(model.AllTodos);\n    });\n  });\n})(init);\n\n// CREATE NEW TODOS\n((model: Model) => {\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const getUserInput = input.value.trim();\n    const isUserInputEmpty = CheckIfEmptyString(getUserInput);\n    const createNewTodo = createTodoObject(getUserInput);\n\n    if (!isUserInputEmpty) {\n      update('AddTodo', model, createNewTodo);\n      saveToLocalStorage(model.AllTodos);\n    }\n\n    renderTodos(model.AllTodos);\n\n    // add an eventListener to each button now so that they will accept click events when created\n    const completeButtons = document.querySelectorAll('.complete-btn');\n    completeButtons.forEach((button) => {\n      button.addEventListener('click', (e) => {\n        const newChild = document.createElement('del');\n        newChild.className = 'list-item-text';\n        // newChild.textContent = text;\n        // const oldChild = target;\n        // const parent = listItem;\n\n        // const replacementInfo = { parent, newChild, oldChild };\n\n        // handleCompletedClick(e, model);\n        saveToLocalStorage(model.AllTodos);\n      });\n    });\n  });\n})(init);\n\n// DELETE TODOS\n((model: Model) => {\n  ul.addEventListener('click', (e) => {\n    const xImage = e.target as HTMLImageElement;\n    const button = xImage.parentElement as HTMLButtonElement;\n\n    const li = button.parentElement as HTMLLIElement;\n\n    const todoId = li.dataset.id as string;\n    const isDeleteOrUpdateBtn = checkTypeOfButton(button);\n\n    if (isDeleteOrUpdateBtn === 'delete-btn') {\n      const todoThatShouldBeDeleted = findTodo(todoId, model);\n      deleteTodo(todoThatShouldBeDeleted.id, model, li);\n      update('RemoveTodo', model, todoThatShouldBeDeleted);\n      saveToLocalStorage(model.AllTodos);\n    }\n  });\n})(init);\n\n// UPDATE TODOS\n((model: Model) => {\n  ul.addEventListener('focusout', (e) => {\n    const target = e.target;\n\n    if (target instanceof HTMLParagraphElement) {\n      const text = target.textContent !== null ? target.textContent : '';\n      const listItem = target.parentElement as HTMLLIElement;\n      const listItemID = listItem.dataset.id;\n\n      if (listItemID !== undefined) {\n        const updatedTodo: Todo = {\n          id: listItemID,\n          value: text,\n          completed: false,\n        };\n\n        const newChild = document.createElement('del');\n        newChild.className = 'list-item-text';\n        newChild.textContent = text;\n        const oldChild = target;\n        const parent = listItem;\n\n        const replacementInfo = { parent, newChild, oldChild };\n        // console.log(replacementInfo);\n\n        update('UpdateTodo', model, updatedTodo);\n        // handleCompletedClick(e, model, replacementInfo);\n        saveToLocalStorage(model.AllTodos);\n      } else {\n        throw new Error(\"This list item doesn't have an ID\");\n      }\n    }\n  });\n})(init);\n\n// SET FILTER\n((model: Model) => {})(init);\n\n// ------------------------------------------------------------------------------\n//                              VIEW FUNCTIONS\n//-------------------------------------------------------------------------------\n\n/**\n * Displays all the todos from the global state unto the page\n * @param todos - The global state\n */\nfunction renderTodos(todos: Todo[]) {\n  ul.innerHTML = '';\n\n  let tempStorage: string[] = [];\n  for (const todo of todos) {\n    const determineElement = todo.completed ? 'del' : 'p';\n\n    tempStorage.push(\n      createListItem(\n        todo.id,\n        todo.value.trim(),\n        todo.completed,\n        determineElement\n      )\n    );\n    input.value = '';\n  }\n  ul.innerHTML = tempStorage.join('');\n}\n\n/**\n * Mutates a todo so that its completed data attribute is toggled\n * @param listItem - A list item currently appended to the DOM\n * @param value - What the completed data attribute should be st to\n */\nfunction toggleCompleteAttribute(listItem: HTMLLIElement, value: boolean) {\n  const isCompleted = value;\n\n  listItem.dataset.completed = isCompleted.toString();\n}\n\n/**\n * Removes a Todo <li> from the DOM\n * @param id - A unique id belonging to an object of type Todo\n * @param model - The global state\n * @param listElement - A list element to be removed\n * @returns {Todo} The deleted Todo object\n */\nfunction deleteTodo(\n  id: string,\n  model: Model,\n  listElement: HTMLLIElement\n): Todo {\n  const todo = findTodo(id, model);\n  listElement.remove();\n\n  return todo;\n}\n\n/**\n * Updates the global state, toggles the completed data attribute on a list item and replaces the p element with a del element if needed\n * @param e - A click event\n * @param model - The global state\n * @param el -\n */\nfunction handleCompletedClick(e: Event, model: Model, el = {}) {\n  console.log(el);\n\n  const completeBtn = e.currentTarget as HTMLButtonElement;\n\n  const listItem = completeBtn.parentElement as HTMLLIElement;\n  const id = listItem.dataset.id;\n\n  if (id !== undefined) {\n    const currentTodo = findTodo(id, model);\n    currentTodo.completed = !currentTodo.completed;\n\n    // const determineElement = currentTodo.completed ? 'del' : 'p';\n\n    // const completedTodo = createListItem(\n    //   id,\n    //   currentTodo.value,\n    //   currentTodo.completed,\n    //   determineElement\n    // );\n\n    update('CompleteTodo', model, currentTodo);\n\n    toggleCompleteAttribute(listItem, currentTodo.completed);\n  }\n}\n\n// ------------------------------------------------------------------------------\n//                              HELPER FUNCTIONS\n//-------------------------------------------------------------------------------\n/**\n * Creates a list item\n * @param id - The unique ID of the list item todo\n * @param text - The actual todo itself\n * @param el - Represents an Html element, ins and del are semantically correct but a p tag can be used as well\n * @param completed - Reflects whether the complete button has been clicked or not\n * @returns {string} The inner HTML of the <li> including the li itself\n */\nfunction createListItem(\n  id: string,\n  text: string,\n  completed: boolean = false,\n  el: allowedElements = 'p'\n): string {\n  const listItem = `\n        <li class=\"list-item\" data-id=${id} data-completed=\"${completed}\">\n          <button class=\"complete-btn\">\n            <img src=\"/src/assets/images/icon-check.svg\" aria-hidden=\"true\" alt=\"\" />\n          </button>\n          <${el} class=\"list-item-text\" contenteditable=\"true\">${text}</${el}>\n          <button class=\"delete-btn todo-delete-icon\">\n            <img class=\"d\" src=\"/src/assets/images/icon-cross.svg\" alt=\"\" />\n          </button>\n        </li>\n    `;\n\n  return listItem;\n}\n\n/**\n * Checks if a string is empty. Will trim the the middle of the string\n * @param str - A string that will be checked\n * @returns {boolean} True if string is empty, false otherwise\n */\nfunction CheckIfEmptyString(str: string): boolean {\n  return str.trim() === '';\n}\n\n/**\n * Generates a unique id\n * @returns {string} A unique ID\n */\nfunction generateId(): string {\n  return Math.random().toString(36).slice(2);\n}\n\n/**\n * Creates an object of type Todo\n * @param value - A string which should be the actual todo itself\n * @returns {Todo} A todo object\n */\nfunction createTodoObject(value: string): Todo {\n  return {\n    id: generateId(),\n    value: value,\n    completed: false,\n  };\n}\n\n/**\n * Checks for the type of button being passed in\n * @param element - The button that was clicked on\n * @returns {validButton} A message stating the type of button that was clicked on\n * @throws {new Error} A string error built with the Error constructor\n * @example checkTypeOfButton(deleteBtn) -> 'delete-btn'\n */\nfunction checkTypeOfButton(element: HTMLButtonElement): validButton {\n  if (element.classList.contains('todo-delete-icon')) {\n    return 'delete-btn';\n  } else if (element.classList.contains('complete-btn')) {\n    return 'complete-btn';\n  } else {\n    return 'not-a-button';\n  }\n}\n\n/**\n * Finds a specific Todo based on an ID\n * @param id - A unique ID belonging to an object of type Todo\n * @param model - The global state\n * @returns {Todo} The Todo which matches the id passed in\n */\nfunction findTodo(id: string, model: Model): Todo {\n  const matchingTodo = model.AllTodos.filter((todo) => todo.id === id);\n\n  return matchingTodo[0];\n}\n\n/**\n * Saves users todos to local storage\n * @param todos - The global state that should be saved to local storage\n */\nfunction saveToLocalStorage(todos: Todo[]) {\n  const todoToJson = JSON.stringify(todos);\n  localStorage.setItem('todos', todoToJson);\n}\n\n/**\n * Retrieves a JSON string from localStorage\n * @param itemName - The key in the key:value pair of localStorage\n * @returns {string} Either a string of the users todos or an empty array\n */\nfunction getItemsFromLocalStorage(itemName: string): string {\n  const storage = localStorage.getItem(itemName);\n  return storage !== null ? storage : '[]';\n}\n\n/**\n * Parses the users todo's\n * @param item - Parses a string\n * @returns {Todo[]} An array of objects of type Todo\n */\nfunction parseTodos(item: string): Todo[] {\n  return JSON.parse(item);\n}\n\n/**\n * Simply for taking out the bloat from the script itself\n * @returns The example Todo\n */\nfunction renderListItemNode(template: HTMLTemplateElement): Todo {\n  const docFragment: DocumentFragment = template.content;\n  const listItemClone = docFragment.firstElementChild?.cloneNode(\n    true\n  ) as HTMLLIElement;\n\n  const id = listItemClone.dataset.id as string;\n  const pEl = listItemClone.childNodes[3];\n  const text = pEl.textContent?.trim() as string;\n\n  const newTodo: Todo = {\n    id: id,\n    value: text,\n    completed: false,\n  };\n\n  return newTodo;\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFDQSxJQUFNLFFBQVEsU0FBUyxnQkFBVCxDQUNaLGlCQURZLENBQWQ7QUFHQSxJQUFNLE9BQU8sU0FBUyxhQUFULENBQXVCLGtCQUF2QixDQUFiO0FBQ0EsSUFBTSxRQUFRLFNBQVMsYUFBVCxDQUF1QixhQUF2QixDQUFkO0FBQ0EsSUFBTSxLQUFLLFNBQVMsYUFBVCxDQUF1QixPQUF2QixDQUFYO0FBQ0EsSUFBTSxXQUFXLFNBQVMsYUFBVCxDQUNmLG9CQURlLENBQWpCO0FBd0JBO0FBQ0E7QUFDQTtBQUNBLElBQU0sT0FBYztBQUNsQixjQUFVO0FBRFEsQ0FBcEI7QUFHQSxPQUFPLE1BQVAsQ0FBYyxJQUFkO0FBT0EsU0FBUyxNQUFULENBQWdCLEdBQWhCLEVBQTBCLEtBQTFCLEVBQXdDLEtBQXhDLEVBQW1EO0FBQ2pELFlBQVEsR0FBUjtBQUNFLGFBQUssU0FBTDtBQUNFLGtCQUFNLFFBQU4sQ0FBZSxJQUFmLENBQW9CLEtBQXBCO0FBQ0E7QUFFRixhQUFLLFlBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixVQUFDLElBQUQsRUFBUztBQUM5QixvQkFBSSxLQUFLLEVBQUwsS0FBWSxNQUFNLEVBQXRCLEVBQTBCO0FBQ3hCLHdCQUFNLFFBQVEsTUFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixJQUF2QixDQUFkO0FBQ0EsMEJBQU0sUUFBTixDQUFlLE1BQWYsQ0FBc0IsS0FBdEIsRUFBNkIsQ0FBN0I7QUFDRDtBQUNGLGFBTEQ7QUFNQTtBQUVGLGFBQUssWUFBTDtBQUNFLGtCQUFNLFFBQU4sQ0FBZSxPQUFmLENBQXVCLFVBQUMsSUFBRCxFQUFTO0FBQzlCLG9CQUFJLEtBQUssRUFBTCxLQUFZLE1BQU0sRUFBdEIsRUFB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TCxDQUFXLElBQVgsQ0FBUDtBQUNEO0FBRUQ7Ozs7QUFJQSxTQUFTLGtCQUFULENBQTRCLFFBQTVCLEVBQXlEOztBQUN2RCxRQUFNLGNBQWdDLFNBQVMsT0FBL0M7QUFDQSxRQUFNLGdCQUFnQixDQUFBLEtBQUEsWUFBWSxpQkFBWixNQUE2QixJQUE3QixJQUE2QixPQUFBLEtBQUEsQ0FBN0IsR0FBNkIsS0FBQSxDQUE3QixHQUE2QixHQUFFLFNBQUYsQ0FDakQsSUFEaUQsQ0FBbkQ7QUFJQSxRQUFNLEtBQUssY0FBYyxPQUFkLENBQXNCLEVBQWpDO0FBQ0EsUUFBTSxNQUFNLGNBQWMsVUFBZCxDQUF5QixDQUF6QixDQUFaO0FBQ0EsUUFBTSxPQUFPLENBQUEsS0FBQSxJQUFJLFdBQUosTUFBZSxJQUFmLElBQWUsT0FBQSxLQUFBLENBQWYsR0FBZSxLQUFBLENBQWYsR0FBZSxHQUFFLElBQUYsRUFBNUI7QUFFQSxRQUFNLFVBQWdCO0FBQ3BCLFlBQUksRUFEZ0I7QUFFcEIsZUFBTyxJQUZhO0FBR3BCLG1CQUFXO0FBSFMsS0FBdEI7QUFNQSxXQUFPLE9BQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vIGdldCB0aGUgaWQgb2YgdGhlIHRvZG8g4pyFXG4vLyBmaW5kIHRoZSBzcGVjaWZpYyB0b2RvIOKchVxuLy8gY2hhbmdlIHRoZSBjb21wbGV0ZWQgcHJvcGVydHkgdG8gdHJ1ZSDinIVcbi8vIGFkZCB0byBleGNlcHRpb25zIGFueSAuY29tcGxldGUtYnRuIHdpdGggdGhlIGRhdGEtYXR0cmlidXRlIG9mIGNvbXBsZXRlZD1cInRydWVcIiBzaG91bGQgaGF2ZSBhIGJhY2tncm91bmQgb2YgdGhlIGdyYWRpZW50XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET00gTk9ERVNcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCB0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICcudG9kby1saXN0LWl0ZW0nXG4pIGFzIE5vZGVMaXN0T2Y8SFRNTExJRWxlbWVudD47XG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1iYXItZm9ybScpIGFzIEhUTUxGb3JtRWxlbWVudDtcbmNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1iYXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3QgdWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICcjZXhhbXBsZS1saXN0LWl0ZW0nXG4pIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUWVBFU1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG50eXBlIFRvZG8gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGNvbXBsZXRlZDogYm9vbGVhbjtcbn07XG5cbnR5cGUgdmFsaWRCdXR0b24gPSAnZGVsZXRlLWJ0bicgfCAnY29tcGxldGUtYnRuJyB8ICdub3QtYS1idXR0b24nO1xuXG50eXBlIGFsbG93ZWRFbGVtZW50cyA9ICdwJyB8ICdpbnMnIHwgJ2RlbCc7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNT0RFTFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG50eXBlIE1vZGVsID0ge1xuICBBbGxUb2RvczogVG9kb1tdO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUwgU1RBVEVcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgaW5pdDogTW9kZWwgPSB7XG4gIEFsbFRvZG9zOiBbXSxcbn07XG5PYmplY3QuZnJlZXplKGluaXQpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUERBVEUgRlVOQ1RJT05cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxudHlwZSBNc2cgPSAnQWRkVG9kbycgfCAnUmVtb3ZlVG9kbycgfCAnVXBkYXRlVG9kbycgfCAnQ29tcGxldGVUb2RvJztcblxuZnVuY3Rpb24gdXBkYXRlKG1zZzogTXNnLCBtb2RlbDogTW9kZWwsIHZhbHVlOiBUb2RvKTogdm9pZCB7XG4gIHN3aXRjaCAobXNnKSB7XG4gICAgY2FzZSAnQWRkVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5wdXNoKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUmVtb3ZlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnVXBkYXRlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvc1tpbmRleF0udmFsdWUgPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ0NvbXBsZXRlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvc1tpbmRleF0uY29tcGxldGVkID0gdmFsdWUuY29tcGxldGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNDUklQVFNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBHRVQgVE9ET1MgRlJPTSBMT0NBTCBTVE9SQUdFIEFORCBESVNQTEFZIFRIRU1cbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIGNvbnN0IGdldFN0b3JlZFRvZG9zOiBzdHJpbmcgPSBnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UoJ3RvZG9zJyk7XG4gIGNvbnN0IHBhcnNlU3RvcmVkVG9kb3M6IFRvZG9bXSA9IHBhcnNlVG9kb3MoZ2V0U3RvcmVkVG9kb3MpO1xuXG4gIC8vIGlmIHRoZXJlJ3JlIG5vIHByZXZpb3VzIHRvZG8ncywgY3JlYXRlIGV4YW1wbGUgdG9kb1xuICBpZiAocGFyc2VTdG9yZWRUb2Rvcy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zdCBuZXdUb2RvID0gcmVuZGVyTGlzdEl0ZW1Ob2RlKHRlbXBsYXRlKTtcbiAgICB1cGRhdGUoJ0FkZFRvZG8nLCBtb2RlbCwgbmV3VG9kbyk7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChjb25zdCB0b2RvIG9mIHBhcnNlU3RvcmVkVG9kb3MpIHtcbiAgICAgIHVwZGF0ZSgnQWRkVG9kbycsIG1vZGVsLCB0b2RvKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJUb2Rvcyhtb2RlbC5BbGxUb2Rvcyk7XG5cbiAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyIHRvIGluaXRpYWwgdG9kbyBzbyB0aGF0IGl0IGNhbiBiZSBzZXQgdG8gY29tcGxldGUgYXMgd2VsbFxuICBjb25zdCBhbGxUb2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idG4nKTtcbiAgYWxsVG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgIHRvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgLy8gaGFuZGxlQ29tcGxldGVkQ2xpY2soZSwgbW9kZWwpO1xuICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICB9KTtcbiAgfSk7XG59KShpbml0KTtcblxuLy8gQ1JFQVRFIE5FVyBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBnZXRVc2VySW5wdXQgPSBpbnB1dC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgaXNVc2VySW5wdXRFbXB0eSA9IENoZWNrSWZFbXB0eVN0cmluZyhnZXRVc2VySW5wdXQpO1xuICAgIGNvbnN0IGNyZWF0ZU5ld1RvZG8gPSBjcmVhdGVUb2RvT2JqZWN0KGdldFVzZXJJbnB1dCk7XG5cbiAgICBpZiAoIWlzVXNlcklucHV0RW1wdHkpIHtcbiAgICAgIHVwZGF0ZSgnQWRkVG9kbycsIG1vZGVsLCBjcmVhdGVOZXdUb2RvKTtcbiAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyVG9kb3MobW9kZWwuQWxsVG9kb3MpO1xuXG4gICAgLy8gYWRkIGFuIGV2ZW50TGlzdGVuZXIgdG8gZWFjaCBidXR0b24gbm93IHNvIHRoYXQgdGhleSB3aWxsIGFjY2VwdCBjbGljayBldmVudHMgd2hlbiBjcmVhdGVkXG4gICAgY29uc3QgY29tcGxldGVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBsZXRlLWJ0bicpO1xuICAgIGNvbXBsZXRlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGVsJyk7XG4gICAgICAgIG5ld0NoaWxkLmNsYXNzTmFtZSA9ICdsaXN0LWl0ZW0tdGV4dCc7XG4gICAgICAgIC8vIG5ld0NoaWxkLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgLy8gY29uc3Qgb2xkQ2hpbGQgPSB0YXJnZXQ7XG4gICAgICAgIC8vIGNvbnN0IHBhcmVudCA9IGxpc3RJdGVtO1xuXG4gICAgICAgIC8vIGNvbnN0IHJlcGxhY2VtZW50SW5mbyA9IHsgcGFyZW50LCBuZXdDaGlsZCwgb2xkQ2hpbGQgfTtcblxuICAgICAgICAvLyBoYW5kbGVDb21wbGV0ZWRDbGljayhlLCBtb2RlbCk7XG4gICAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KShpbml0KTtcblxuLy8gREVMRVRFIFRPRE9TXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICB1bC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgeEltYWdlID0gZS50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBjb25zdCBidXR0b24gPSB4SW1hZ2UucGFyZW50RWxlbWVudCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGNvbnN0IGxpID0gYnV0dG9uLnBhcmVudEVsZW1lbnQgYXMgSFRNTExJRWxlbWVudDtcblxuICAgIGNvbnN0IHRvZG9JZCA9IGxpLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzRGVsZXRlT3JVcGRhdGVCdG4gPSBjaGVja1R5cGVPZkJ1dHRvbihidXR0b24pO1xuXG4gICAgaWYgKGlzRGVsZXRlT3JVcGRhdGVCdG4gPT09ICdkZWxldGUtYnRuJykge1xuICAgICAgY29uc3QgdG9kb1RoYXRTaG91bGRCZURlbGV0ZWQgPSBmaW5kVG9kbyh0b2RvSWQsIG1vZGVsKTtcbiAgICAgIGRlbGV0ZVRvZG8odG9kb1RoYXRTaG91bGRCZURlbGV0ZWQuaWQsIG1vZGVsLCBsaSk7XG4gICAgICB1cGRhdGUoJ1JlbW92ZVRvZG8nLCBtb2RlbCwgdG9kb1RoYXRTaG91bGRCZURlbGV0ZWQpO1xuICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICB9XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vIFVQREFURSBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxQYXJhZ3JhcGhFbGVtZW50KSB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGFyZ2V0LnRleHRDb250ZW50ICE9PSBudWxsID8gdGFyZ2V0LnRleHRDb250ZW50IDogJyc7XG4gICAgICBjb25zdCBsaXN0SXRlbSA9IHRhcmdldC5wYXJlbnRFbGVtZW50IGFzIEhUTUxMSUVsZW1lbnQ7XG4gICAgICBjb25zdCBsaXN0SXRlbUlEID0gbGlzdEl0ZW0uZGF0YXNldC5pZDtcblxuICAgICAgaWYgKGxpc3RJdGVtSUQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCB1cGRhdGVkVG9kbzogVG9kbyA9IHtcbiAgICAgICAgICBpZDogbGlzdEl0ZW1JRCxcbiAgICAgICAgICB2YWx1ZTogdGV4dCxcbiAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG5ld0NoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGVsJyk7XG4gICAgICAgIG5ld0NoaWxkLmNsYXNzTmFtZSA9ICdsaXN0LWl0ZW0tdGV4dCc7XG4gICAgICAgIG5ld0NoaWxkLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgY29uc3Qgb2xkQ2hpbGQgPSB0YXJnZXQ7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGxpc3RJdGVtO1xuXG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50SW5mbyA9IHsgcGFyZW50LCBuZXdDaGlsZCwgb2xkQ2hpbGQgfTtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVwbGFjZW1lbnRJbmZvKTtcblxuICAgICAgICB1cGRhdGUoJ1VwZGF0ZVRvZG8nLCBtb2RlbCwgdXBkYXRlZFRvZG8pO1xuICAgICAgICAvLyBoYW5kbGVDb21wbGV0ZWRDbGljayhlLCBtb2RlbCwgcmVwbGFjZW1lbnRJbmZvKTtcbiAgICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgbGlzdCBpdGVtIGRvZXNuJ3QgaGF2ZSBhbiBJRFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vIFNFVCBGSUxURVJcbigobW9kZWw6IE1vZGVsKSA9PiB7fSkoaW5pdCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWSUVXIEZVTkNUSU9OU1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogRGlzcGxheXMgYWxsIHRoZSB0b2RvcyBmcm9tIHRoZSBnbG9iYWwgc3RhdGUgdW50byB0aGUgcGFnZVxuICogQHBhcmFtIHRvZG9zIC0gVGhlIGdsb2JhbCBzdGF0ZVxuICovXG5mdW5jdGlvbiByZW5kZXJUb2Rvcyh0b2RvczogVG9kb1tdKSB7XG4gIHVsLmlubmVySFRNTCA9ICcnO1xuXG4gIGxldCB0ZW1wU3RvcmFnZTogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCB0b2RvIG9mIHRvZG9zKSB7XG4gICAgY29uc3QgZGV0ZXJtaW5lRWxlbWVudCA9IHRvZG8uY29tcGxldGVkID8gJ2RlbCcgOiAncCc7XG5cbiAgICB0ZW1wU3RvcmFnZS5wdXNoKFxuICAgICAgY3JlYXRlTGlzdEl0ZW0oXG4gICAgICAgIHRvZG8uaWQsXG4gICAgICAgIHRvZG8udmFsdWUudHJpbSgpLFxuICAgICAgICB0b2RvLmNvbXBsZXRlZCxcbiAgICAgICAgZGV0ZXJtaW5lRWxlbWVudFxuICAgICAgKVxuICAgICk7XG4gICAgaW5wdXQudmFsdWUgPSAnJztcbiAgfVxuICB1bC5pbm5lckhUTUwgPSB0ZW1wU3RvcmFnZS5qb2luKCcnKTtcbn1cblxuLyoqXG4gKiBNdXRhdGVzIGEgdG9kbyBzbyB0aGF0IGl0cyBjb21wbGV0ZWQgZGF0YSBhdHRyaWJ1dGUgaXMgdG9nZ2xlZFxuICogQHBhcmFtIGxpc3RJdGVtIC0gQSBsaXN0IGl0ZW0gY3VycmVudGx5IGFwcGVuZGVkIHRvIHRoZSBET01cbiAqIEBwYXJhbSB2YWx1ZSAtIFdoYXQgdGhlIGNvbXBsZXRlZCBkYXRhIGF0dHJpYnV0ZSBzaG91bGQgYmUgc3QgdG9cbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ29tcGxldGVBdHRyaWJ1dGUobGlzdEl0ZW06IEhUTUxMSUVsZW1lbnQsIHZhbHVlOiBib29sZWFuKSB7XG4gIGNvbnN0IGlzQ29tcGxldGVkID0gdmFsdWU7XG5cbiAgbGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPSBpc0NvbXBsZXRlZC50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBUb2RvIDxsaT4gZnJvbSB0aGUgRE9NXG4gKiBAcGFyYW0gaWQgLSBBIHVuaXF1ZSBpZCBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9mIHR5cGUgVG9kb1xuICogQHBhcmFtIG1vZGVsIC0gVGhlIGdsb2JhbCBzdGF0ZVxuICogQHBhcmFtIGxpc3RFbGVtZW50IC0gQSBsaXN0IGVsZW1lbnQgdG8gYmUgcmVtb3ZlZFxuICogQHJldHVybnMge1RvZG99IFRoZSBkZWxldGVkIFRvZG8gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZVRvZG8oXG4gIGlkOiBzdHJpbmcsXG4gIG1vZGVsOiBNb2RlbCxcbiAgbGlzdEVsZW1lbnQ6IEhUTUxMSUVsZW1lbnRcbik6IFRvZG8ge1xuICBjb25zdCB0b2RvID0gZmluZFRvZG8oaWQsIG1vZGVsKTtcbiAgbGlzdEVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgcmV0dXJuIHRvZG87XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgZ2xvYmFsIHN0YXRlLCB0b2dnbGVzIHRoZSBjb21wbGV0ZWQgZGF0YSBhdHRyaWJ1dGUgb24gYSBsaXN0IGl0ZW0gYW5kIHJlcGxhY2VzIHRoZSBwIGVsZW1lbnQgd2l0aCBhIGRlbCBlbGVtZW50IGlmIG5lZWRlZFxuICogQHBhcmFtIGUgLSBBIGNsaWNrIGV2ZW50XG4gKiBAcGFyYW0gbW9kZWwgLSBUaGUgZ2xvYmFsIHN0YXRlXG4gKiBAcGFyYW0gZWwgLVxuICovXG5mdW5jdGlvbiBoYW5kbGVDb21wbGV0ZWRDbGljayhlOiBFdmVudCwgbW9kZWw6IE1vZGVsLCBlbCA9IHt9KSB7XG4gIGNvbnNvbGUubG9nKGVsKTtcblxuICBjb25zdCBjb21wbGV0ZUJ0biA9IGUuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICBjb25zdCBsaXN0SXRlbSA9IGNvbXBsZXRlQnRuLnBhcmVudEVsZW1lbnQgYXMgSFRNTExJRWxlbWVudDtcbiAgY29uc3QgaWQgPSBsaXN0SXRlbS5kYXRhc2V0LmlkO1xuXG4gIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgY3VycmVudFRvZG8gPSBmaW5kVG9kbyhpZCwgbW9kZWwpO1xuICAgIGN1cnJlbnRUb2RvLmNvbXBsZXRlZCA9ICFjdXJyZW50VG9kby5jb21wbGV0ZWQ7XG5cbiAgICAvLyBjb25zdCBkZXRlcm1pbmVFbGVtZW50ID0gY3VycmVudFRvZG8uY29tcGxldGVkID8gJ2RlbCcgOiAncCc7XG5cbiAgICAvLyBjb25zdCBjb21wbGV0ZWRUb2RvID0gY3JlYXRlTGlzdEl0ZW0oXG4gICAgLy8gICBpZCxcbiAgICAvLyAgIGN1cnJlbnRUb2RvLnZhbHVlLFxuICAgIC8vICAgY3VycmVudFRvZG8uY29tcGxldGVkLFxuICAgIC8vICAgZGV0ZXJtaW5lRWxlbWVudFxuICAgIC8vICk7XG5cbiAgICB1cGRhdGUoJ0NvbXBsZXRlVG9kbycsIG1vZGVsLCBjdXJyZW50VG9kbyk7XG5cbiAgICB0b2dnbGVDb21wbGV0ZUF0dHJpYnV0ZShsaXN0SXRlbSwgY3VycmVudFRvZG8uY29tcGxldGVkKTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSEVMUEVSIEZVTkNUSU9OU1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IGl0ZW1cbiAqIEBwYXJhbSBpZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhlIGxpc3QgaXRlbSB0b2RvXG4gKiBAcGFyYW0gdGV4dCAtIFRoZSBhY3R1YWwgdG9kbyBpdHNlbGZcbiAqIEBwYXJhbSBlbCAtIFJlcHJlc2VudHMgYW4gSHRtbCBlbGVtZW50LCBpbnMgYW5kIGRlbCBhcmUgc2VtYW50aWNhbGx5IGNvcnJlY3QgYnV0IGEgcCB0YWcgY2FuIGJlIHVzZWQgYXMgd2VsbFxuICogQHBhcmFtIGNvbXBsZXRlZCAtIFJlZmxlY3RzIHdoZXRoZXIgdGhlIGNvbXBsZXRlIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkIG9yIG5vdFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGlubmVyIEhUTUwgb2YgdGhlIDxsaT4gaW5jbHVkaW5nIHRoZSBsaSBpdHNlbGZcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTGlzdEl0ZW0oXG4gIGlkOiBzdHJpbmcsXG4gIHRleHQ6IHN0cmluZyxcbiAgY29tcGxldGVkOiBib29sZWFuID0gZmFsc2UsXG4gIGVsOiBhbGxvd2VkRWxlbWVudHMgPSAncCdcbik6IHN0cmluZyB7XG4gIGNvbnN0IGxpc3RJdGVtID0gYFxuICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWl0ZW1cIiBkYXRhLWlkPSR7aWR9IGRhdGEtY29tcGxldGVkPVwiJHtjb21wbGV0ZWR9XCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbXBsZXRlLWJ0blwiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIvc3JjL2Fzc2V0cy9pbWFnZXMvaWNvbi1jaGVjay5zdmdcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwke2VsfSBjbGFzcz1cImxpc3QtaXRlbS10ZXh0XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7dGV4dH08LyR7ZWx9PlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGUtYnRuIHRvZG8tZGVsZXRlLWljb25cIj5cbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJkXCIgc3JjPVwiL3NyYy9hc3NldHMvaW1hZ2VzL2ljb24tY3Jvc3Muc3ZnXCIgYWx0PVwiXCIgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9saT5cbiAgICBgO1xuXG4gIHJldHVybiBsaXN0SXRlbTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzdHJpbmcgaXMgZW1wdHkuIFdpbGwgdHJpbSB0aGUgdGhlIG1pZGRsZSBvZiB0aGUgc3RyaW5nXG4gKiBAcGFyYW0gc3RyIC0gQSBzdHJpbmcgdGhhdCB3aWxsIGJlIGNoZWNrZWRcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHN0cmluZyBpcyBlbXB0eSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIENoZWNrSWZFbXB0eVN0cmluZyhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gc3RyLnRyaW0oKSA9PT0gJyc7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHVuaXF1ZSBJRFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCBvZiB0eXBlIFRvZG9cbiAqIEBwYXJhbSB2YWx1ZSAtIEEgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSB0aGUgYWN0dWFsIHRvZG8gaXRzZWxmXG4gKiBAcmV0dXJucyB7VG9kb30gQSB0b2RvIG9iamVjdFxuICovXG5mdW5jdGlvbiBjcmVhdGVUb2RvT2JqZWN0KHZhbHVlOiBzdHJpbmcpOiBUb2RvIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBmb3IgdGhlIHR5cGUgb2YgYnV0dG9uIGJlaW5nIHBhc3NlZCBpblxuICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgYnV0dG9uIHRoYXQgd2FzIGNsaWNrZWQgb25cbiAqIEByZXR1cm5zIHt2YWxpZEJ1dHRvbn0gQSBtZXNzYWdlIHN0YXRpbmcgdGhlIHR5cGUgb2YgYnV0dG9uIHRoYXQgd2FzIGNsaWNrZWQgb25cbiAqIEB0aHJvd3Mge25ldyBFcnJvcn0gQSBzdHJpbmcgZXJyb3IgYnVpbHQgd2l0aCB0aGUgRXJyb3IgY29uc3RydWN0b3JcbiAqIEBleGFtcGxlIGNoZWNrVHlwZU9mQnV0dG9uKGRlbGV0ZUJ0bikgLT4gJ2RlbGV0ZS1idG4nXG4gKi9cbmZ1bmN0aW9uIGNoZWNrVHlwZU9mQnV0dG9uKGVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50KTogdmFsaWRCdXR0b24ge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tZGVsZXRlLWljb24nKSkge1xuICAgIHJldHVybiAnZGVsZXRlLWJ0bic7XG4gIH0gZWxzZSBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBsZXRlLWJ0bicpKSB7XG4gICAgcmV0dXJuICdjb21wbGV0ZS1idG4nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnbm90LWEtYnV0dG9uJztcbiAgfVxufVxuXG4vKipcbiAqIEZpbmRzIGEgc3BlY2lmaWMgVG9kbyBiYXNlZCBvbiBhbiBJRFxuICogQHBhcmFtIGlkIC0gQSB1bmlxdWUgSUQgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvZiB0eXBlIFRvZG9cbiAqIEBwYXJhbSBtb2RlbCAtIFRoZSBnbG9iYWwgc3RhdGVcbiAqIEByZXR1cm5zIHtUb2RvfSBUaGUgVG9kbyB3aGljaCBtYXRjaGVzIHRoZSBpZCBwYXNzZWQgaW5cbiAqL1xuZnVuY3Rpb24gZmluZFRvZG8oaWQ6IHN0cmluZywgbW9kZWw6IE1vZGVsKTogVG9kbyB7XG4gIGNvbnN0IG1hdGNoaW5nVG9kbyA9IG1vZGVsLkFsbFRvZG9zLmZpbHRlcigodG9kbykgPT4gdG9kby5pZCA9PT0gaWQpO1xuXG4gIHJldHVybiBtYXRjaGluZ1RvZG9bMF07XG59XG5cbi8qKlxuICogU2F2ZXMgdXNlcnMgdG9kb3MgdG8gbG9jYWwgc3RvcmFnZVxuICogQHBhcmFtIHRvZG9zIC0gVGhlIGdsb2JhbCBzdGF0ZSB0aGF0IHNob3VsZCBiZSBzYXZlZCB0byBsb2NhbCBzdG9yYWdlXG4gKi9cbmZ1bmN0aW9uIHNhdmVUb0xvY2FsU3RvcmFnZSh0b2RvczogVG9kb1tdKSB7XG4gIGNvbnN0IHRvZG9Ub0pzb24gPSBKU09OLnN0cmluZ2lmeSh0b2Rvcyk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIHRvZG9Ub0pzb24pO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBhIEpTT04gc3RyaW5nIGZyb20gbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0gaXRlbU5hbWUgLSBUaGUga2V5IGluIHRoZSBrZXk6dmFsdWUgcGFpciBvZiBsb2NhbFN0b3JhZ2VcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEVpdGhlciBhIHN0cmluZyBvZiB0aGUgdXNlcnMgdG9kb3Mgb3IgYW4gZW1wdHkgYXJyYXlcbiAqL1xuZnVuY3Rpb24gZ2V0SXRlbXNGcm9tTG9jYWxTdG9yYWdlKGl0ZW1OYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaXRlbU5hbWUpO1xuICByZXR1cm4gc3RvcmFnZSAhPT0gbnVsbCA/IHN0b3JhZ2UgOiAnW10nO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgdXNlcnMgdG9kbydzXG4gKiBAcGFyYW0gaXRlbSAtIFBhcnNlcyBhIHN0cmluZ1xuICogQHJldHVybnMge1RvZG9bXX0gQW4gYXJyYXkgb2Ygb2JqZWN0cyBvZiB0eXBlIFRvZG9cbiAqL1xuZnVuY3Rpb24gcGFyc2VUb2RvcyhpdGVtOiBzdHJpbmcpOiBUb2RvW10ge1xuICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcbn1cblxuLyoqXG4gKiBTaW1wbHkgZm9yIHRha2luZyBvdXQgdGhlIGJsb2F0IGZyb20gdGhlIHNjcmlwdCBpdHNlbGZcbiAqIEByZXR1cm5zIFRoZSBleGFtcGxlIFRvZG9cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGlzdEl0ZW1Ob2RlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KTogVG9kbyB7XG4gIGNvbnN0IGRvY0ZyYWdtZW50OiBEb2N1bWVudEZyYWdtZW50ID0gdGVtcGxhdGUuY29udGVudDtcbiAgY29uc3QgbGlzdEl0ZW1DbG9uZSA9IGRvY0ZyYWdtZW50LmZpcnN0RWxlbWVudENoaWxkPy5jbG9uZU5vZGUoXG4gICAgdHJ1ZVxuICApIGFzIEhUTUxMSUVsZW1lbnQ7XG5cbiAgY29uc3QgaWQgPSBsaXN0SXRlbUNsb25lLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICBjb25zdCBwRWwgPSBsaXN0SXRlbUNsb25lLmNoaWxkTm9kZXNbM107XG4gIGNvbnN0IHRleHQgPSBwRWwudGV4dENvbnRlbnQ/LnRyaW0oKSBhcyBzdHJpbmc7XG5cbiAgY29uc3QgbmV3VG9kbzogVG9kbyA9IHtcbiAgICBpZDogaWQsXG4gICAgdmFsdWU6IHRleHQsXG4gICAgY29tcGxldGVkOiBmYWxzZSxcbiAgfTtcblxuICByZXR1cm4gbmV3VG9kbztcbn1cbiJdfQ=="}