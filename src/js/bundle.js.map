{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// ------------------------------------------------------------------------------\n//                                 DOM NODES\n//-------------------------------------------------------------------------------\nconst todos = document.querySelectorAll(\n  '.todo-list-item'\n) as NodeListOf<HTMLLIElement>;\nconst form = document.querySelector('.create-bar-form') as HTMLFormElement;\nconst input = document.querySelector('.create-bar') as HTMLInputElement;\nconst ul = document.querySelector('.list') as HTMLUListElement;\nconst template = document.querySelector(\n  '#example-list-item'\n) as HTMLTemplateElement;\n\n// ------------------------------------------------------------------------------\n//                                 TYPES\n//-------------------------------------------------------------------------------\ntype Todo = {\n  id: string;\n  value: string;\n  completed: boolean;\n};\n\ntype validButton = 'delete-btn' | 'complete-btn' | 'not-a-button';\n\ntype allowedElements = 'p' | 'ins' | 'del';\n\n// ------------------------------------------------------------------------------\n//                                 MODEL\n//-------------------------------------------------------------------------------\ntype Model = {\n  AllTodos: Todo[];\n};\n\n// ------------------------------------------------------------------------------\n//                               GLOBAL STATE\n//-------------------------------------------------------------------------------\nconst init: Model = {\n  AllTodos: [],\n};\n\n// ------------------------------------------------------------------------------\n//                             UPDATE FUNCTION\n//-------------------------------------------------------------------------------\ntype Msg = 'AddTodo' | 'RemoveTodo' | 'UpdateTodo' | 'CompleteTodo';\n\nfunction update(msg: Msg, model: Model, value: Todo): void {\n  switch (msg) {\n    case 'AddTodo':\n      model.AllTodos.push(value);\n      break;\n\n    case 'RemoveTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos.splice(index, 1);\n        }\n      });\n      break;\n\n    case 'UpdateTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].value = value.value;\n        }\n      });\n      break;\n\n    case 'CompleteTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].completed = !value.completed;\n        }\n      });\n      break;\n  }\n}\n\n// ------------------------------------------------------------------------------\n//                                   SCRIPTS\n//-------------------------------------------------------------------------------\n\n// GET TODOS FROM LOCAL STORAGE AND DISPLAY THEM\n((model: Model) => {\n  const getStoredTodos: string = getItemsFromLocalStorage('todos');\n  const parseStoredTodos: Todo[] = parseTodos(getStoredTodos);\n\n  // if there're no previous todo's, create example todo else update the state to contain all the stored todos\n  if (parseStoredTodos.length === 0) {\n    const newTodo = renderListItemNode(template);\n    update('AddTodo', model, newTodo);\n  } else {\n    for (const todo of parseStoredTodos) {\n      update('AddTodo', model, todo);\n    }\n  }\n\n  renderTodos(model.AllTodos);\n\n  // update status bar to display the number of todos\n  renderNumberOfTodos(model);\n})(init);\n\n// CREATE NEW TODOS\n((model: Model) => {\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const getUserInput = input.value.trim();\n    const isUserInputEmpty = CheckIfEmptyString(getUserInput);\n    const createNewTodo = createTodoObject(getUserInput);\n\n    if (!isUserInputEmpty) {\n      update('AddTodo', model, createNewTodo);\n      saveToLocalStorage(model.AllTodos);\n    }\n\n    renderTodos(model.AllTodos);\n\n    // when a todo is added, make sure that the status bar is updated\n    renderNumberOfTodos(model);\n  });\n})(init);\n\n// DELETE TODOS\n((model: Model) => {\n  ul.addEventListener('click', (e) => {\n    const deleteIconImage = e.target as HTMLImageElement;\n    const button = deleteIconImage.parentElement as HTMLButtonElement;\n\n    const listItem = button.parentElement as HTMLLIElement;\n\n    const todoId = listItem.dataset.id as string;\n    const isDeleteOrUpdateBtn = checkTypeOfButton(button);\n\n    if (isDeleteOrUpdateBtn === 'delete-btn') {\n      const todoThatShouldBeDeleted = findTodo(todoId, model);\n      deleteTodo(todoThatShouldBeDeleted.id, model, listItem);\n      update('RemoveTodo', model, todoThatShouldBeDeleted);\n      saveToLocalStorage(model.AllTodos);\n\n      // when a todo is deleted, make sure that the status bar is updated\n      renderNumberOfTodos(model);\n    }\n  });\n})(init);\n\n// UPDATE TODOS\n((model: Model) => {\n  ul.addEventListener('focusout', (e) => {\n    const target = e.target;\n\n    if (target instanceof HTMLParagraphElement) {\n      const text = target.textContent !== null ? target.textContent : '';\n      const listItem = target.parentElement as HTMLLIElement;\n      const listItemID = listItem.dataset.id as string;\n      // strip out white spaces so that users can't update a todo to an empty line\n      const textPattern = text.replace(/ /g, '').trim();\n\n      // If white space or new line characters are the only things submitted, the todo will be turned back to the previous one\n      if (listItemID !== undefined && textPattern.length !== 0) {\n        const updatedTodo: Todo = {\n          id: listItemID,\n          value: text,\n          completed: false,\n        };\n        update('UpdateTodo', model, updatedTodo);\n        saveToLocalStorage(model.AllTodos);\n      } else {\n        const previousTodo = findTodo(listItemID, model);\n        const previousText = previousTodo.value;\n        target.textContent = previousText;\n      }\n    }\n  });\n})(init);\n\n// COMPLETE TODO\n((model: Model) => {\n  // Options for the observer (which mutations to observe)\n  const config = { childList: true };\n\n  // Create an observer instance linked to the callback function\n  const observer = new MutationObserver((mutationList) => {\n    completeTodo(mutationList, model);\n  });\n\n  // Start observing the target node for configured mutations\n  observer.observe(ul, config);\n\n  // add a mutation so that the mutationObserver code will automatically kick in\n  const newLi = document.createElement('li') as HTMLLIElement;\n  newLi.dataset.id = '000';\n  const shouldDelete = newLi;\n  ul.append(newLi);\n  if (shouldDelete.dataset.id === '000') {\n    shouldDelete.remove();\n  }\n})(init);\n\n// REMOVE STATUS BAR AND TEXT-WRAPPER WHEN THERE'RE NO TODOS\n((model: Model) => {})(init);\n\n// TOGGLE THEME\n((model: Model) => {})(init);\n\n// FILTER TASKS\n((model: Model) => {})(init);\n\n// DISPLAY NUMBER OF UN-COMPLETED TODOS\n((model: Model) => {\n  // Options for the observer (which mutations to observe)\n  const config = { childList: true, subtree: true };\n\n  // Create an observer instance linked to the callback function\n  const observer = new MutationObserver((mutationList) => {\n    updateStatusBar(mutationList, model);\n  });\n\n  // Start observing the target node for configured mutations\n  observer.observe(ul, config);\n})(init);\n\n// CLEAR ALL COMPLETED TASKS\n((model: Model) => {})(init);\n\n// DRAG AND DROP TASKS\n((model: Model) => {})(init);\n\n// ------------------------------------------------------------------------------\n//                              VIEW FUNCTIONS\n//-------------------------------------------------------------------------------\n\n/**\n * Displays all the todos from the global state unto the page\n * @param todos - The global state\n */\nfunction renderTodos(todos: Todo[]) {\n  ul.innerHTML = '';\n\n  let tempStorage: string[] = [];\n  for (const todo of todos) {\n    const determineElement = todo.completed ? 'del' : 'p';\n\n    tempStorage.push(\n      createListItem(\n        todo.id,\n        todo.value.trim(),\n        todo.completed,\n        determineElement\n      )\n    );\n    input.value = '';\n  }\n  ul.innerHTML = tempStorage.join('');\n}\n\n/**\n * Mutates a todo so that its completed data attribute is toggled\n * @param listItem - A list item currently appended to the DOM\n * @param value - What the completed data attribute should be set to\n */\nfunction toggleCompleteAttribute(listItem: HTMLLIElement, value: boolean) {\n  const isCompleted = value;\n\n  listItem.dataset.completed = isCompleted.toString();\n}\n\n/**\n * Removes a Todo <li> from the DOM\n * @param id - A unique id belonging to an object of type Todo\n * @param model - The global state\n * @param listElement - A list element to be removed\n * @returns {Todo} The deleted Todo object\n */\nfunction deleteTodo(\n  id: string,\n  model: Model,\n  listElement: HTMLLIElement\n): Todo {\n  const todo = findTodo(id, model);\n  listElement.remove();\n\n  return todo;\n}\n\n/**\n * Updates the global state, toggles the completed data attribute on a list item and replaces the p element with a del element if needed\n * @param e - A click event\n * @param model - The global state\n * @param el -\n */\nfunction handleCompletedClick(e: Event, model: Model, el = {}) {\n  const completeBtn = e.currentTarget as HTMLButtonElement;\n\n  const listItem = completeBtn.parentElement as HTMLLIElement;\n  const id = listItem.dataset.id;\n\n  if (id !== undefined) {\n    const currentTodo = findTodo(id, model);\n    currentTodo.completed = !currentTodo.completed;\n\n    // const determineElement = currentTodo.completed ? 'del' : 'p';\n\n    // const completedTodo = createListItem(\n    //   id,\n    //   currentTodo.value,\n    //   currentTodo.completed,\n    //   determineElement\n    // );\n\n    update('CompleteTodo', model, currentTodo);\n\n    toggleCompleteAttribute(listItem, currentTodo.completed);\n  }\n}\n\n/**\n * Changes the number of todos in the display bar(s)\n * @param model The current state which should know which todos are currently completed\n */\nfunction renderNumberOfTodos(model: Model) {\n  const todosLeft = document.querySelectorAll(\n    '.items-left p'\n  ) as NodeListOf<HTMLParagraphElement>;\n\n  const unCompletedTodos = model.AllTodos.filter((todo) => !todo.completed);\n\n  todosLeft.forEach((todo) => {\n    if (unCompletedTodos.length === 1) {\n      todo.textContent = `${unCompletedTodos.length} item left`;\n    } else {\n      todo.textContent = `${unCompletedTodos.length} items left`;\n    }\n  });\n}\n\n// ------------------------------------------------------------------------------\n//                              HELPER FUNCTIONS\n//-------------------------------------------------------------------------------\n/**\n * Creates a list item\n * @param id - The unique ID of the list item todo\n * @param text - The actual todo itself\n * @param el - Represents an Html element, ins and del are semantically correct but a p tag can be used as well\n * @param completed - Reflects whether the complete button has been clicked or not\n * @returns {string} The inner HTML of the <li> including the li itself\n */\nfunction createListItem(\n  id: string,\n  text: string,\n  completed: boolean = false,\n  el: allowedElements = 'p'\n): string {\n  const listItem = `\n        <li class=\"list-item\" data-id=${id} data-completed=\"${completed}\">\n          <button class=\"complete-btn\">\n            <img src=\"/src/assets/images/icon-check.svg\" aria-hidden=\"true\" alt=\"\" />\n          </button>\n          <${el} class=\"list-item-text\" contenteditable=\"true\">${text}</${el}>\n          <button class=\"delete-btn todo-delete-icon\">\n            <img class=\"d\" src=\"/src/assets/images/icon-cross.svg\" alt=\"\" />\n          </button>\n        </li>\n    `;\n\n  return listItem;\n}\n\n/**\n * Checks if a string is empty. Will trim the the middle of the string\n * @param str - A string that will be checked\n * @returns {boolean} True if string is empty, false otherwise\n */\nfunction CheckIfEmptyString(str: string): boolean {\n  return str.trim() === '';\n}\n\n/**\n * Generates a unique id\n * @returns {string} A unique ID\n */\nfunction generateId(): string {\n  return Math.random().toString(36).slice(2);\n}\n\n/**\n * Creates an object of type Todo\n * @param value - A string which should be the actual todo itself\n * @returns {Todo} A todo object\n */\nfunction createTodoObject(value: string): Todo {\n  return {\n    id: generateId(),\n    value: value,\n    completed: false,\n  };\n}\n\n/**\n * Checks for the type of button being passed in\n * @param element - The button that was clicked on\n * @returns {validButton} A message stating the type of button that was clicked on\n * @throws {new Error} A string error built with the Error constructor\n * @example checkTypeOfButton(deleteBtn) -> 'delete-btn'\n */\nfunction checkTypeOfButton(element: HTMLButtonElement): validButton {\n  if (element.classList.contains('todo-delete-icon')) {\n    return 'delete-btn';\n  } else if (element.classList.contains('complete-btn')) {\n    return 'complete-btn';\n  } else {\n    return 'not-a-button';\n  }\n}\n\n/**\n * Finds a specific Todo based on an ID\n * @param id - A unique ID belonging to an object of type Todo\n * @param model - The global state\n * @returns {Todo} The Todo which matches the id passed in\n */\nfunction findTodo(id: string, model: Model): Todo {\n  const matchingTodo = model.AllTodos.filter((todo) => todo.id === id);\n\n  return matchingTodo[0];\n}\n\n/**\n * Saves users todos to local storage\n * @param todos - The global state that should be saved to local storage\n */\nfunction saveToLocalStorage(todos: Todo[]) {\n  const todoToJson = JSON.stringify(todos);\n  localStorage.setItem('todos', todoToJson);\n}\n\n/**\n * Retrieves a JSON string from localStorage\n * @param itemName - The key in the key:value pair of localStorage\n * @returns {string} Either a string of the users todos or an empty array\n */\nfunction getItemsFromLocalStorage(itemName: string): string {\n  const storage = localStorage.getItem(itemName);\n  return storage !== null ? storage : '[]';\n}\n\n/**\n * Parses the users todo's\n * @param item - Parses a string\n * @returns {Todo[]} An array of objects of type Todo\n */\nfunction parseTodos(item: string): Todo[] {\n  return JSON.parse(item);\n}\n\n/**\n * Creates a newTodo out of the example todo\n * @param template - The template to clone and turn into a newTodo object\n * @returns The example Todo\n */\nfunction renderListItemNode(template: HTMLTemplateElement): Todo {\n  const docFragment: DocumentFragment = template.content;\n  const listItemClone = docFragment.firstElementChild?.cloneNode(\n    true\n  ) as HTMLLIElement;\n\n  const id = listItemClone.dataset.id as string;\n  const pEl = listItemClone.childNodes[3];\n  const text = pEl.textContent?.trim() as string;\n\n  const newTodo: Todo = {\n    id: id,\n    value: text,\n    completed: false,\n  };\n\n  return newTodo;\n}\n\n/**\n * Creates a <p> element\n * @param text - The text content of the element\n * @returns A paragraph element which will be the todo itself. It can be edited\n */\nfunction createParagraphElement(text: string): HTMLParagraphElement {\n  const p = document.createElement('p');\n  p.textContent = text;\n  p.className = 'list-item-text';\n  p.setAttribute('contenteditable', 'true');\n\n  return p;\n}\n\n/**\n * Creates a <del> element\n * @param text - The text content of the element\n * @returns A del element which will be the todo itself. It cannot be edited\n */\nfunction createDelElement(text: string): HTMLModElement {\n  const del = document.createElement('del');\n  del.textContent = text;\n  del.className = 'list-item-text';\n\n  return del;\n}\n\n// ------------------------------------------------------------------------------\n//                             MUTATION OBSERVERS\n//-------------------------------------------------------------------------------\nfunction completeTodo(mutationList: MutationRecord[], model: Model) {\n  // check the type of mutation\n  for (const mutation of mutationList) {\n    if (mutation.type === 'childList') {\n      // check to see if any mutation has occurred\n      if (mutation.addedNodes.length !== 0) {\n        const allCompleteButtons = document.querySelectorAll('.complete-btn');\n\n        allCompleteButtons.forEach((button) => {\n          // remove any previous event listeners before adding anymore in order to avoid any strange behavior\n          button.removeEventListener('click', () => {});\n\n          button.addEventListener('click', () => {\n            // get the listItem, its first child which will either by a p tag or a del tag and its text content\n            const listItem = button.parentElement as HTMLLIElement;\n            const pOrDel = listItem.children[1];\n            const todoText = pOrDel.textContent as string;\n\n            // create a new element that will be inserted depending on whether the todo is completed or not\n            const del = createDelElement(todoText);\n            const p = createParagraphElement(todoText);\n\n            if (pOrDel instanceof HTMLParagraphElement) {\n              listItem.replaceChild(del, pOrDel);\n            } else {\n              listItem.replaceChild(p, pOrDel);\n            }\n\n            // update the completed status of the todo\n            if (listItem.dataset.id != null) {\n              const currentTodo = findTodo(listItem.dataset.id, model);\n              const opposite = !currentTodo.completed;\n              listItem.dataset.completed = String(opposite);\n\n              update('CompleteTodo', model, currentTodo);\n              saveToLocalStorage(model.AllTodos);\n            }\n          });\n        });\n      }\n    }\n  }\n}\n\nfunction updateStatusBar(mutationList: MutationRecord[], model: Model) {\n  for (const mutation of mutationList) {\n    if (mutation.type === 'childList') {\n      if (\n        mutation.addedNodes[0] instanceof HTMLModElement ||\n        mutation.addedNodes[0] instanceof HTMLParagraphElement\n      ) {\n        renderNumberOfTodos(model);\n      }\n    }\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7O0FBQ0EsSUFBTSxRQUFRLFNBQVMsZ0JBQVQsQ0FDWixpQkFEWSxDQUFkO0FBR0EsSUFBTSxPQUFPLFNBQVMsYUFBVCxDQUF1QixrQkFBdkIsQ0FBYjtBQUNBLElBQU0sUUFBUSxTQUFTLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBZDtBQUNBLElBQU0sS0FBSyxTQUFTLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBWDtBQUNBLElBQU0sV0FBVyxTQUFTLGFBQVQsQ0FDZixvQkFEZSxDQUFqQjtBQXdCQTtBQUNBO0FBQ0E7QUFDQSxJQUFNLE9BQWM7QUFDbEIsY0FBVTtBQURRLENBQXBCO0FBU0EsU0FBUyxNQUFULENBQWdCLEdBQWhCLEVBQTBCLEtBQTFCLEVBQXdDLEtBQXhDLEVBQW1EO0FBQ2pELFlBQVEsR0FBUjtBQUNFLGFBQUssU0FBTDtBQUNFLGtCQUFNLFFBQU4sQ0FBZSxJQUFmLENBQW9CLEtBQXBCO0FBQ0E7QUFFRixhQUFLLFlBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixVQUFDLElBQUQsRUFBUztBQUM5QixvQkFBSSxLQUFLLEVBQUwsS0FBWSxNQUFNLEVBQXRCLEVBQTBCO0FBQ3hCLHdCQUFNLFFBQVEsTUFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixJQUF2QixDQUFkO0FBQ0EsMEJBQU0sUUFBTixDQUFlLE1BQWYsQ0FBc0IsS0FBdEIsRUFBNkIsQ0FBN0I7QUFDRDtBQUNGLGFBTEQ7QUFNQTtBQUVGLGFBQUssWUFBTDtBQUNFLGtCQUFNLFFBQU4sQ0FBZSxPQUFmLENBQXVCLFVBQUMsSUFBRCxFQUFTO0FBQzlCLG9CQUFJLEtBQUssRUFBTCxLQUFZLE1BQU0sRUFBdEIsRUFBMEI7QUFDeEIsd0JBQU0sUUFBUSxNQUFNLFFBQU4sQ0FBZSxPQUFmLENBQXVC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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMENqRTtBQUVELFNBQVMsZUFBVCxDQUF5QixZQUF6QixFQUF5RCxLQUF6RCxFQUFxRTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNuRSw4QkFBdUIsWUFBdkIsbUlBQXFDO0FBQUEsZ0JBQTFCLFFBQTBCOztBQUNuQyxnQkFBSSxTQUFTLElBQVQsS0FBa0IsV0FBdEIsRUFBbUM7QUFDakMsb0JBQ0UsU0FBUyxVQUFULENBQW9CLENBQXBCLGFBQWtDLGNBQWxDLElBQ0EsU0FBUyxVQUFULENBQW9CLENBQXBCLGFBQWtDLG9CQUZwQyxFQUdFO0FBQ0Esd0NBQW9CLEtBQXBCO0FBQ0Q7QUFDRjtBQUNGO0FBVmtFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFXcEUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRE9NIE5PREVTXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNvbnN0IHRvZG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgJy50b2RvLWxpc3QtaXRlbSdcbikgYXMgTm9kZUxpc3RPZjxIVE1MTElFbGVtZW50PjtcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJhci1mb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50O1xuY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWJhcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5jb25zdCB1bCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0JykgYXMgSFRNTFVMaXN0RWxlbWVudDtcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJyNleGFtcGxlLWxpc3QtaXRlbSdcbikgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRZUEVTXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgVG9kbyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgY29tcGxldGVkOiBib29sZWFuO1xufTtcblxudHlwZSB2YWxpZEJ1dHRvbiA9ICdkZWxldGUtYnRuJyB8ICdjb21wbGV0ZS1idG4nIHwgJ25vdC1hLWJ1dHRvbic7XG5cbnR5cGUgYWxsb3dlZEVsZW1lbnRzID0gJ3AnIHwgJ2lucycgfCAnZGVsJztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1PREVMXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgTW9kZWwgPSB7XG4gIEFsbFRvZG9zOiBUb2RvW107XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTCBTVEFURVxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBpbml0OiBNb2RlbCA9IHtcbiAgQWxsVG9kb3M6IFtdLFxufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVBEQVRFIEZVTkNUSU9OXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgTXNnID0gJ0FkZFRvZG8nIHwgJ1JlbW92ZVRvZG8nIHwgJ1VwZGF0ZVRvZG8nIHwgJ0NvbXBsZXRlVG9kbyc7XG5cbmZ1bmN0aW9uIHVwZGF0ZShtc2c6IE1zZywgbW9kZWw6IE1vZGVsLCB2YWx1ZTogVG9kbyk6IHZvaWQge1xuICBzd2l0Y2ggKG1zZykge1xuICAgIGNhc2UgJ0FkZFRvZG8nOlxuICAgICAgbW9kZWwuQWxsVG9kb3MucHVzaCh2YWx1ZSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1JlbW92ZVRvZG8nOlxuICAgICAgbW9kZWwuQWxsVG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICBpZiAodG9kby5pZCA9PT0gdmFsdWUuaWQpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IG1vZGVsLkFsbFRvZG9zLmluZGV4T2YodG9kbyk7XG4gICAgICAgICAgbW9kZWwuQWxsVG9kb3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1VwZGF0ZVRvZG8nOlxuICAgICAgbW9kZWwuQWxsVG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICBpZiAodG9kby5pZCA9PT0gdmFsdWUuaWQpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IG1vZGVsLkFsbFRvZG9zLmluZGV4T2YodG9kbyk7XG4gICAgICAgICAgbW9kZWwuQWxsVG9kb3NbaW5kZXhdLnZhbHVlID0gdmFsdWUudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdDb21wbGV0ZVRvZG8nOlxuICAgICAgbW9kZWwuQWxsVG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICBpZiAodG9kby5pZCA9PT0gdmFsdWUuaWQpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IG1vZGVsLkFsbFRvZG9zLmluZGV4T2YodG9kbyk7XG4gICAgICAgICAgbW9kZWwuQWxsVG9kb3NbaW5kZXhdLmNvbXBsZXRlZCA9ICF2YWx1ZS5jb21wbGV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0NSSVBUU1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIEdFVCBUT0RPUyBGUk9NIExPQ0FMIFNUT1JBR0UgQU5EIERJU1BMQVkgVEhFTVxuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgY29uc3QgZ2V0U3RvcmVkVG9kb3M6IHN0cmluZyA9IGdldEl0ZW1zRnJvbUxvY2FsU3RvcmFnZSgndG9kb3MnKTtcbiAgY29uc3QgcGFyc2VTdG9yZWRUb2RvczogVG9kb1tdID0gcGFyc2VUb2RvcyhnZXRTdG9yZWRUb2Rvcyk7XG5cbiAgLy8gaWYgdGhlcmUncmUgbm8gcHJldmlvdXMgdG9kbydzLCBjcmVhdGUgZXhhbXBsZSB0b2RvIGVsc2UgdXBkYXRlIHRoZSBzdGF0ZSB0byBjb250YWluIGFsbCB0aGUgc3RvcmVkIHRvZG9zXG4gIGlmIChwYXJzZVN0b3JlZFRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IG5ld1RvZG8gPSByZW5kZXJMaXN0SXRlbU5vZGUodGVtcGxhdGUpO1xuICAgIHVwZGF0ZSgnQWRkVG9kbycsIG1vZGVsLCBuZXdUb2RvKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGNvbnN0IHRvZG8gb2YgcGFyc2VTdG9yZWRUb2Rvcykge1xuICAgICAgdXBkYXRlKCdBZGRUb2RvJywgbW9kZWwsIHRvZG8pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclRvZG9zKG1vZGVsLkFsbFRvZG9zKTtcblxuICAvLyB1cGRhdGUgc3RhdHVzIGJhciB0byBkaXNwbGF5IHRoZSBudW1iZXIgb2YgdG9kb3NcbiAgcmVuZGVyTnVtYmVyT2ZUb2Rvcyhtb2RlbCk7XG59KShpbml0KTtcblxuLy8gQ1JFQVRFIE5FVyBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBnZXRVc2VySW5wdXQgPSBpbnB1dC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgaXNVc2VySW5wdXRFbXB0eSA9IENoZWNrSWZFbXB0eVN0cmluZyhnZXRVc2VySW5wdXQpO1xuICAgIGNvbnN0IGNyZWF0ZU5ld1RvZG8gPSBjcmVhdGVUb2RvT2JqZWN0KGdldFVzZXJJbnB1dCk7XG5cbiAgICBpZiAoIWlzVXNlcklucHV0RW1wdHkpIHtcbiAgICAgIHVwZGF0ZSgnQWRkVG9kbycsIG1vZGVsLCBjcmVhdGVOZXdUb2RvKTtcbiAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyVG9kb3MobW9kZWwuQWxsVG9kb3MpO1xuXG4gICAgLy8gd2hlbiBhIHRvZG8gaXMgYWRkZWQsIG1ha2Ugc3VyZSB0aGF0IHRoZSBzdGF0dXMgYmFyIGlzIHVwZGF0ZWRcbiAgICByZW5kZXJOdW1iZXJPZlRvZG9zKG1vZGVsKTtcbiAgfSk7XG59KShpbml0KTtcblxuLy8gREVMRVRFIFRPRE9TXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICB1bC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgZGVsZXRlSWNvbkltYWdlID0gZS50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICBjb25zdCBidXR0b24gPSBkZWxldGVJY29uSW1hZ2UucGFyZW50RWxlbWVudCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGNvbnN0IGxpc3RJdGVtID0gYnV0dG9uLnBhcmVudEVsZW1lbnQgYXMgSFRNTExJRWxlbWVudDtcblxuICAgIGNvbnN0IHRvZG9JZCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzRGVsZXRlT3JVcGRhdGVCdG4gPSBjaGVja1R5cGVPZkJ1dHRvbihidXR0b24pO1xuXG4gICAgaWYgKGlzRGVsZXRlT3JVcGRhdGVCdG4gPT09ICdkZWxldGUtYnRuJykge1xuICAgICAgY29uc3QgdG9kb1RoYXRTaG91bGRCZURlbGV0ZWQgPSBmaW5kVG9kbyh0b2RvSWQsIG1vZGVsKTtcbiAgICAgIGRlbGV0ZVRvZG8odG9kb1RoYXRTaG91bGRCZURlbGV0ZWQuaWQsIG1vZGVsLCBsaXN0SXRlbSk7XG4gICAgICB1cGRhdGUoJ1JlbW92ZVRvZG8nLCBtb2RlbCwgdG9kb1RoYXRTaG91bGRCZURlbGV0ZWQpO1xuICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcblxuICAgICAgLy8gd2hlbiBhIHRvZG8gaXMgZGVsZXRlZCwgbWFrZSBzdXJlIHRoYXQgdGhlIHN0YXR1cyBiYXIgaXMgdXBkYXRlZFxuICAgICAgcmVuZGVyTnVtYmVyT2ZUb2Rvcyhtb2RlbCk7XG4gICAgfVxuICB9KTtcbn0pKGluaXQpO1xuXG4vLyBVUERBVEUgVE9ET1NcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MUGFyYWdyYXBoRWxlbWVudCkge1xuICAgICAgY29uc3QgdGV4dCA9IHRhcmdldC50ZXh0Q29udGVudCAhPT0gbnVsbCA/IHRhcmdldC50ZXh0Q29udGVudCA6ICcnO1xuICAgICAgY29uc3QgbGlzdEl0ZW0gPSB0YXJnZXQucGFyZW50RWxlbWVudCBhcyBIVE1MTElFbGVtZW50O1xuICAgICAgY29uc3QgbGlzdEl0ZW1JRCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICAgICAgLy8gc3RyaXAgb3V0IHdoaXRlIHNwYWNlcyBzbyB0aGF0IHVzZXJzIGNhbid0IHVwZGF0ZSBhIHRvZG8gdG8gYW4gZW1wdHkgbGluZVxuICAgICAgY29uc3QgdGV4dFBhdHRlcm4gPSB0ZXh0LnJlcGxhY2UoLyAvZywgJycpLnRyaW0oKTtcblxuICAgICAgLy8gSWYgd2hpdGUgc3BhY2Ugb3IgbmV3IGxpbmUgY2hhcmFjdGVycyBhcmUgdGhlIG9ubHkgdGhpbmdzIHN1Ym1pdHRlZCwgdGhlIHRvZG8gd2lsbCBiZSB0dXJuZWQgYmFjayB0byB0aGUgcHJldmlvdXMgb25lXG4gICAgICBpZiAobGlzdEl0ZW1JRCAhPT0gdW5kZWZpbmVkICYmIHRleHRQYXR0ZXJuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zdCB1cGRhdGVkVG9kbzogVG9kbyA9IHtcbiAgICAgICAgICBpZDogbGlzdEl0ZW1JRCxcbiAgICAgICAgICB2YWx1ZTogdGV4dCxcbiAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB1cGRhdGUoJ1VwZGF0ZVRvZG8nLCBtb2RlbCwgdXBkYXRlZFRvZG8pO1xuICAgICAgICBzYXZlVG9Mb2NhbFN0b3JhZ2UobW9kZWwuQWxsVG9kb3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUb2RvID0gZmluZFRvZG8obGlzdEl0ZW1JRCwgbW9kZWwpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1RleHQgPSBwcmV2aW91c1RvZG8udmFsdWU7XG4gICAgICAgIHRhcmdldC50ZXh0Q29udGVudCA9IHByZXZpb3VzVGV4dDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vIENPTVBMRVRFIFRPRE9cbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIC8vIE9wdGlvbnMgZm9yIHRoZSBvYnNlcnZlciAod2hpY2ggbXV0YXRpb25zIHRvIG9ic2VydmUpXG4gIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07XG5cbiAgLy8gQ3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGxpbmtlZCB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25MaXN0KSA9PiB7XG4gICAgY29tcGxldGVUb2RvKG11dGF0aW9uTGlzdCwgbW9kZWwpO1xuICB9KTtcblxuICAvLyBTdGFydCBvYnNlcnZpbmcgdGhlIHRhcmdldCBub2RlIGZvciBjb25maWd1cmVkIG11dGF0aW9uc1xuICBvYnNlcnZlci5vYnNlcnZlKHVsLCBjb25maWcpO1xuXG4gIC8vIGFkZCBhIG11dGF0aW9uIHNvIHRoYXQgdGhlIG11dGF0aW9uT2JzZXJ2ZXIgY29kZSB3aWxsIGF1dG9tYXRpY2FsbHkga2ljayBpblxuICBjb25zdCBuZXdMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykgYXMgSFRNTExJRWxlbWVudDtcbiAgbmV3TGkuZGF0YXNldC5pZCA9ICcwMDAnO1xuICBjb25zdCBzaG91bGREZWxldGUgPSBuZXdMaTtcbiAgdWwuYXBwZW5kKG5ld0xpKTtcbiAgaWYgKHNob3VsZERlbGV0ZS5kYXRhc2V0LmlkID09PSAnMDAwJykge1xuICAgIHNob3VsZERlbGV0ZS5yZW1vdmUoKTtcbiAgfVxufSkoaW5pdCk7XG5cbi8vIFJFTU9WRSBTVEFUVVMgQkFSIEFORCBURVhULVdSQVBQRVIgV0hFTiBUSEVSRSdSRSBOTyBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHt9KShpbml0KTtcblxuLy8gVE9HR0xFIFRIRU1FXG4oKG1vZGVsOiBNb2RlbCkgPT4ge30pKGluaXQpO1xuXG4vLyBGSUxURVIgVEFTS1NcbigobW9kZWw6IE1vZGVsKSA9PiB7fSkoaW5pdCk7XG5cbi8vIERJU1BMQVkgTlVNQkVSIE9GIFVOLUNPTVBMRVRFRCBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgLy8gT3B0aW9ucyBmb3IgdGhlIG9ic2VydmVyICh3aGljaCBtdXRhdGlvbnMgdG8gb2JzZXJ2ZSlcbiAgY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTtcblxuICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgbGlua2VkIHRvIHRoZSBjYWxsYmFjayBmdW5jdGlvblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbkxpc3QpID0+IHtcbiAgICB1cGRhdGVTdGF0dXNCYXIobXV0YXRpb25MaXN0LCBtb2RlbCk7XG4gIH0pO1xuXG4gIC8vIFN0YXJ0IG9ic2VydmluZyB0aGUgdGFyZ2V0IG5vZGUgZm9yIGNvbmZpZ3VyZWQgbXV0YXRpb25zXG4gIG9ic2VydmVyLm9ic2VydmUodWwsIGNvbmZpZyk7XG59KShpbml0KTtcblxuLy8gQ0xFQVIgQUxMIENPTVBMRVRFRCBUQVNLU1xuKChtb2RlbDogTW9kZWwpID0+IHt9KShpbml0KTtcblxuLy8gRFJBRyBBTkQgRFJPUCBUQVNLU1xuKChtb2RlbDogTW9kZWwpID0+IHt9KShpbml0KTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZJRVcgRlVOQ1RJT05TXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBEaXNwbGF5cyBhbGwgdGhlIHRvZG9zIGZyb20gdGhlIGdsb2JhbCBzdGF0ZSB1bnRvIHRoZSBwYWdlXG4gKiBAcGFyYW0gdG9kb3MgLSBUaGUgZ2xvYmFsIHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvZG9zKHRvZG9zOiBUb2RvW10pIHtcbiAgdWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgbGV0IHRlbXBTdG9yYWdlOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHRvZG8gb2YgdG9kb3MpIHtcbiAgICBjb25zdCBkZXRlcm1pbmVFbGVtZW50ID0gdG9kby5jb21wbGV0ZWQgPyAnZGVsJyA6ICdwJztcblxuICAgIHRlbXBTdG9yYWdlLnB1c2goXG4gICAgICBjcmVhdGVMaXN0SXRlbShcbiAgICAgICAgdG9kby5pZCxcbiAgICAgICAgdG9kby52YWx1ZS50cmltKCksXG4gICAgICAgIHRvZG8uY29tcGxldGVkLFxuICAgICAgICBkZXRlcm1pbmVFbGVtZW50XG4gICAgICApXG4gICAgKTtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9XG4gIHVsLmlubmVySFRNTCA9IHRlbXBTdG9yYWdlLmpvaW4oJycpO1xufVxuXG4vKipcbiAqIE11dGF0ZXMgYSB0b2RvIHNvIHRoYXQgaXRzIGNvbXBsZXRlZCBkYXRhIGF0dHJpYnV0ZSBpcyB0b2dnbGVkXG4gKiBAcGFyYW0gbGlzdEl0ZW0gLSBBIGxpc3QgaXRlbSBjdXJyZW50bHkgYXBwZW5kZWQgdG8gdGhlIERPTVxuICogQHBhcmFtIHZhbHVlIC0gV2hhdCB0aGUgY29tcGxldGVkIGRhdGEgYXR0cmlidXRlIHNob3VsZCBiZSBzZXQgdG9cbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ29tcGxldGVBdHRyaWJ1dGUobGlzdEl0ZW06IEhUTUxMSUVsZW1lbnQsIHZhbHVlOiBib29sZWFuKSB7XG4gIGNvbnN0IGlzQ29tcGxldGVkID0gdmFsdWU7XG5cbiAgbGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPSBpc0NvbXBsZXRlZC50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBUb2RvIDxsaT4gZnJvbSB0aGUgRE9NXG4gKiBAcGFyYW0gaWQgLSBBIHVuaXF1ZSBpZCBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9mIHR5cGUgVG9kb1xuICogQHBhcmFtIG1vZGVsIC0gVGhlIGdsb2JhbCBzdGF0ZVxuICogQHBhcmFtIGxpc3RFbGVtZW50IC0gQSBsaXN0IGVsZW1lbnQgdG8gYmUgcmVtb3ZlZFxuICogQHJldHVybnMge1RvZG99IFRoZSBkZWxldGVkIFRvZG8gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZVRvZG8oXG4gIGlkOiBzdHJpbmcsXG4gIG1vZGVsOiBNb2RlbCxcbiAgbGlzdEVsZW1lbnQ6IEhUTUxMSUVsZW1lbnRcbik6IFRvZG8ge1xuICBjb25zdCB0b2RvID0gZmluZFRvZG8oaWQsIG1vZGVsKTtcbiAgbGlzdEVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgcmV0dXJuIHRvZG87XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgZ2xvYmFsIHN0YXRlLCB0b2dnbGVzIHRoZSBjb21wbGV0ZWQgZGF0YSBhdHRyaWJ1dGUgb24gYSBsaXN0IGl0ZW0gYW5kIHJlcGxhY2VzIHRoZSBwIGVsZW1lbnQgd2l0aCBhIGRlbCBlbGVtZW50IGlmIG5lZWRlZFxuICogQHBhcmFtIGUgLSBBIGNsaWNrIGV2ZW50XG4gKiBAcGFyYW0gbW9kZWwgLSBUaGUgZ2xvYmFsIHN0YXRlXG4gKiBAcGFyYW0gZWwgLVxuICovXG5mdW5jdGlvbiBoYW5kbGVDb21wbGV0ZWRDbGljayhlOiBFdmVudCwgbW9kZWw6IE1vZGVsLCBlbCA9IHt9KSB7XG4gIGNvbnN0IGNvbXBsZXRlQnRuID0gZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gIGNvbnN0IGxpc3RJdGVtID0gY29tcGxldGVCdG4ucGFyZW50RWxlbWVudCBhcyBIVE1MTElFbGVtZW50O1xuICBjb25zdCBpZCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQ7XG5cbiAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBjdXJyZW50VG9kbyA9IGZpbmRUb2RvKGlkLCBtb2RlbCk7XG4gICAgY3VycmVudFRvZG8uY29tcGxldGVkID0gIWN1cnJlbnRUb2RvLmNvbXBsZXRlZDtcblxuICAgIC8vIGNvbnN0IGRldGVybWluZUVsZW1lbnQgPSBjdXJyZW50VG9kby5jb21wbGV0ZWQgPyAnZGVsJyA6ICdwJztcblxuICAgIC8vIGNvbnN0IGNvbXBsZXRlZFRvZG8gPSBjcmVhdGVMaXN0SXRlbShcbiAgICAvLyAgIGlkLFxuICAgIC8vICAgY3VycmVudFRvZG8udmFsdWUsXG4gICAgLy8gICBjdXJyZW50VG9kby5jb21wbGV0ZWQsXG4gICAgLy8gICBkZXRlcm1pbmVFbGVtZW50XG4gICAgLy8gKTtcblxuICAgIHVwZGF0ZSgnQ29tcGxldGVUb2RvJywgbW9kZWwsIGN1cnJlbnRUb2RvKTtcblxuICAgIHRvZ2dsZUNvbXBsZXRlQXR0cmlidXRlKGxpc3RJdGVtLCBjdXJyZW50VG9kby5jb21wbGV0ZWQpO1xuICB9XG59XG5cbi8qKlxuICogQ2hhbmdlcyB0aGUgbnVtYmVyIG9mIHRvZG9zIGluIHRoZSBkaXNwbGF5IGJhcihzKVxuICogQHBhcmFtIG1vZGVsIFRoZSBjdXJyZW50IHN0YXRlIHdoaWNoIHNob3VsZCBrbm93IHdoaWNoIHRvZG9zIGFyZSBjdXJyZW50bHkgY29tcGxldGVkXG4gKi9cbmZ1bmN0aW9uIHJlbmRlck51bWJlck9mVG9kb3MobW9kZWw6IE1vZGVsKSB7XG4gIGNvbnN0IHRvZG9zTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgJy5pdGVtcy1sZWZ0IHAnXG4gICkgYXMgTm9kZUxpc3RPZjxIVE1MUGFyYWdyYXBoRWxlbWVudD47XG5cbiAgY29uc3QgdW5Db21wbGV0ZWRUb2RvcyA9IG1vZGVsLkFsbFRvZG9zLmZpbHRlcigodG9kbykgPT4gIXRvZG8uY29tcGxldGVkKTtcblxuICB0b2Rvc0xlZnQuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgIGlmICh1bkNvbXBsZXRlZFRvZG9zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdG9kby50ZXh0Q29udGVudCA9IGAke3VuQ29tcGxldGVkVG9kb3MubGVuZ3RofSBpdGVtIGxlZnRgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2RvLnRleHRDb250ZW50ID0gYCR7dW5Db21wbGV0ZWRUb2Rvcy5sZW5ndGh9IGl0ZW1zIGxlZnRgO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRUxQRVIgRlVOQ1RJT05TXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3QgaXRlbVxuICogQHBhcmFtIGlkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGUgbGlzdCBpdGVtIHRvZG9cbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGFjdHVhbCB0b2RvIGl0c2VsZlxuICogQHBhcmFtIGVsIC0gUmVwcmVzZW50cyBhbiBIdG1sIGVsZW1lbnQsIGlucyBhbmQgZGVsIGFyZSBzZW1hbnRpY2FsbHkgY29ycmVjdCBidXQgYSBwIHRhZyBjYW4gYmUgdXNlZCBhcyB3ZWxsXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gUmVmbGVjdHMgd2hldGhlciB0aGUgY29tcGxldGUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWQgb3Igbm90XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgaW5uZXIgSFRNTCBvZiB0aGUgPGxpPiBpbmNsdWRpbmcgdGhlIGxpIGl0c2VsZlxuICovXG5mdW5jdGlvbiBjcmVhdGVMaXN0SXRlbShcbiAgaWQ6IHN0cmluZyxcbiAgdGV4dDogc3RyaW5nLFxuICBjb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZWw6IGFsbG93ZWRFbGVtZW50cyA9ICdwJ1xuKTogc3RyaW5nIHtcbiAgY29uc3QgbGlzdEl0ZW0gPSBgXG4gICAgICAgIDxsaSBjbGFzcz1cImxpc3QtaXRlbVwiIGRhdGEtaWQ9JHtpZH0gZGF0YS1jb21wbGV0ZWQ9XCIke2NvbXBsZXRlZH1cIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29tcGxldGUtYnRuXCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIi9zcmMvYXNzZXRzL2ltYWdlcy9pY29uLWNoZWNrLnN2Z1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGFsdD1cIlwiIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPCR7ZWx9IGNsYXNzPVwibGlzdC1pdGVtLXRleHRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHt0ZXh0fTwvJHtlbH0+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZS1idG4gdG9kby1kZWxldGUtaWNvblwiPlxuICAgICAgICAgICAgPGltZyBjbGFzcz1cImRcIiBzcmM9XCIvc3JjL2Fzc2V0cy9pbWFnZXMvaWNvbi1jcm9zcy5zdmdcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2xpPlxuICAgIGA7XG5cbiAgcmV0dXJuIGxpc3RJdGVtO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0cmluZyBpcyBlbXB0eS4gV2lsbCB0cmltIHRoZSB0aGUgbWlkZGxlIG9mIHRoZSBzdHJpbmdcbiAqIEBwYXJhbSBzdHIgLSBBIHN0cmluZyB0aGF0IHdpbGwgYmUgY2hlY2tlZFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgc3RyaW5nIGlzIGVtcHR5LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gQ2hlY2tJZkVtcHR5U3RyaW5nKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBzdHIudHJpbSgpID09PSAnJztcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB1bmlxdWUgaWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgdW5pcXVlIElEXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IG9mIHR5cGUgVG9kb1xuICogQHBhcmFtIHZhbHVlIC0gQSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHRoZSBhY3R1YWwgdG9kbyBpdHNlbGZcbiAqIEByZXR1cm5zIHtUb2RvfSBBIHRvZG8gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRvZG9PYmplY3QodmFsdWU6IHN0cmluZyk6IFRvZG8ge1xuICByZXR1cm4ge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2tzIGZvciB0aGUgdHlwZSBvZiBidXR0b24gYmVpbmcgcGFzc2VkIGluXG4gKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBidXR0b24gdGhhdCB3YXMgY2xpY2tlZCBvblxuICogQHJldHVybnMge3ZhbGlkQnV0dG9ufSBBIG1lc3NhZ2Ugc3RhdGluZyB0aGUgdHlwZSBvZiBidXR0b24gdGhhdCB3YXMgY2xpY2tlZCBvblxuICogQHRocm93cyB7bmV3IEVycm9yfSBBIHN0cmluZyBlcnJvciBidWlsdCB3aXRoIHRoZSBFcnJvciBjb25zdHJ1Y3RvclxuICogQGV4YW1wbGUgY2hlY2tUeXBlT2ZCdXR0b24oZGVsZXRlQnRuKSAtPiAnZGVsZXRlLWJ0bidcbiAqL1xuZnVuY3Rpb24gY2hlY2tUeXBlT2ZCdXR0b24oZWxlbWVudDogSFRNTEJ1dHRvbkVsZW1lbnQpOiB2YWxpZEJ1dHRvbiB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndG9kby1kZWxldGUtaWNvbicpKSB7XG4gICAgcmV0dXJuICdkZWxldGUtYnRuJztcbiAgfSBlbHNlIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGUtYnRuJykpIHtcbiAgICByZXR1cm4gJ2NvbXBsZXRlLWJ0bic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdub3QtYS1idXR0b24nO1xuICB9XG59XG5cbi8qKlxuICogRmluZHMgYSBzcGVjaWZpYyBUb2RvIGJhc2VkIG9uIGFuIElEXG4gKiBAcGFyYW0gaWQgLSBBIHVuaXF1ZSBJRCBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9mIHR5cGUgVG9kb1xuICogQHBhcmFtIG1vZGVsIC0gVGhlIGdsb2JhbCBzdGF0ZVxuICogQHJldHVybnMge1RvZG99IFRoZSBUb2RvIHdoaWNoIG1hdGNoZXMgdGhlIGlkIHBhc3NlZCBpblxuICovXG5mdW5jdGlvbiBmaW5kVG9kbyhpZDogc3RyaW5nLCBtb2RlbDogTW9kZWwpOiBUb2RvIHtcbiAgY29uc3QgbWF0Y2hpbmdUb2RvID0gbW9kZWwuQWxsVG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB0b2RvLmlkID09PSBpZCk7XG5cbiAgcmV0dXJuIG1hdGNoaW5nVG9kb1swXTtcbn1cblxuLyoqXG4gKiBTYXZlcyB1c2VycyB0b2RvcyB0byBsb2NhbCBzdG9yYWdlXG4gKiBAcGFyYW0gdG9kb3MgLSBUaGUgZ2xvYmFsIHN0YXRlIHRoYXQgc2hvdWxkIGJlIHNhdmVkIHRvIGxvY2FsIHN0b3JhZ2VcbiAqL1xuZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKHRvZG9zOiBUb2RvW10pIHtcbiAgY29uc3QgdG9kb1RvSnNvbiA9IEpTT04uc3RyaW5naWZ5KHRvZG9zKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgdG9kb1RvSnNvbik7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIGEgSlNPTiBzdHJpbmcgZnJvbSBsb2NhbFN0b3JhZ2VcbiAqIEBwYXJhbSBpdGVtTmFtZSAtIFRoZSBrZXkgaW4gdGhlIGtleTp2YWx1ZSBwYWlyIG9mIGxvY2FsU3RvcmFnZVxuICogQHJldHVybnMge3N0cmluZ30gRWl0aGVyIGEgc3RyaW5nIG9mIHRoZSB1c2VycyB0b2RvcyBvciBhbiBlbXB0eSBhcnJheVxuICovXG5mdW5jdGlvbiBnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UoaXRlbU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpdGVtTmFtZSk7XG4gIHJldHVybiBzdG9yYWdlICE9PSBudWxsID8gc3RvcmFnZSA6ICdbXSc7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSB1c2VycyB0b2RvJ3NcbiAqIEBwYXJhbSBpdGVtIC0gUGFyc2VzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7VG9kb1tdfSBBbiBhcnJheSBvZiBvYmplY3RzIG9mIHR5cGUgVG9kb1xuICovXG5mdW5jdGlvbiBwYXJzZVRvZG9zKGl0ZW06IHN0cmluZyk6IFRvZG9bXSB7XG4gIHJldHVybiBKU09OLnBhcnNlKGl0ZW0pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXdUb2RvIG91dCBvZiB0aGUgZXhhbXBsZSB0b2RvXG4gKiBAcGFyYW0gdGVtcGxhdGUgLSBUaGUgdGVtcGxhdGUgdG8gY2xvbmUgYW5kIHR1cm4gaW50byBhIG5ld1RvZG8gb2JqZWN0XG4gKiBAcmV0dXJucyBUaGUgZXhhbXBsZSBUb2RvXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckxpc3RJdGVtTm9kZSh0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCk6IFRvZG8ge1xuICBjb25zdCBkb2NGcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudCA9IHRlbXBsYXRlLmNvbnRlbnQ7XG4gIGNvbnN0IGxpc3RJdGVtQ2xvbmUgPSBkb2NGcmFnbWVudC5maXJzdEVsZW1lbnRDaGlsZD8uY2xvbmVOb2RlKFxuICAgIHRydWVcbiAgKSBhcyBIVE1MTElFbGVtZW50O1xuXG4gIGNvbnN0IGlkID0gbGlzdEl0ZW1DbG9uZS5kYXRhc2V0LmlkIGFzIHN0cmluZztcbiAgY29uc3QgcEVsID0gbGlzdEl0ZW1DbG9uZS5jaGlsZE5vZGVzWzNdO1xuICBjb25zdCB0ZXh0ID0gcEVsLnRleHRDb250ZW50Py50cmltKCkgYXMgc3RyaW5nO1xuXG4gIGNvbnN0IG5ld1RvZG86IFRvZG8gPSB7XG4gICAgaWQ6IGlkLFxuICAgIHZhbHVlOiB0ZXh0LFxuICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gIH07XG5cbiAgcmV0dXJuIG5ld1RvZG87XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIDxwPiBlbGVtZW50XG4gKiBAcGFyYW0gdGV4dCAtIFRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIEEgcGFyYWdyYXBoIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSB0aGUgdG9kbyBpdHNlbGYuIEl0IGNhbiBiZSBlZGl0ZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGFyYWdyYXBoRWxlbWVudCh0ZXh0OiBzdHJpbmcpOiBIVE1MUGFyYWdyYXBoRWxlbWVudCB7XG4gIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHAudGV4dENvbnRlbnQgPSB0ZXh0O1xuICBwLmNsYXNzTmFtZSA9ICdsaXN0LWl0ZW0tdGV4dCc7XG4gIHAuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCAndHJ1ZScpO1xuXG4gIHJldHVybiBwO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSA8ZGVsPiBlbGVtZW50XG4gKiBAcGFyYW0gdGV4dCAtIFRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIEEgZGVsIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSB0aGUgdG9kbyBpdHNlbGYuIEl0IGNhbm5vdCBiZSBlZGl0ZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGVsRWxlbWVudCh0ZXh0OiBzdHJpbmcpOiBIVE1MTW9kRWxlbWVudCB7XG4gIGNvbnN0IGRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RlbCcpO1xuICBkZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICBkZWwuY2xhc3NOYW1lID0gJ2xpc3QtaXRlbS10ZXh0JztcblxuICByZXR1cm4gZGVsO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNVVRBVElPTiBPQlNFUlZFUlNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gY29tcGxldGVUb2RvKG11dGF0aW9uTGlzdDogTXV0YXRpb25SZWNvcmRbXSwgbW9kZWw6IE1vZGVsKSB7XG4gIC8vIGNoZWNrIHRoZSB0eXBlIG9mIG11dGF0aW9uXG4gIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25MaXN0KSB7XG4gICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAvLyBjaGVjayB0byBzZWUgaWYgYW55IG11dGF0aW9uIGhhcyBvY2N1cnJlZFxuICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGFsbENvbXBsZXRlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idG4nKTtcblxuICAgICAgICBhbGxDb21wbGV0ZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgLy8gcmVtb3ZlIGFueSBwcmV2aW91cyBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIGFkZGluZyBhbnltb3JlIGluIG9yZGVyIHRvIGF2b2lkIGFueSBzdHJhbmdlIGJlaGF2aW9yXG4gICAgICAgICAgYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge30pO1xuXG4gICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBsaXN0SXRlbSwgaXRzIGZpcnN0IGNoaWxkIHdoaWNoIHdpbGwgZWl0aGVyIGJ5IGEgcCB0YWcgb3IgYSBkZWwgdGFnIGFuZCBpdHMgdGV4dCBjb250ZW50XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50IGFzIEhUTUxMSUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBwT3JEZWwgPSBsaXN0SXRlbS5jaGlsZHJlblsxXTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9UZXh0ID0gcE9yRGVsLnRleHRDb250ZW50IGFzIHN0cmluZztcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGVsZW1lbnQgdGhhdCB3aWxsIGJlIGluc2VydGVkIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB0b2RvIGlzIGNvbXBsZXRlZCBvciBub3RcbiAgICAgICAgICAgIGNvbnN0IGRlbCA9IGNyZWF0ZURlbEVsZW1lbnQodG9kb1RleHQpO1xuICAgICAgICAgICAgY29uc3QgcCA9IGNyZWF0ZVBhcmFncmFwaEVsZW1lbnQodG9kb1RleHQpO1xuXG4gICAgICAgICAgICBpZiAocE9yRGVsIGluc3RhbmNlb2YgSFRNTFBhcmFncmFwaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgbGlzdEl0ZW0ucmVwbGFjZUNoaWxkKGRlbCwgcE9yRGVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpc3RJdGVtLnJlcGxhY2VDaGlsZChwLCBwT3JEZWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGNvbXBsZXRlZCBzdGF0dXMgb2YgdGhlIHRvZG9cbiAgICAgICAgICAgIGlmIChsaXN0SXRlbS5kYXRhc2V0LmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRvZG8gPSBmaW5kVG9kbyhsaXN0SXRlbS5kYXRhc2V0LmlkLCBtb2RlbCk7XG4gICAgICAgICAgICAgIGNvbnN0IG9wcG9zaXRlID0gIWN1cnJlbnRUb2RvLmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgbGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPSBTdHJpbmcob3Bwb3NpdGUpO1xuXG4gICAgICAgICAgICAgIHVwZGF0ZSgnQ29tcGxldGVUb2RvJywgbW9kZWwsIGN1cnJlbnRUb2RvKTtcbiAgICAgICAgICAgICAgc2F2ZVRvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVN0YXR1c0JhcihtdXRhdGlvbkxpc3Q6IE11dGF0aW9uUmVjb3JkW10sIG1vZGVsOiBNb2RlbCkge1xuICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9uTGlzdCkge1xuICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xuICAgICAgaWYgKFxuICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzWzBdIGluc3RhbmNlb2YgSFRNTE1vZEVsZW1lbnQgfHxcbiAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlc1swXSBpbnN0YW5jZW9mIEhUTUxQYXJhZ3JhcGhFbGVtZW50XG4gICAgICApIHtcbiAgICAgICAgcmVuZGVyTnVtYmVyT2ZUb2Rvcyhtb2RlbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0="}