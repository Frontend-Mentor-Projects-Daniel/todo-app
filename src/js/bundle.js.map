{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// ------------------------------------------------------------------------------\n//                                 DOM NODES\n//-------------------------------------------------------------------------------\nconst todos = document.querySelectorAll(\n  '.todo-list-item'\n) as NodeListOf<HTMLLIElement>;\nconst form = document.querySelector('.create-bar-form') as HTMLFormElement;\nconst input = document.querySelector('.create-bar') as HTMLInputElement;\nconst ul = document.querySelector('.list') as HTMLUListElement;\nconst template = document.querySelector(\n  '#example-list-item'\n) as HTMLTemplateElement;\nconst themeToggler = document.querySelector(\n  '.theme-toggler'\n) as HTMLButtonElement;\nconst body = document.body as HTMLBodyElement;\n\n// ------------------------------------------------------------------------------\n//                                 TYPES\n//-------------------------------------------------------------------------------\ntype Todo = {\n  id: string;\n  value: string;\n  completed: boolean;\n};\n\ntype validButton = 'delete-btn' | 'complete-btn' | 'not-a-button';\n\ntype allowedElements = 'p' | 'del';\n\ntype CurrentTheme = {\n  theme: string;\n  image: string;\n};\n\n// ------------------------------------------------------------------------------\n//                                 MODEL\n//-------------------------------------------------------------------------------\ntype Model = {\n  AllTodos: Todo[];\n};\n\n// ------------------------------------------------------------------------------\n//                               GLOBAL STATE\n//-------------------------------------------------------------------------------\nconst init: Model = {\n  AllTodos: [],\n};\n\n// ------------------------------------------------------------------------------\n//                             UPDATE FUNCTION\n//-------------------------------------------------------------------------------\ntype Msg =\n  | 'AddTodo'\n  | 'RemoveTodo'\n  | 'UpdateTodo'\n  | 'CompleteTodo'\n  | 'RearrangeOrder';\n\n/**\n * For updating the global state, it should only update the global state and it should be the only thing which can update it\n * @param msg A message that will indicate what should be done to the global state\n * @param model The global state\n * @param value The Todo in which something should be done to\n * @param extra Anything else that may need to be added, usually for bonus functionality\n */\nfunction update(msg: Msg, model: Model, value: Todo): void {\n  switch (msg) {\n    case 'AddTodo':\n      model.AllTodos.push(value);\n      break;\n\n    case 'RemoveTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos.splice(index, 1);\n        }\n      });\n      break;\n\n    case 'UpdateTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].value = value.value;\n        }\n      });\n      break;\n\n    case 'CompleteTodo':\n      model.AllTodos.forEach((todo) => {\n        if (todo.id === value.id) {\n          const index = model.AllTodos.indexOf(todo);\n          model.AllTodos[index].completed = !value.completed;\n        }\n      });\n      break;\n\n    case 'RearrangeOrder':\n      const allListItems = document.querySelectorAll(\n        '.list-item'\n      ) as NodeListOf<HTMLLIElement>;\n\n      model.AllTodos = [];\n\n      allListItems.forEach((listItem) => {\n        const isCompleted = convertStringToBool(\n          listItem.dataset.completed as string\n        );\n        const newTodo: Todo = {\n          id: listItem.dataset.id as string,\n          value: listItem.children[1].textContent as string,\n          completed: isCompleted,\n        };\n\n        model.AllTodos.push(newTodo);\n      });\n\n      break;\n  }\n}\n\n// ------------------------------------------------------------------------------\n//                                   SCRIPTS\n//-------------------------------------------------------------------------------\n\n// GET SAVED DATA FROM LOCAL STORAGE AND DISPLAY THEM\n((model: Model) => {\n  const getStoredTodos: string = getItemsFromLocalStorage('todos');\n  const parseStoredTodos: Todo[] = parseTodos(getStoredTodos);\n\n  // if there're no previous todo's, create example todo else update the state to contain all the stored todos\n  if (parseStoredTodos.length === 0) {\n    const newTodo = renderListItemNode(template);\n    update('AddTodo', model, newTodo);\n  } else {\n    for (const todo of parseStoredTodos) {\n      update('AddTodo', model, todo);\n    }\n  }\n\n  renderTodos(model.AllTodos);\n\n  // display last used theme\n  const lastActiveTheme = JSON.parse(getItemsFromLocalStorage('theme'));\n  // getItemsFromLocalStorage returns an empty array if the key isn't found\n  if (lastActiveTheme.length !== 0) {\n    toggleTheme(lastActiveTheme);\n  }\n\n  // update status bar to display the number of todos\n  renderNumberOfTodos(model);\n})(init);\n\n// CREATE NEW TODOS\n((model: Model) => {\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const getUserInput = input.value.trim();\n    const isUserInputEmpty = CheckIfEmptyString(getUserInput);\n    const createNewTodo = createTodoObject(getUserInput);\n\n    if (!isUserInputEmpty) {\n      update('AddTodo', model, createNewTodo);\n      saveTodosToLocalStorage(model.AllTodos);\n    }\n\n    renderTodos(model.AllTodos);\n\n    // when a todo is added, make sure that the status bar is updated\n    renderNumberOfTodos(model);\n  });\n})(init);\n\n// DELETE TODOS\n((model: Model) => {\n  ul.addEventListener('click', (e) => {\n    const deleteIconImage = e.target as HTMLImageElement;\n    const button = deleteIconImage.parentElement as HTMLButtonElement;\n\n    const listItem = button.parentElement as HTMLLIElement;\n\n    const todoId = listItem.dataset.id as string;\n    const isDeleteOrUpdateBtn = checkTypeOfButton(button);\n\n    if (isDeleteOrUpdateBtn === 'delete-btn') {\n      const todoThatShouldBeDeleted = findTodo(todoId, model);\n      deleteTodo(todoThatShouldBeDeleted.id, model, listItem);\n      update('RemoveTodo', model, todoThatShouldBeDeleted);\n      saveTodosToLocalStorage(model.AllTodos);\n\n      // when a todo is deleted, make sure that the status bar is updated\n      renderNumberOfTodos(model);\n    }\n  });\n})(init);\n\n// UPDATE TODOS\n((model: Model) => {\n  ul.addEventListener('focusout', (e) => {\n    const target = e.target;\n\n    if (target instanceof HTMLParagraphElement) {\n      const text = target.textContent !== null ? target.textContent : '';\n      const listItem = target.parentElement as HTMLLIElement;\n      const listItemID = listItem.dataset.id as string;\n      // strip out white spaces so that users can't update a todo to an empty line\n      const textPattern = text.replace(/ /g, '').trim();\n\n      // If white space or new line characters are the only things submitted, the todo will be turned back to the previous one\n      if (listItemID !== undefined && textPattern.length !== 0) {\n        const updatedTodo: Todo = {\n          id: listItemID,\n          value: text,\n          completed: false,\n        };\n        update('UpdateTodo', model, updatedTodo);\n        saveTodosToLocalStorage(model.AllTodos);\n      } else {\n        const previousTodo = findTodo(listItemID, model);\n        const previousText = previousTodo.value;\n        target.textContent = previousText;\n      }\n    }\n  });\n})(init);\n\n// COMPLETE TODO\n((model: Model) => {\n  // Options for the observer (which mutations to observe)\n  const config = { childList: true };\n\n  // Create an observer instance linked to the callback function\n  const observer = new MutationObserver((mutationList) => {\n    mutateCompletedTodos(mutationList, model);\n  });\n\n  // Start observing the target node for configured mutations\n  observer.observe(ul, config);\n\n  // add a mutation so that the mutationObserver code will automatically kick in\n  const newLi = document.createElement('li') as HTMLLIElement;\n  newLi.dataset.id = '000';\n  const shouldDelete = newLi;\n  ul.append(newLi);\n  if (shouldDelete.dataset.id === '000') {\n    shouldDelete.remove();\n  }\n})(init);\n\n// MOVE MAIN TAG WHEN THERE'RE NO TODOS\n((model: Model) => {\n  const config = { childList: true };\n\n  const observer = new MutationObserver((mutationList) => {\n    mutateStatusBar(mutationList, model);\n  });\n\n  observer.observe(ul, config);\n})(init);\n\n// TOGGLE THEME\n((model: Model) => {\n  themeToggler.addEventListener('click', (e) => {\n    toggleTheme();\n  });\n})(init);\n\n// FILTER TASKS\n((model: Model) => {\n  const tabs = document.querySelectorAll('.tabs') as NodeListOf<HTMLDivElement>;\n\n  tabs.forEach((tab) => {\n    tab.addEventListener('click', (e) => {\n      const button = e.target as HTMLButtonElement;\n\n      if (button.classList.contains('all')) {\n        renderTodos(model.AllTodos);\n        toggleAriaSelected(button);\n      }\n\n      if (button.classList.contains('active')) {\n        const completedTodos = model.AllTodos.filter((todo) => !todo.completed);\n        renderTodos(completedTodos);\n        toggleAriaSelected(button);\n      }\n\n      if (button.classList.contains('completed')) {\n        const completedTodos = model.AllTodos.filter((todo) => todo.completed);\n        renderTodos(completedTodos);\n        toggleAriaSelected(button);\n      }\n    });\n  });\n})(init);\n\n// DISPLAY NUMBER OF UN-COMPLETED TODOS\n((model: Model) => {\n  // Options for the observer (which mutations to observe)\n  const config = { childList: true, subtree: true };\n\n  // Create an observer instance linked to the callback function\n  const observer = new MutationObserver((mutationList) => {\n    mutateRemainingTodosDisplay(mutationList, model);\n  });\n\n  // Start observing the target node for configured mutations\n  observer.observe(ul, config);\n})(init);\n\n// CLEAR ALL COMPLETED TASKS\n((model: Model) => {\n  const clearButtons = document.querySelectorAll(\n    '.clear-btn'\n  ) as NodeListOf<HTMLButtonElement>;\n\n  clearButtons.forEach((button) => {\n    button.addEventListener('click', (e) => {\n      const completedListItems: HTMLLIElement[] = getCompletedListItems();\n      let counter = 0;\n\n      const completedTodos = model.AllTodos.filter((todo) => todo.completed);\n\n      completedTodos.forEach((todo) => {\n        update('RemoveTodo', model, todo);\n        saveTodosToLocalStorage(model.AllTodos);\n        deleteTodo(todo.id, model, completedListItems[counter]);\n        counter++;\n      });\n    });\n  });\n})(init);\n\n// DRAG AND DROP TASKS\n((model: Model) => {\n  ul.addEventListener('dragstart', (e) => {\n    const target = e.target as HTMLElement;\n    if (target.getAttribute('draggable') === 'true') {\n      target.classList.add('dragging');\n    }\n  });\n\n  ul.addEventListener('dragend', (e) => {\n    const target = e.target as HTMLElement;\n    if (target.getAttribute('draggable') === 'true') {\n      target.classList.remove('dragging');\n\n      turnHtmlToTodoArray(target, model);\n    }\n  });\n\n  ul.addEventListener('dragover', (e) => {\n    // dragging and appending a child to a container is disabled by default, this is to prevent that default\n    e.preventDefault();\n    const currentlyDraggedItem = document.querySelector(\n      '.dragging'\n    ) as HTMLLIElement;\n    // the element positioned right after the currently being dragged element\n    const afterElement = getDragAfterElement(ul, e.clientY);\n\n    // TODO: Bugs arise sometimes when trying to move elements to the last position\n    //todo Such bugs include, the complete button not being able to be clicked and playing around with the tabs and moving elements around will cause other elements to get deleted\n    if (afterElement == null) {\n      const delElement = currentlyDraggedItem.children[1];\n      delElement.setAttribute('contenteditable', 'false');\n      ul.appendChild(currentlyDraggedItem);\n    } else {\n      const delElement = currentlyDraggedItem.children[1];\n      delElement.setAttribute('contenteditable', 'false');\n      ul.insertBefore(currentlyDraggedItem, afterElement);\n    }\n  });\n})(init);\n\n// ------------------------------------------------------------------------------\n//                              VIEW FUNCTIONS\n//-------------------------------------------------------------------------------\n\n/**\n * Displays all the todos from the global state unto the page\n * @param todos - The global state\n */\nfunction renderTodos(todos: Todo[]) {\n  ul.innerHTML = '';\n\n  let tempStorage: string[] = [];\n  for (const todo of todos) {\n    const determineElement = todo.completed ? 'del' : 'p';\n\n    tempStorage.push(\n      createListItem(\n        todo.id,\n        todo.value.trim(),\n        todo.completed,\n        determineElement\n      )\n    );\n    input.value = '';\n  }\n  ul.innerHTML = tempStorage.join('');\n}\n\n/**\n * Mutates a todo so that its completed data attribute is toggled\n * @param listItem - A list item currently appended to the DOM\n * @param value - What the completed data attribute should be set to\n */\nfunction toggleCompleteAttribute(listItem: HTMLLIElement, value: boolean) {\n  const isCompleted = value;\n\n  listItem.dataset.completed = isCompleted.toString();\n}\n\n/**\n * Toggles the active attribute on a list item\n * @param listItem An un-completed list item\n */\nfunction toggleActiveAttribute(listItem: HTMLLIElement) {\n  if (listItem.dataset.currentlyActive === 'true') {\n    listItem.dataset.currentlyActive = 'false';\n  } else {\n    listItem.dataset.currentlyActive = 'true';\n  }\n}\n\n/**\n * Removes a Todo <li> from the DOM\n * @param id - A unique id belonging to an object of type Todo\n * @param model - The global state\n * @param listElement - A list element to be removed\n * @returns {Todo} The deleted Todo object\n */\nfunction deleteTodo(\n  id: string,\n  model: Model,\n  listElement: HTMLLIElement\n): Todo {\n  const todo = findTodo(id, model);\n  listElement.remove();\n\n  return todo;\n}\n\n/**\n * Updates the global state, toggles the completed data attribute on a list item and replaces the p element with a del element if needed\n * @param e - A click event\n * @param model - The global state\n * @param el -\n */\nfunction handleCompletedClick(e: Event, model: Model, el = {}) {\n  const completeBtn = e.currentTarget as HTMLButtonElement;\n\n  const listItem = completeBtn.parentElement as HTMLLIElement;\n  const id = listItem.dataset.id;\n\n  if (id !== undefined) {\n    const currentTodo = findTodo(id, model);\n    currentTodo.completed = !currentTodo.completed;\n\n    update('CompleteTodo', model, currentTodo);\n\n    toggleCompleteAttribute(listItem, currentTodo.completed);\n  }\n}\n\n/**\n * Changes the number of todos in the display bar(s)\n * @param model The current state which should know which todos are currently completed\n */\nfunction renderNumberOfTodos(model: Model) {\n  const todosLeft = document.querySelectorAll(\n    '.items-left p'\n  ) as NodeListOf<HTMLParagraphElement>;\n\n  const unCompletedTodos = model.AllTodos.filter((todo) => !todo.completed);\n\n  todosLeft.forEach((todo) => {\n    if (unCompletedTodos.length === 1) {\n      todo.textContent = `${unCompletedTodos.length} item left`;\n    } else {\n      todo.textContent = `${unCompletedTodos.length} items left`;\n    }\n  });\n}\n\nfunction toggleTheme(theme?: CurrentTheme) {\n  const imageIcon = themeToggler.firstElementChild as HTMLImageElement;\n  // if a current theme exists, use that\n  if (theme != null) {\n    body.id = theme.theme;\n    imageIcon.setAttribute('src', theme.image);\n    return;\n  }\n\n  let currentTheme: CurrentTheme = {\n    theme: '',\n    image: '',\n  };\n\n  if (body.id === 'light') {\n    body.id = 'dark';\n    imageIcon.setAttribute('src', '/src/assets/images/icon-sun.svg');\n    const imageSrc = imageIcon.getAttribute('src') as string;\n    currentTheme = { theme: body.id, image: imageSrc };\n    saveThemeToLocalStorage(currentTheme);\n  } else {\n    body.id = 'light';\n    imageIcon.setAttribute('src', '/src/assets/images/icon-moon.svg');\n    const imageSrc = imageIcon.getAttribute('src') as string;\n    currentTheme = { theme: body.id, image: imageSrc };\n    saveThemeToLocalStorage(currentTheme);\n  }\n}\n\n/**\n * Toggles the aria-selected attribute of a tab to either \"true\" or \"\" while resetting the value of the other tabs\n * @param tab One of the tabs, all, active or completed\n */\nfunction toggleAriaSelected(tab: HTMLButtonElement) {\n  // reset the aria-selected attribute on all the tabs\n  const allTabs = document.querySelectorAll(\n    '.tabs button'\n  ) as NodeListOf<HTMLButtonElement>;\n  allTabs.forEach((tab) => {\n    tab.setAttribute('aria-selected', 'false');\n  });\n\n  const isSelected = tab.getAttribute('aria-selected');\n  if (isSelected === null || isSelected === 'false') {\n    tab.setAttribute('aria-selected', 'true');\n  }\n}\n\n/**\n * Changes the state to match the new order of elements\n * @param target\n * @param model\n */\nfunction turnHtmlToTodoArray(target, model) {\n  const strippedTodoId = target.dataset.id as string;\n  const todo: Todo = findTodo(strippedTodoId, model);\n  const allListItems = document.querySelectorAll(\n    '.list-item'\n  ) as NodeListOf<HTMLLIElement>;\n\n  for (const [index, value] of allListItems.entries()) {\n    if (value.dataset.id === strippedTodoId) {\n      update('RearrangeOrder', model, todo);\n    }\n  }\n\n  saveTodosToLocalStorage(model.AllTodos);\n}\n\n/**\n * Changes the aria-labelledBy attribute for each list item\n * @param tabPanel - The content that should be shown depending on which tab is clicked\n * @param tab - A string that contains the id's of each tab\n */\nfunction viewChangeAriaLabelledBy(\n  tabPanel: HTMLLIElement,\n  tab: 'all' | 'active' | 'completed'\n) {\n  tabPanel.setAttribute('aria-labelledby', tab);\n}\n\n// ------------------------------------------------------------------------------\n//                                   DATABASE\n//-------------------------------------------------------------------------------\n\n/**\n * Saves users todos to local storage\n * @param todos - The global state that should be saved to local storage\n */\nfunction saveTodosToLocalStorage(todos: Todo[]) {\n  const todoToJson = JSON.stringify(todos);\n  localStorage.setItem('todos', todoToJson);\n}\n\n/**\n * Saves the value of the body's id property and the src attribute of the image icon to local storage\n * @param theme The current theme, light/dark && sun/moon-icon\n */\nfunction saveThemeToLocalStorage(theme: CurrentTheme) {\n  localStorage.setItem('theme', JSON.stringify(theme));\n}\n\n/**\n * Retrieves a JSON string from localStorage\n * @param itemName - The key in the key:value pair of localStorage\n * @returns {string} Either a string of the users todos or an empty array\n */\nfunction getItemsFromLocalStorage(itemName: string): string {\n  const storage = localStorage.getItem(itemName);\n  return storage !== null ? storage : '[]';\n}\n\n/**\n * Parses the users todo's\n * @param item - Parses a string\n * @returns {Todo[]} An array of objects of type Todo\n */\nfunction parseTodos(item: string): Todo[] {\n  return JSON.parse(item);\n}\n\n// ------------------------------------------------------------------------------\n//                              HELPER FUNCTIONS\n//-------------------------------------------------------------------------------\n/**\n * Creates a list item\n * @param id - The unique ID of the list item todo\n * @param text - The actual todo itself\n * @param el - Represents an Html element, ins and del are semantically correct but a p tag can be used as well\n * @param completed - Reflects whether the complete button has been clicked or not\n * @returns {string} The inner HTML of the <li> including the li itself\n */\nfunction createListItem(\n  id: string,\n  text: string,\n  completed: boolean = false,\n  el: allowedElements = 'p'\n): string {\n  const hasContentEditable = el === 'p' ? 'true' : 'false';\n  const labelledByActiveOrCompleted =\n    completed === true ? 'completed' : 'active';\n\n  const listItem = `\n        <li role=\"tabpanel\" aria-labelledby=${labelledByActiveOrCompleted} class=\"list-item\" data-id=${id} data-completed=\"${completed}\" draggable=\"true\">\n          <button class=\"complete-btn\">\n            <img src=\"/src/assets/images/icon-check.svg\" aria-hidden=\"true\" alt=\"\" />\n            <span class=\"sr-only\">Mark Todo as complete</span>\n          </button>\n          <${el} class=\"list-item-text\" contenteditable=${hasContentEditable}>${text}</${el}>\n          <button class=\"delete-btn todo-delete-icon\">\n            <img class=\"d\" src=\"/src/assets/images/icon-cross.svg\" alt=\"\" />\n            <span class=\"sr-only\">Delete Todo</span>\n          </button>\n        </li>\n    `;\n\n  return listItem;\n}\n\n/**\n * Checks if a string is empty. Will trim the the middle of the string\n * @param str - A string that will be checked\n * @returns {boolean} True if string is empty, false otherwise\n */\nfunction CheckIfEmptyString(str: string): boolean {\n  return str.trim() === '';\n}\n\n/**\n * Generates a unique id\n * @returns {string} A unique ID\n */\nfunction generateId(): string {\n  return Math.random().toString(36).slice(2);\n}\n\n/**\n * Creates an object of type Todo\n * @param value - A string which should be the actual todo itself\n * @returns {Todo} A todo object\n */\nfunction createTodoObject(value: string): Todo {\n  return {\n    id: generateId(),\n    value: value,\n    completed: false,\n  };\n}\n\n/**\n * Checks for the type of button being passed in\n * @param element - The button that was clicked on\n * @returns {validButton} A message stating the type of button that was clicked on\n * @throws {new Error} A string error built with the Error constructor\n * @example checkTypeOfButton(deleteBtn) -> 'delete-btn'\n */\nfunction checkTypeOfButton(element: HTMLButtonElement): validButton {\n  if (element.classList.contains('todo-delete-icon')) {\n    return 'delete-btn';\n  } else if (element.classList.contains('complete-btn')) {\n    return 'complete-btn';\n  } else {\n    return 'not-a-button';\n  }\n}\n\n/**\n * Finds a specific Todo based on an ID\n * @param id - A unique ID belonging to an object of type Todo\n * @param model - The global state\n * @returns {Todo} The Todo which matches the id passed in\n */\nfunction findTodo(id: string, model: Model): Todo {\n  const matchingTodo = model.AllTodos.filter((todo) => todo.id === id);\n\n  return matchingTodo[0];\n}\n\n/**\n * Creates a newTodo out of the example todo\n * @param template - The template to clone and turn into a newTodo object\n * @returns The example Todo\n */\nfunction renderListItemNode(template: HTMLTemplateElement): Todo {\n  const docFragment: DocumentFragment = template.content;\n  const listItemClone = docFragment.firstElementChild?.cloneNode(\n    true\n  ) as HTMLLIElement;\n\n  const id = listItemClone.dataset.id as string;\n  const pEl = listItemClone.childNodes[3];\n  const text = pEl.textContent?.trim() as string;\n\n  const newTodo: Todo = {\n    id: id,\n    value: text,\n    completed: false,\n  };\n\n  return newTodo;\n}\n\n/**\n * Creates a <p> element\n * @param text - The text content of the element\n * @returns A paragraph element which will be the todo itself. It can be edited\n */\nfunction createParagraphElement(text: string): HTMLParagraphElement {\n  const p = document.createElement('p');\n  p.textContent = text;\n  p.className = 'list-item-text';\n  p.setAttribute('contenteditable', 'true');\n\n  return p;\n}\n\n/**\n * Creates a <del> element\n * @param text - The text content of the element\n * @returns A del element which will be the todo itself. It cannot be edited\n */\nfunction createDelElement(text: string): HTMLModElement {\n  const del = document.createElement('del');\n  del.textContent = text;\n  del.className = 'list-item-text';\n  del.setAttribute('contenteditable', 'false');\n\n  return del;\n}\n\n/**\n * Selects all of the list items todos from the DOM, turns them into an array and returns the completed ones\n * @returns An array of List Item todos\n */\nfunction getCompletedListItems() {\n  const listItems = document.querySelectorAll(\n    '.list-item'\n  ) as NodeListOf<HTMLLIElement>;\n  const listItemsArray: HTMLLIElement[] = [...listItems];\n  const completedListItems = listItemsArray.filter(\n    (li) => li.dataset.completed === 'true'\n  );\n\n  return completedListItems;\n}\n\n/**\n * Returns a boolean depending on the string. Used mainly for converting the <li>.dataset.completed from a string to a bool since type Todo requires a boolean\n * @param str A string to convert to a boolean. Will return true for \"true\" else false for anything else\n * @returns true or false\n */\nfunction convertStringToBool(str: string): boolean {\n  if (str === 'true') {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Returns the element that comes after the current position of a dragged element\n */\nfunction getDragAfterElement(container, y: number) {\n  const draggableElements = [\n    ...container.querySelectorAll('[draggable=\"true\"]:not(.dragging)'),\n  ];\n\n  return draggableElements.reduce(\n    (closest, child) => {\n      const box = child.getBoundingClientRect();\n      const offset = y - box.top - box.height / 2;\n\n      if (offset < 0 && offset > closest.offset) {\n        return { offset: offset, element: child };\n      } else {\n        return closest;\n      }\n    },\n    { offset: Number.NEGATIVE_INFINITY }\n  ).element;\n}\n\n// ------------------------------------------------------------------------------\n//                             MUTATION OBSERVERS\n//-------------------------------------------------------------------------------\n/**\n *  Mutation that should occur to a todo list item when the complete button is clicked\n * @param mutationList The data associated with each mutation\n * @param model Used because the global state of the todos is required\n */\nfunction mutateCompletedTodos(mutationList: MutationRecord[], model: Model) {\n  // check the type of mutation\n  for (const mutation of mutationList) {\n    if (mutation.type === 'childList') {\n      // check to see if any mutation has occurred\n      if (mutation.addedNodes.length !== 0) {\n        const allCompleteButtons = document.querySelectorAll('.complete-btn');\n\n        allCompleteButtons.forEach((button) => {\n          // remove any previous event listeners before adding anymore in order to avoid any strange behavior\n          button.removeEventListener('click', () => {});\n\n          button.addEventListener('click', () => {\n            // get the listItem, its first child which will either by a p tag or a del tag and its text content\n            const listItem = button.parentElement as HTMLLIElement;\n            const pOrDel = listItem.children[1];\n            const todoText = pOrDel.textContent as string;\n\n            // create a new element that will be inserted depending on whether the todo is completed or not\n            const del = createDelElement(todoText);\n            const p = createParagraphElement(todoText);\n\n            if (pOrDel instanceof HTMLParagraphElement) {\n              listItem.replaceChild(del, pOrDel);\n            } else {\n              listItem.replaceChild(p, pOrDel);\n            }\n\n            // update the completed status of the todo\n            if (listItem.dataset.id != null) {\n              const currentTodo = findTodo(listItem.dataset.id, model);\n              const opposite = !currentTodo.completed;\n              listItem.dataset.completed = String(opposite);\n              if (listItem.dataset.completed === 'true') {\n                viewChangeAriaLabelledBy(listItem, 'completed');\n              } else if (listItem.dataset.completed === 'false') {\n                viewChangeAriaLabelledBy(listItem, 'active');\n              }\n\n              update('CompleteTodo', model, currentTodo);\n              saveTodosToLocalStorage(model.AllTodos);\n            }\n          });\n        });\n      }\n    }\n  }\n}\n\n/**\n *  Mutation that should occur the display on the status bar that shows the remaining un-completed todos\n * @param mutationList The data associated with each mutation\n * @param model Used because the global state of the todos is required\n */\nfunction mutateRemainingTodosDisplay(\n  mutationList: MutationRecord[],\n  model: Model\n) {\n  for (const mutation of mutationList) {\n    if (mutation.type === 'childList') {\n      if (\n        mutation.addedNodes[0] instanceof HTMLModElement ||\n        mutation.addedNodes[0] instanceof HTMLParagraphElement\n      ) {\n        renderNumberOfTodos(model);\n      }\n    }\n  }\n}\n\n/**\n *  Mutation that should occur to the status bar when they're no todos left\n * @param mutationList The data associated with each mutation\n * @param model Used because the global state of the todos is required\n */\nfunction mutateStatusBar(mutationList: MutationRecord[], model: Model) {\n  for (const mutation of mutationList) {\n    if (mutation.type === 'childList') {\n      const main = document.querySelector('main') as HTMLElement;\n\n      if (model.AllTodos.length === 0 && main !== null) {\n        main.style.transform = 'translateY(0)';\n      } else {\n        main.style.transform = 'translateY(-24px)';\n      }\n    }\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7Ozs7OztBQUNBLElBQU0sUUFBUSxTQUFTLGdCQUFULENBQ1osaUJBRFksQ0FBZDtBQUdBLElBQU0sT0FBTyxTQUFTLGFBQVQsQ0FBdUIsa0JBQXZCLENBQWI7QUFDQSxJQUFNLFFBQVEsU0FBUyxhQUFULENBQXVCLGFBQXZCLENBQWQ7QUFDQSxJQUFNLEtBQUssU0FBUyxhQUFULENBQXVCLE9BQXZCLENBQVg7QUFDQSxJQUFNLFdBQVcsU0FBUyxhQUFULENBQ2Ysb0JBRGUsQ0FBakI7QUFHQSxJQUFNLGVBQWUsU0FBUyxhQUFULENBQ25CLGdCQURtQixDQUFyQjtBQUdBLElBQU0sT0FBTyxTQUFTLElBQXRCO0FBMkJBO0FBQ0E7QUFDQTtBQUNBLElBQU0sT0FBYztBQUNsQixjQUFVO0FBRFEsQ0FBcEI7QUFjQTs7Ozs7OztBQU9BLFNBQVMsTUFBVCxDQUFnQixHQUFoQixFQUEwQixLQUExQixFQUF3QyxLQUF4QyxFQUFtRDtBQUNqRCxZQUFRLEdBQVI7QUFDRSxhQUFLLFNBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsSUFBZixDQUFvQixLQUFwQjtBQUNBO0FBRUYsYUFBSyxZQUFMO0FBQ0Usa0JBQU0sUUFBTixDQUFlLE9BQWYsQ0FBdUIsVUFBQyxJQUFELEVBQVM7QUFDOUIsb0JBQUksS0FBSyxFQUFMLEtBQVksTUFBTSxFQUF0QixFQUEwQjtBQUN4Qix3QkFBTSxRQUFRLE1BQU0sUUFBTixDQUFlLE9BQWYsQ0FBdUIsSUFBdkIsQ0FBZDtBQUNBLDBCQUFNLFFBQU4sQ0FBZSxNQUFmLENBQXNCLEtBQXRCLEVBQTZCLENBQTdCO0FBQ0Q7QUFDRixhQUxEO0FBTUE7QUFFRixhQUFLLFlBQUw7QUFDRSxrQkFBTSxRQUFOLENBQWUsT0FBZixDQUF1QixVQUFDLElBQUQsRUFBUztB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QyxnQkFBSSxTQUFTLElBQVQsS0FBa0IsV0FBdEIsRUFBbUM7QUFDakMsb0JBQU0sT0FBTyxTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsQ0FBYjtBQUVBLG9CQUFJLE1BQU0sUUFBTixDQUFlLE1BQWYsS0FBMEIsQ0FBMUIsSUFBK0IsU0FBUyxJQUE1QyxFQUFrRDtBQUNoRCx5QkFBSyxLQUFMLENBQVcsU0FBWCxHQUF1QixlQUF2QjtBQUNELGlCQUZELE1BRU87QUFDTCx5QkFBSyxLQUFMLENBQVcsU0FBWCxHQUF1QixtQkFBdkI7QUFDRDtBQUNGO0FBQ0Y7QUFYa0U7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVlwRSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET00gTk9ERVNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgdG9kb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAnLnRvZG8tbGlzdC1pdGVtJ1xuKSBhcyBOb2RlTGlzdE9mPEhUTUxMSUVsZW1lbnQ+O1xuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYmFyLWZvcm0nKSBhcyBIVE1MRm9ybUVsZW1lbnQ7XG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtYmFyJykgYXMgSFRNTElucHV0RWxlbWVudDtcbmNvbnN0IHVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QnKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnI2V4YW1wbGUtbGlzdC1pdGVtJ1xuKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuY29uc3QgdGhlbWVUb2dnbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy50aGVtZS10b2dnbGVyJ1xuKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5IGFzIEhUTUxCb2R5RWxlbWVudDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRZUEVTXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgVG9kbyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgY29tcGxldGVkOiBib29sZWFuO1xufTtcblxudHlwZSB2YWxpZEJ1dHRvbiA9ICdkZWxldGUtYnRuJyB8ICdjb21wbGV0ZS1idG4nIHwgJ25vdC1hLWJ1dHRvbic7XG5cbnR5cGUgYWxsb3dlZEVsZW1lbnRzID0gJ3AnIHwgJ2RlbCc7XG5cbnR5cGUgQ3VycmVudFRoZW1lID0ge1xuICB0aGVtZTogc3RyaW5nO1xuICBpbWFnZTogc3RyaW5nO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1PREVMXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgTW9kZWwgPSB7XG4gIEFsbFRvZG9zOiBUb2RvW107XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTCBTVEFURVxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBpbml0OiBNb2RlbCA9IHtcbiAgQWxsVG9kb3M6IFtdLFxufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVBEQVRFIEZVTkNUSU9OXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnR5cGUgTXNnID1cbiAgfCAnQWRkVG9kbydcbiAgfCAnUmVtb3ZlVG9kbydcbiAgfCAnVXBkYXRlVG9kbydcbiAgfCAnQ29tcGxldGVUb2RvJ1xuICB8ICdSZWFycmFuZ2VPcmRlcic7XG5cbi8qKlxuICogRm9yIHVwZGF0aW5nIHRoZSBnbG9iYWwgc3RhdGUsIGl0IHNob3VsZCBvbmx5IHVwZGF0ZSB0aGUgZ2xvYmFsIHN0YXRlIGFuZCBpdCBzaG91bGQgYmUgdGhlIG9ubHkgdGhpbmcgd2hpY2ggY2FuIHVwZGF0ZSBpdFxuICogQHBhcmFtIG1zZyBBIG1lc3NhZ2UgdGhhdCB3aWxsIGluZGljYXRlIHdoYXQgc2hvdWxkIGJlIGRvbmUgdG8gdGhlIGdsb2JhbCBzdGF0ZVxuICogQHBhcmFtIG1vZGVsIFRoZSBnbG9iYWwgc3RhdGVcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgVG9kbyBpbiB3aGljaCBzb21ldGhpbmcgc2hvdWxkIGJlIGRvbmUgdG9cbiAqIEBwYXJhbSBleHRyYSBBbnl0aGluZyBlbHNlIHRoYXQgbWF5IG5lZWQgdG8gYmUgYWRkZWQsIHVzdWFsbHkgZm9yIGJvbnVzIGZ1bmN0aW9uYWxpdHlcbiAqL1xuZnVuY3Rpb24gdXBkYXRlKG1zZzogTXNnLCBtb2RlbDogTW9kZWwsIHZhbHVlOiBUb2RvKTogdm9pZCB7XG4gIHN3aXRjaCAobXNnKSB7XG4gICAgY2FzZSAnQWRkVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5wdXNoKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUmVtb3ZlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnVXBkYXRlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvc1tpbmRleF0udmFsdWUgPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ0NvbXBsZXRlVG9kbyc6XG4gICAgICBtb2RlbC5BbGxUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICAgIGlmICh0b2RvLmlkID09PSB2YWx1ZS5pZCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwuQWxsVG9kb3MuaW5kZXhPZih0b2RvKTtcbiAgICAgICAgICBtb2RlbC5BbGxUb2Rvc1tpbmRleF0uY29tcGxldGVkID0gIXZhbHVlLmNvbXBsZXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1JlYXJyYW5nZU9yZGVyJzpcbiAgICAgIGNvbnN0IGFsbExpc3RJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICcubGlzdC1pdGVtJ1xuICAgICAgKSBhcyBOb2RlTGlzdE9mPEhUTUxMSUVsZW1lbnQ+O1xuXG4gICAgICBtb2RlbC5BbGxUb2RvcyA9IFtdO1xuXG4gICAgICBhbGxMaXN0SXRlbXMuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSBjb252ZXJ0U3RyaW5nVG9Cb29sKFxuICAgICAgICAgIGxpc3RJdGVtLmRhdGFzZXQuY29tcGxldGVkIGFzIHN0cmluZ1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdUb2RvOiBUb2RvID0ge1xuICAgICAgICAgIGlkOiBsaXN0SXRlbS5kYXRhc2V0LmlkIGFzIHN0cmluZyxcbiAgICAgICAgICB2YWx1ZTogbGlzdEl0ZW0uY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgYXMgc3RyaW5nLFxuICAgICAgICAgIGNvbXBsZXRlZDogaXNDb21wbGV0ZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgbW9kZWwuQWxsVG9kb3MucHVzaChuZXdUb2RvKTtcbiAgICAgIH0pO1xuXG4gICAgICBicmVhaztcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTQ1JJUFRTXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gR0VUIFNBVkVEIERBVEEgRlJPTSBMT0NBTCBTVE9SQUdFIEFORCBESVNQTEFZIFRIRU1cbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIGNvbnN0IGdldFN0b3JlZFRvZG9zOiBzdHJpbmcgPSBnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UoJ3RvZG9zJyk7XG4gIGNvbnN0IHBhcnNlU3RvcmVkVG9kb3M6IFRvZG9bXSA9IHBhcnNlVG9kb3MoZ2V0U3RvcmVkVG9kb3MpO1xuXG4gIC8vIGlmIHRoZXJlJ3JlIG5vIHByZXZpb3VzIHRvZG8ncywgY3JlYXRlIGV4YW1wbGUgdG9kbyBlbHNlIHVwZGF0ZSB0aGUgc3RhdGUgdG8gY29udGFpbiBhbGwgdGhlIHN0b3JlZCB0b2Rvc1xuICBpZiAocGFyc2VTdG9yZWRUb2Rvcy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zdCBuZXdUb2RvID0gcmVuZGVyTGlzdEl0ZW1Ob2RlKHRlbXBsYXRlKTtcbiAgICB1cGRhdGUoJ0FkZFRvZG8nLCBtb2RlbCwgbmV3VG9kbyk7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChjb25zdCB0b2RvIG9mIHBhcnNlU3RvcmVkVG9kb3MpIHtcbiAgICAgIHVwZGF0ZSgnQWRkVG9kbycsIG1vZGVsLCB0b2RvKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJUb2Rvcyhtb2RlbC5BbGxUb2Rvcyk7XG5cbiAgLy8gZGlzcGxheSBsYXN0IHVzZWQgdGhlbWVcbiAgY29uc3QgbGFzdEFjdGl2ZVRoZW1lID0gSlNPTi5wYXJzZShnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UoJ3RoZW1lJykpO1xuICAvLyBnZXRJdGVtc0Zyb21Mb2NhbFN0b3JhZ2UgcmV0dXJucyBhbiBlbXB0eSBhcnJheSBpZiB0aGUga2V5IGlzbid0IGZvdW5kXG4gIGlmIChsYXN0QWN0aXZlVGhlbWUubGVuZ3RoICE9PSAwKSB7XG4gICAgdG9nZ2xlVGhlbWUobGFzdEFjdGl2ZVRoZW1lKTtcbiAgfVxuXG4gIC8vIHVwZGF0ZSBzdGF0dXMgYmFyIHRvIGRpc3BsYXkgdGhlIG51bWJlciBvZiB0b2Rvc1xuICByZW5kZXJOdW1iZXJPZlRvZG9zKG1vZGVsKTtcbn0pKGluaXQpO1xuXG4vLyBDUkVBVEUgTkVXIFRPRE9TXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGdldFVzZXJJbnB1dCA9IGlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICBjb25zdCBpc1VzZXJJbnB1dEVtcHR5ID0gQ2hlY2tJZkVtcHR5U3RyaW5nKGdldFVzZXJJbnB1dCk7XG4gICAgY29uc3QgY3JlYXRlTmV3VG9kbyA9IGNyZWF0ZVRvZG9PYmplY3QoZ2V0VXNlcklucHV0KTtcblxuICAgIGlmICghaXNVc2VySW5wdXRFbXB0eSkge1xuICAgICAgdXBkYXRlKCdBZGRUb2RvJywgbW9kZWwsIGNyZWF0ZU5ld1RvZG8pO1xuICAgICAgc2F2ZVRvZG9zVG9Mb2NhbFN0b3JhZ2UobW9kZWwuQWxsVG9kb3MpO1xuICAgIH1cblxuICAgIHJlbmRlclRvZG9zKG1vZGVsLkFsbFRvZG9zKTtcblxuICAgIC8vIHdoZW4gYSB0b2RvIGlzIGFkZGVkLCBtYWtlIHN1cmUgdGhhdCB0aGUgc3RhdHVzIGJhciBpcyB1cGRhdGVkXG4gICAgcmVuZGVyTnVtYmVyT2ZUb2Rvcyhtb2RlbCk7XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vIERFTEVURSBUT0RPU1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgdWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGRlbGV0ZUljb25JbWFnZSA9IGUudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgY29uc3QgYnV0dG9uID0gZGVsZXRlSWNvbkltYWdlLnBhcmVudEVsZW1lbnQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBjb25zdCBsaXN0SXRlbSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50IGFzIEhUTUxMSUVsZW1lbnQ7XG5cbiAgICBjb25zdCB0b2RvSWQgPSBsaXN0SXRlbS5kYXRhc2V0LmlkIGFzIHN0cmluZztcbiAgICBjb25zdCBpc0RlbGV0ZU9yVXBkYXRlQnRuID0gY2hlY2tUeXBlT2ZCdXR0b24oYnV0dG9uKTtcblxuICAgIGlmIChpc0RlbGV0ZU9yVXBkYXRlQnRuID09PSAnZGVsZXRlLWJ0bicpIHtcbiAgICAgIGNvbnN0IHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkID0gZmluZFRvZG8odG9kb0lkLCBtb2RlbCk7XG4gICAgICBkZWxldGVUb2RvKHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkLmlkLCBtb2RlbCwgbGlzdEl0ZW0pO1xuICAgICAgdXBkYXRlKCdSZW1vdmVUb2RvJywgbW9kZWwsIHRvZG9UaGF0U2hvdWxkQmVEZWxldGVkKTtcbiAgICAgIHNhdmVUb2Rvc1RvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcblxuICAgICAgLy8gd2hlbiBhIHRvZG8gaXMgZGVsZXRlZCwgbWFrZSBzdXJlIHRoYXQgdGhlIHN0YXR1cyBiYXIgaXMgdXBkYXRlZFxuICAgICAgcmVuZGVyTnVtYmVyT2ZUb2Rvcyhtb2RlbCk7XG4gICAgfVxuICB9KTtcbn0pKGluaXQpO1xuXG4vLyBVUERBVEUgVE9ET1NcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MUGFyYWdyYXBoRWxlbWVudCkge1xuICAgICAgY29uc3QgdGV4dCA9IHRhcmdldC50ZXh0Q29udGVudCAhPT0gbnVsbCA/IHRhcmdldC50ZXh0Q29udGVudCA6ICcnO1xuICAgICAgY29uc3QgbGlzdEl0ZW0gPSB0YXJnZXQucGFyZW50RWxlbWVudCBhcyBIVE1MTElFbGVtZW50O1xuICAgICAgY29uc3QgbGlzdEl0ZW1JRCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICAgICAgLy8gc3RyaXAgb3V0IHdoaXRlIHNwYWNlcyBzbyB0aGF0IHVzZXJzIGNhbid0IHVwZGF0ZSBhIHRvZG8gdG8gYW4gZW1wdHkgbGluZVxuICAgICAgY29uc3QgdGV4dFBhdHRlcm4gPSB0ZXh0LnJlcGxhY2UoLyAvZywgJycpLnRyaW0oKTtcblxuICAgICAgLy8gSWYgd2hpdGUgc3BhY2Ugb3IgbmV3IGxpbmUgY2hhcmFjdGVycyBhcmUgdGhlIG9ubHkgdGhpbmdzIHN1Ym1pdHRlZCwgdGhlIHRvZG8gd2lsbCBiZSB0dXJuZWQgYmFjayB0byB0aGUgcHJldmlvdXMgb25lXG4gICAgICBpZiAobGlzdEl0ZW1JRCAhPT0gdW5kZWZpbmVkICYmIHRleHRQYXR0ZXJuLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBjb25zdCB1cGRhdGVkVG9kbzogVG9kbyA9IHtcbiAgICAgICAgICBpZDogbGlzdEl0ZW1JRCxcbiAgICAgICAgICB2YWx1ZTogdGV4dCxcbiAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB1cGRhdGUoJ1VwZGF0ZVRvZG8nLCBtb2RlbCwgdXBkYXRlZFRvZG8pO1xuICAgICAgICBzYXZlVG9kb3NUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwcmV2aW91c1RvZG8gPSBmaW5kVG9kbyhsaXN0SXRlbUlELCBtb2RlbCk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVGV4dCA9IHByZXZpb3VzVG9kby52YWx1ZTtcbiAgICAgICAgdGFyZ2V0LnRleHRDb250ZW50ID0gcHJldmlvdXNUZXh0O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59KShpbml0KTtcblxuLy8gQ09NUExFVEUgVE9ET1xuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgLy8gT3B0aW9ucyBmb3IgdGhlIG9ic2VydmVyICh3aGljaCBtdXRhdGlvbnMgdG8gb2JzZXJ2ZSlcbiAgY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUgfTtcblxuICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgbGlua2VkIHRvIHRoZSBjYWxsYmFjayBmdW5jdGlvblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbkxpc3QpID0+IHtcbiAgICBtdXRhdGVDb21wbGV0ZWRUb2RvcyhtdXRhdGlvbkxpc3QsIG1vZGVsKTtcbiAgfSk7XG5cbiAgLy8gU3RhcnQgb2JzZXJ2aW5nIHRoZSB0YXJnZXQgbm9kZSBmb3IgY29uZmlndXJlZCBtdXRhdGlvbnNcbiAgb2JzZXJ2ZXIub2JzZXJ2ZSh1bCwgY29uZmlnKTtcblxuICAvLyBhZGQgYSBtdXRhdGlvbiBzbyB0aGF0IHRoZSBtdXRhdGlvbk9ic2VydmVyIGNvZGUgd2lsbCBhdXRvbWF0aWNhbGx5IGtpY2sgaW5cbiAgY29uc3QgbmV3TGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpIGFzIEhUTUxMSUVsZW1lbnQ7XG4gIG5ld0xpLmRhdGFzZXQuaWQgPSAnMDAwJztcbiAgY29uc3Qgc2hvdWxkRGVsZXRlID0gbmV3TGk7XG4gIHVsLmFwcGVuZChuZXdMaSk7XG4gIGlmIChzaG91bGREZWxldGUuZGF0YXNldC5pZCA9PT0gJzAwMCcpIHtcbiAgICBzaG91bGREZWxldGUucmVtb3ZlKCk7XG4gIH1cbn0pKGluaXQpO1xuXG4vLyBNT1ZFIE1BSU4gVEFHIFdIRU4gVEhFUkUnUkUgTk8gVE9ET1NcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07XG5cbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25MaXN0KSA9PiB7XG4gICAgbXV0YXRlU3RhdHVzQmFyKG11dGF0aW9uTGlzdCwgbW9kZWwpO1xuICB9KTtcblxuICBvYnNlcnZlci5vYnNlcnZlKHVsLCBjb25maWcpO1xufSkoaW5pdCk7XG5cbi8vIFRPR0dMRSBUSEVNRVxuKChtb2RlbDogTW9kZWwpID0+IHtcbiAgdGhlbWVUb2dnbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICB0b2dnbGVUaGVtZSgpO1xuICB9KTtcbn0pKGluaXQpO1xuXG4vLyBGSUxURVIgVEFTS1NcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFicycpIGFzIE5vZGVMaXN0T2Y8SFRNTERpdkVsZW1lbnQ+O1xuXG4gIHRhYnMuZm9yRWFjaCgodGFiKSA9PiB7XG4gICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWxsJykpIHtcbiAgICAgICAgcmVuZGVyVG9kb3MobW9kZWwuQWxsVG9kb3MpO1xuICAgICAgICB0b2dnbGVBcmlhU2VsZWN0ZWQoYnV0dG9uKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZFRvZG9zID0gbW9kZWwuQWxsVG9kb3MuZmlsdGVyKCh0b2RvKSA9PiAhdG9kby5jb21wbGV0ZWQpO1xuICAgICAgICByZW5kZXJUb2Rvcyhjb21wbGV0ZWRUb2Rvcyk7XG4gICAgICAgIHRvZ2dsZUFyaWFTZWxlY3RlZChidXR0b24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGVkVG9kb3MgPSBtb2RlbC5BbGxUb2Rvcy5maWx0ZXIoKHRvZG8pID0+IHRvZG8uY29tcGxldGVkKTtcbiAgICAgICAgcmVuZGVyVG9kb3MoY29tcGxldGVkVG9kb3MpO1xuICAgICAgICB0b2dnbGVBcmlhU2VsZWN0ZWQoYnV0dG9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KShpbml0KTtcblxuLy8gRElTUExBWSBOVU1CRVIgT0YgVU4tQ09NUExFVEVEIFRPRE9TXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICAvLyBPcHRpb25zIGZvciB0aGUgb2JzZXJ2ZXIgKHdoaWNoIG11dGF0aW9ucyB0byBvYnNlcnZlKVxuICBjb25zdCBjb25maWcgPSB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9O1xuXG4gIC8vIENyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBsaW5rZWQgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uTGlzdCkgPT4ge1xuICAgIG11dGF0ZVJlbWFpbmluZ1RvZG9zRGlzcGxheShtdXRhdGlvbkxpc3QsIG1vZGVsKTtcbiAgfSk7XG5cbiAgLy8gU3RhcnQgb2JzZXJ2aW5nIHRoZSB0YXJnZXQgbm9kZSBmb3IgY29uZmlndXJlZCBtdXRhdGlvbnNcbiAgb2JzZXJ2ZXIub2JzZXJ2ZSh1bCwgY29uZmlnKTtcbn0pKGluaXQpO1xuXG4vLyBDTEVBUiBBTEwgQ09NUExFVEVEIFRBU0tTXG4oKG1vZGVsOiBNb2RlbCkgPT4ge1xuICBjb25zdCBjbGVhckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICcuY2xlYXItYnRuJ1xuICApIGFzIE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+O1xuXG4gIGNsZWFyQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgY29tcGxldGVkTGlzdEl0ZW1zOiBIVE1MTElFbGVtZW50W10gPSBnZXRDb21wbGV0ZWRMaXN0SXRlbXMoKTtcbiAgICAgIGxldCBjb3VudGVyID0gMDtcblxuICAgICAgY29uc3QgY29tcGxldGVkVG9kb3MgPSBtb2RlbC5BbGxUb2Rvcy5maWx0ZXIoKHRvZG8pID0+IHRvZG8uY29tcGxldGVkKTtcblxuICAgICAgY29tcGxldGVkVG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgICB1cGRhdGUoJ1JlbW92ZVRvZG8nLCBtb2RlbCwgdG9kbyk7XG4gICAgICAgIHNhdmVUb2Rvc1RvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICAgICAgZGVsZXRlVG9kbyh0b2RvLmlkLCBtb2RlbCwgY29tcGxldGVkTGlzdEl0ZW1zW2NvdW50ZXJdKTtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSkoaW5pdCk7XG5cbi8vIERSQUcgQU5EIERST1AgVEFTS1NcbigobW9kZWw6IE1vZGVsKSA9PiB7XG4gIHVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScpID09PSAndHJ1ZScpIHtcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xuICAgIH1cbiAgfSk7XG5cbiAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScpID09PSAndHJ1ZScpIHtcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuXG4gICAgICB0dXJuSHRtbFRvVG9kb0FycmF5KHRhcmdldCwgbW9kZWwpO1xuICAgIH1cbiAgfSk7XG5cbiAgdWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xuICAgIC8vIGRyYWdnaW5nIGFuZCBhcHBlbmRpbmcgYSBjaGlsZCB0byBhIGNvbnRhaW5lciBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LCB0aGlzIGlzIHRvIHByZXZlbnQgdGhhdCBkZWZhdWx0XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGN1cnJlbnRseURyYWdnZWRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICcuZHJhZ2dpbmcnXG4gICAgKSBhcyBIVE1MTElFbGVtZW50O1xuICAgIC8vIHRoZSBlbGVtZW50IHBvc2l0aW9uZWQgcmlnaHQgYWZ0ZXIgdGhlIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkIGVsZW1lbnRcbiAgICBjb25zdCBhZnRlckVsZW1lbnQgPSBnZXREcmFnQWZ0ZXJFbGVtZW50KHVsLCBlLmNsaWVudFkpO1xuXG4gICAgLy8gVE9ETzogQnVncyBhcmlzZSBzb21ldGltZXMgd2hlbiB0cnlpbmcgdG8gbW92ZSBlbGVtZW50cyB0byB0aGUgbGFzdCBwb3NpdGlvblxuICAgIC8vdG9kbyBTdWNoIGJ1Z3MgaW5jbHVkZSwgdGhlIGNvbXBsZXRlIGJ1dHRvbiBub3QgYmVpbmcgYWJsZSB0byBiZSBjbGlja2VkIGFuZCBwbGF5aW5nIGFyb3VuZCB3aXRoIHRoZSB0YWJzIGFuZCBtb3ZpbmcgZWxlbWVudHMgYXJvdW5kIHdpbGwgY2F1c2Ugb3RoZXIgZWxlbWVudHMgdG8gZ2V0IGRlbGV0ZWRcbiAgICBpZiAoYWZ0ZXJFbGVtZW50ID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGRlbEVsZW1lbnQgPSBjdXJyZW50bHlEcmFnZ2VkSXRlbS5jaGlsZHJlblsxXTtcbiAgICAgIGRlbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCAnZmFsc2UnKTtcbiAgICAgIHVsLmFwcGVuZENoaWxkKGN1cnJlbnRseURyYWdnZWRJdGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGVsRWxlbWVudCA9IGN1cnJlbnRseURyYWdnZWRJdGVtLmNoaWxkcmVuWzFdO1xuICAgICAgZGVsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICdmYWxzZScpO1xuICAgICAgdWwuaW5zZXJ0QmVmb3JlKGN1cnJlbnRseURyYWdnZWRJdGVtLCBhZnRlckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59KShpbml0KTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZJRVcgRlVOQ1RJT05TXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBEaXNwbGF5cyBhbGwgdGhlIHRvZG9zIGZyb20gdGhlIGdsb2JhbCBzdGF0ZSB1bnRvIHRoZSBwYWdlXG4gKiBAcGFyYW0gdG9kb3MgLSBUaGUgZ2xvYmFsIHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvZG9zKHRvZG9zOiBUb2RvW10pIHtcbiAgdWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgbGV0IHRlbXBTdG9yYWdlOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHRvZG8gb2YgdG9kb3MpIHtcbiAgICBjb25zdCBkZXRlcm1pbmVFbGVtZW50ID0gdG9kby5jb21wbGV0ZWQgPyAnZGVsJyA6ICdwJztcblxuICAgIHRlbXBTdG9yYWdlLnB1c2goXG4gICAgICBjcmVhdGVMaXN0SXRlbShcbiAgICAgICAgdG9kby5pZCxcbiAgICAgICAgdG9kby52YWx1ZS50cmltKCksXG4gICAgICAgIHRvZG8uY29tcGxldGVkLFxuICAgICAgICBkZXRlcm1pbmVFbGVtZW50XG4gICAgICApXG4gICAgKTtcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICB9XG4gIHVsLmlubmVySFRNTCA9IHRlbXBTdG9yYWdlLmpvaW4oJycpO1xufVxuXG4vKipcbiAqIE11dGF0ZXMgYSB0b2RvIHNvIHRoYXQgaXRzIGNvbXBsZXRlZCBkYXRhIGF0dHJpYnV0ZSBpcyB0b2dnbGVkXG4gKiBAcGFyYW0gbGlzdEl0ZW0gLSBBIGxpc3QgaXRlbSBjdXJyZW50bHkgYXBwZW5kZWQgdG8gdGhlIERPTVxuICogQHBhcmFtIHZhbHVlIC0gV2hhdCB0aGUgY29tcGxldGVkIGRhdGEgYXR0cmlidXRlIHNob3VsZCBiZSBzZXQgdG9cbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ29tcGxldGVBdHRyaWJ1dGUobGlzdEl0ZW06IEhUTUxMSUVsZW1lbnQsIHZhbHVlOiBib29sZWFuKSB7XG4gIGNvbnN0IGlzQ29tcGxldGVkID0gdmFsdWU7XG5cbiAgbGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPSBpc0NvbXBsZXRlZC50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIGFjdGl2ZSBhdHRyaWJ1dGUgb24gYSBsaXN0IGl0ZW1cbiAqIEBwYXJhbSBsaXN0SXRlbSBBbiB1bi1jb21wbGV0ZWQgbGlzdCBpdGVtXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUF0dHJpYnV0ZShsaXN0SXRlbTogSFRNTExJRWxlbWVudCkge1xuICBpZiAobGlzdEl0ZW0uZGF0YXNldC5jdXJyZW50bHlBY3RpdmUgPT09ICd0cnVlJykge1xuICAgIGxpc3RJdGVtLmRhdGFzZXQuY3VycmVudGx5QWN0aXZlID0gJ2ZhbHNlJztcbiAgfSBlbHNlIHtcbiAgICBsaXN0SXRlbS5kYXRhc2V0LmN1cnJlbnRseUFjdGl2ZSA9ICd0cnVlJztcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBUb2RvIDxsaT4gZnJvbSB0aGUgRE9NXG4gKiBAcGFyYW0gaWQgLSBBIHVuaXF1ZSBpZCBiZWxvbmdpbmcgdG8gYW4gb2JqZWN0IG9mIHR5cGUgVG9kb1xuICogQHBhcmFtIG1vZGVsIC0gVGhlIGdsb2JhbCBzdGF0ZVxuICogQHBhcmFtIGxpc3RFbGVtZW50IC0gQSBsaXN0IGVsZW1lbnQgdG8gYmUgcmVtb3ZlZFxuICogQHJldHVybnMge1RvZG99IFRoZSBkZWxldGVkIFRvZG8gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZVRvZG8oXG4gIGlkOiBzdHJpbmcsXG4gIG1vZGVsOiBNb2RlbCxcbiAgbGlzdEVsZW1lbnQ6IEhUTUxMSUVsZW1lbnRcbik6IFRvZG8ge1xuICBjb25zdCB0b2RvID0gZmluZFRvZG8oaWQsIG1vZGVsKTtcbiAgbGlzdEVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgcmV0dXJuIHRvZG87XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgZ2xvYmFsIHN0YXRlLCB0b2dnbGVzIHRoZSBjb21wbGV0ZWQgZGF0YSBhdHRyaWJ1dGUgb24gYSBsaXN0IGl0ZW0gYW5kIHJlcGxhY2VzIHRoZSBwIGVsZW1lbnQgd2l0aCBhIGRlbCBlbGVtZW50IGlmIG5lZWRlZFxuICogQHBhcmFtIGUgLSBBIGNsaWNrIGV2ZW50XG4gKiBAcGFyYW0gbW9kZWwgLSBUaGUgZ2xvYmFsIHN0YXRlXG4gKiBAcGFyYW0gZWwgLVxuICovXG5mdW5jdGlvbiBoYW5kbGVDb21wbGV0ZWRDbGljayhlOiBFdmVudCwgbW9kZWw6IE1vZGVsLCBlbCA9IHt9KSB7XG4gIGNvbnN0IGNvbXBsZXRlQnRuID0gZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gIGNvbnN0IGxpc3RJdGVtID0gY29tcGxldGVCdG4ucGFyZW50RWxlbWVudCBhcyBIVE1MTElFbGVtZW50O1xuICBjb25zdCBpZCA9IGxpc3RJdGVtLmRhdGFzZXQuaWQ7XG5cbiAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBjdXJyZW50VG9kbyA9IGZpbmRUb2RvKGlkLCBtb2RlbCk7XG4gICAgY3VycmVudFRvZG8uY29tcGxldGVkID0gIWN1cnJlbnRUb2RvLmNvbXBsZXRlZDtcblxuICAgIHVwZGF0ZSgnQ29tcGxldGVUb2RvJywgbW9kZWwsIGN1cnJlbnRUb2RvKTtcblxuICAgIHRvZ2dsZUNvbXBsZXRlQXR0cmlidXRlKGxpc3RJdGVtLCBjdXJyZW50VG9kby5jb21wbGV0ZWQpO1xuICB9XG59XG5cbi8qKlxuICogQ2hhbmdlcyB0aGUgbnVtYmVyIG9mIHRvZG9zIGluIHRoZSBkaXNwbGF5IGJhcihzKVxuICogQHBhcmFtIG1vZGVsIFRoZSBjdXJyZW50IHN0YXRlIHdoaWNoIHNob3VsZCBrbm93IHdoaWNoIHRvZG9zIGFyZSBjdXJyZW50bHkgY29tcGxldGVkXG4gKi9cbmZ1bmN0aW9uIHJlbmRlck51bWJlck9mVG9kb3MobW9kZWw6IE1vZGVsKSB7XG4gIGNvbnN0IHRvZG9zTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgJy5pdGVtcy1sZWZ0IHAnXG4gICkgYXMgTm9kZUxpc3RPZjxIVE1MUGFyYWdyYXBoRWxlbWVudD47XG5cbiAgY29uc3QgdW5Db21wbGV0ZWRUb2RvcyA9IG1vZGVsLkFsbFRvZG9zLmZpbHRlcigodG9kbykgPT4gIXRvZG8uY29tcGxldGVkKTtcblxuICB0b2Rvc0xlZnQuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgIGlmICh1bkNvbXBsZXRlZFRvZG9zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdG9kby50ZXh0Q29udGVudCA9IGAke3VuQ29tcGxldGVkVG9kb3MubGVuZ3RofSBpdGVtIGxlZnRgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2RvLnRleHRDb250ZW50ID0gYCR7dW5Db21wbGV0ZWRUb2Rvcy5sZW5ndGh9IGl0ZW1zIGxlZnRgO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVRoZW1lKHRoZW1lPzogQ3VycmVudFRoZW1lKSB7XG4gIGNvbnN0IGltYWdlSWNvbiA9IHRoZW1lVG9nZ2xlci5maXJzdEVsZW1lbnRDaGlsZCBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAvLyBpZiBhIGN1cnJlbnQgdGhlbWUgZXhpc3RzLCB1c2UgdGhhdFxuICBpZiAodGhlbWUgIT0gbnVsbCkge1xuICAgIGJvZHkuaWQgPSB0aGVtZS50aGVtZTtcbiAgICBpbWFnZUljb24uc2V0QXR0cmlidXRlKCdzcmMnLCB0aGVtZS5pbWFnZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGN1cnJlbnRUaGVtZTogQ3VycmVudFRoZW1lID0ge1xuICAgIHRoZW1lOiAnJyxcbiAgICBpbWFnZTogJycsXG4gIH07XG5cbiAgaWYgKGJvZHkuaWQgPT09ICdsaWdodCcpIHtcbiAgICBib2R5LmlkID0gJ2RhcmsnO1xuICAgIGltYWdlSWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICcvc3JjL2Fzc2V0cy9pbWFnZXMvaWNvbi1zdW4uc3ZnJyk7XG4gICAgY29uc3QgaW1hZ2VTcmMgPSBpbWFnZUljb24uZ2V0QXR0cmlidXRlKCdzcmMnKSBhcyBzdHJpbmc7XG4gICAgY3VycmVudFRoZW1lID0geyB0aGVtZTogYm9keS5pZCwgaW1hZ2U6IGltYWdlU3JjIH07XG4gICAgc2F2ZVRoZW1lVG9Mb2NhbFN0b3JhZ2UoY3VycmVudFRoZW1lKTtcbiAgfSBlbHNlIHtcbiAgICBib2R5LmlkID0gJ2xpZ2h0JztcbiAgICBpbWFnZUljb24uc2V0QXR0cmlidXRlKCdzcmMnLCAnL3NyYy9hc3NldHMvaW1hZ2VzL2ljb24tbW9vbi5zdmcnKTtcbiAgICBjb25zdCBpbWFnZVNyYyA9IGltYWdlSWNvbi5nZXRBdHRyaWJ1dGUoJ3NyYycpIGFzIHN0cmluZztcbiAgICBjdXJyZW50VGhlbWUgPSB7IHRoZW1lOiBib2R5LmlkLCBpbWFnZTogaW1hZ2VTcmMgfTtcbiAgICBzYXZlVGhlbWVUb0xvY2FsU3RvcmFnZShjdXJyZW50VGhlbWUpO1xuICB9XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgYXJpYS1zZWxlY3RlZCBhdHRyaWJ1dGUgb2YgYSB0YWIgdG8gZWl0aGVyIFwidHJ1ZVwiIG9yIFwiXCIgd2hpbGUgcmVzZXR0aW5nIHRoZSB2YWx1ZSBvZiB0aGUgb3RoZXIgdGFic1xuICogQHBhcmFtIHRhYiBPbmUgb2YgdGhlIHRhYnMsIGFsbCwgYWN0aXZlIG9yIGNvbXBsZXRlZFxuICovXG5mdW5jdGlvbiB0b2dnbGVBcmlhU2VsZWN0ZWQodGFiOiBIVE1MQnV0dG9uRWxlbWVudCkge1xuICAvLyByZXNldCB0aGUgYXJpYS1zZWxlY3RlZCBhdHRyaWJ1dGUgb24gYWxsIHRoZSB0YWJzXG4gIGNvbnN0IGFsbFRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICcudGFicyBidXR0b24nXG4gICkgYXMgTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD47XG4gIGFsbFRhYnMuZm9yRWFjaCgodGFiKSA9PiB7XG4gICAgdGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuICB9KTtcblxuICBjb25zdCBpc1NlbGVjdGVkID0gdGFiLmdldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICBpZiAoaXNTZWxlY3RlZCA9PT0gbnVsbCB8fCBpc1NlbGVjdGVkID09PSAnZmFsc2UnKSB7XG4gICAgdGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGFuZ2VzIHRoZSBzdGF0ZSB0byBtYXRjaCB0aGUgbmV3IG9yZGVyIG9mIGVsZW1lbnRzXG4gKiBAcGFyYW0gdGFyZ2V0XG4gKiBAcGFyYW0gbW9kZWxcbiAqL1xuZnVuY3Rpb24gdHVybkh0bWxUb1RvZG9BcnJheSh0YXJnZXQsIG1vZGVsKSB7XG4gIGNvbnN0IHN0cmlwcGVkVG9kb0lkID0gdGFyZ2V0LmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICBjb25zdCB0b2RvOiBUb2RvID0gZmluZFRvZG8oc3RyaXBwZWRUb2RvSWQsIG1vZGVsKTtcbiAgY29uc3QgYWxsTGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAnLmxpc3QtaXRlbSdcbiAgKSBhcyBOb2RlTGlzdE9mPEhUTUxMSUVsZW1lbnQ+O1xuXG4gIGZvciAoY29uc3QgW2luZGV4LCB2YWx1ZV0gb2YgYWxsTGlzdEl0ZW1zLmVudHJpZXMoKSkge1xuICAgIGlmICh2YWx1ZS5kYXRhc2V0LmlkID09PSBzdHJpcHBlZFRvZG9JZCkge1xuICAgICAgdXBkYXRlKCdSZWFycmFuZ2VPcmRlcicsIG1vZGVsLCB0b2RvKTtcbiAgICB9XG4gIH1cblxuICBzYXZlVG9kb3NUb0xvY2FsU3RvcmFnZShtb2RlbC5BbGxUb2Rvcyk7XG59XG5cbi8qKlxuICogQ2hhbmdlcyB0aGUgYXJpYS1sYWJlbGxlZEJ5IGF0dHJpYnV0ZSBmb3IgZWFjaCBsaXN0IGl0ZW1cbiAqIEBwYXJhbSB0YWJQYW5lbCAtIFRoZSBjb250ZW50IHRoYXQgc2hvdWxkIGJlIHNob3duIGRlcGVuZGluZyBvbiB3aGljaCB0YWIgaXMgY2xpY2tlZFxuICogQHBhcmFtIHRhYiAtIEEgc3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGlkJ3Mgb2YgZWFjaCB0YWJcbiAqL1xuZnVuY3Rpb24gdmlld0NoYW5nZUFyaWFMYWJlbGxlZEJ5KFxuICB0YWJQYW5lbDogSFRNTExJRWxlbWVudCxcbiAgdGFiOiAnYWxsJyB8ICdhY3RpdmUnIHwgJ2NvbXBsZXRlZCdcbikge1xuICB0YWJQYW5lbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIHRhYik7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERBVEFCQVNFXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBTYXZlcyB1c2VycyB0b2RvcyB0byBsb2NhbCBzdG9yYWdlXG4gKiBAcGFyYW0gdG9kb3MgLSBUaGUgZ2xvYmFsIHN0YXRlIHRoYXQgc2hvdWxkIGJlIHNhdmVkIHRvIGxvY2FsIHN0b3JhZ2VcbiAqL1xuZnVuY3Rpb24gc2F2ZVRvZG9zVG9Mb2NhbFN0b3JhZ2UodG9kb3M6IFRvZG9bXSkge1xuICBjb25zdCB0b2RvVG9Kc29uID0gSlNPTi5zdHJpbmdpZnkodG9kb3MpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCB0b2RvVG9Kc29uKTtcbn1cblxuLyoqXG4gKiBTYXZlcyB0aGUgdmFsdWUgb2YgdGhlIGJvZHkncyBpZCBwcm9wZXJ0eSBhbmQgdGhlIHNyYyBhdHRyaWJ1dGUgb2YgdGhlIGltYWdlIGljb24gdG8gbG9jYWwgc3RvcmFnZVxuICogQHBhcmFtIHRoZW1lIFRoZSBjdXJyZW50IHRoZW1lLCBsaWdodC9kYXJrICYmIHN1bi9tb29uLWljb25cbiAqL1xuZnVuY3Rpb24gc2F2ZVRoZW1lVG9Mb2NhbFN0b3JhZ2UodGhlbWU6IEN1cnJlbnRUaGVtZSkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCBKU09OLnN0cmluZ2lmeSh0aGVtZSkpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBhIEpTT04gc3RyaW5nIGZyb20gbG9jYWxTdG9yYWdlXG4gKiBAcGFyYW0gaXRlbU5hbWUgLSBUaGUga2V5IGluIHRoZSBrZXk6dmFsdWUgcGFpciBvZiBsb2NhbFN0b3JhZ2VcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEVpdGhlciBhIHN0cmluZyBvZiB0aGUgdXNlcnMgdG9kb3Mgb3IgYW4gZW1wdHkgYXJyYXlcbiAqL1xuZnVuY3Rpb24gZ2V0SXRlbXNGcm9tTG9jYWxTdG9yYWdlKGl0ZW1OYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaXRlbU5hbWUpO1xuICByZXR1cm4gc3RvcmFnZSAhPT0gbnVsbCA/IHN0b3JhZ2UgOiAnW10nO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgdXNlcnMgdG9kbydzXG4gKiBAcGFyYW0gaXRlbSAtIFBhcnNlcyBhIHN0cmluZ1xuICogQHJldHVybnMge1RvZG9bXX0gQW4gYXJyYXkgb2Ygb2JqZWN0cyBvZiB0eXBlIFRvZG9cbiAqL1xuZnVuY3Rpb24gcGFyc2VUb2RvcyhpdGVtOiBzdHJpbmcpOiBUb2RvW10ge1xuICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhFTFBFUiBGVU5DVElPTlNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBpdGVtXG4gKiBAcGFyYW0gaWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoZSBsaXN0IGl0ZW0gdG9kb1xuICogQHBhcmFtIHRleHQgLSBUaGUgYWN0dWFsIHRvZG8gaXRzZWxmXG4gKiBAcGFyYW0gZWwgLSBSZXByZXNlbnRzIGFuIEh0bWwgZWxlbWVudCwgaW5zIGFuZCBkZWwgYXJlIHNlbWFudGljYWxseSBjb3JyZWN0IGJ1dCBhIHAgdGFnIGNhbiBiZSB1c2VkIGFzIHdlbGxcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBSZWZsZWN0cyB3aGV0aGVyIHRoZSBjb21wbGV0ZSBidXR0b24gaGFzIGJlZW4gY2xpY2tlZCBvciBub3RcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBpbm5lciBIVE1MIG9mIHRoZSA8bGk+IGluY2x1ZGluZyB0aGUgbGkgaXRzZWxmXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUxpc3RJdGVtKFxuICBpZDogc3RyaW5nLFxuICB0ZXh0OiBzdHJpbmcsXG4gIGNvbXBsZXRlZDogYm9vbGVhbiA9IGZhbHNlLFxuICBlbDogYWxsb3dlZEVsZW1lbnRzID0gJ3AnXG4pOiBzdHJpbmcge1xuICBjb25zdCBoYXNDb250ZW50RWRpdGFibGUgPSBlbCA9PT0gJ3AnID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgY29uc3QgbGFiZWxsZWRCeUFjdGl2ZU9yQ29tcGxldGVkID1cbiAgICBjb21wbGV0ZWQgPT09IHRydWUgPyAnY29tcGxldGVkJyA6ICdhY3RpdmUnO1xuXG4gIGNvbnN0IGxpc3RJdGVtID0gYFxuICAgICAgICA8bGkgcm9sZT1cInRhYnBhbmVsXCIgYXJpYS1sYWJlbGxlZGJ5PSR7bGFiZWxsZWRCeUFjdGl2ZU9yQ29tcGxldGVkfSBjbGFzcz1cImxpc3QtaXRlbVwiIGRhdGEtaWQ9JHtpZH0gZGF0YS1jb21wbGV0ZWQ9XCIke2NvbXBsZXRlZH1cIiBkcmFnZ2FibGU9XCJ0cnVlXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbXBsZXRlLWJ0blwiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIvc3JjL2Fzc2V0cy9pbWFnZXMvaWNvbi1jaGVjay5zdmdcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+TWFyayBUb2RvIGFzIGNvbXBsZXRlPC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwke2VsfSBjbGFzcz1cImxpc3QtaXRlbS10ZXh0XCIgY29udGVudGVkaXRhYmxlPSR7aGFzQ29udGVudEVkaXRhYmxlfT4ke3RleHR9PC8ke2VsfT5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGVsZXRlLWJ0biB0b2RvLWRlbGV0ZS1pY29uXCI+XG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwiZFwiIHNyYz1cIi9zcmMvYXNzZXRzL2ltYWdlcy9pY29uLWNyb3NzLnN2Z1wiIGFsdD1cIlwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5EZWxldGUgVG9kbzwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9saT5cbiAgICBgO1xuXG4gIHJldHVybiBsaXN0SXRlbTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzdHJpbmcgaXMgZW1wdHkuIFdpbGwgdHJpbSB0aGUgdGhlIG1pZGRsZSBvZiB0aGUgc3RyaW5nXG4gKiBAcGFyYW0gc3RyIC0gQSBzdHJpbmcgdGhhdCB3aWxsIGJlIGNoZWNrZWRcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHN0cmluZyBpcyBlbXB0eSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIENoZWNrSWZFbXB0eVN0cmluZyhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gc3RyLnRyaW0oKSA9PT0gJyc7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHVuaXF1ZSBJRFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCBvZiB0eXBlIFRvZG9cbiAqIEBwYXJhbSB2YWx1ZSAtIEEgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSB0aGUgYWN0dWFsIHRvZG8gaXRzZWxmXG4gKiBAcmV0dXJucyB7VG9kb30gQSB0b2RvIG9iamVjdFxuICovXG5mdW5jdGlvbiBjcmVhdGVUb2RvT2JqZWN0KHZhbHVlOiBzdHJpbmcpOiBUb2RvIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBmb3IgdGhlIHR5cGUgb2YgYnV0dG9uIGJlaW5nIHBhc3NlZCBpblxuICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgYnV0dG9uIHRoYXQgd2FzIGNsaWNrZWQgb25cbiAqIEByZXR1cm5zIHt2YWxpZEJ1dHRvbn0gQSBtZXNzYWdlIHN0YXRpbmcgdGhlIHR5cGUgb2YgYnV0dG9uIHRoYXQgd2FzIGNsaWNrZWQgb25cbiAqIEB0aHJvd3Mge25ldyBFcnJvcn0gQSBzdHJpbmcgZXJyb3IgYnVpbHQgd2l0aCB0aGUgRXJyb3IgY29uc3RydWN0b3JcbiAqIEBleGFtcGxlIGNoZWNrVHlwZU9mQnV0dG9uKGRlbGV0ZUJ0bikgLT4gJ2RlbGV0ZS1idG4nXG4gKi9cbmZ1bmN0aW9uIGNoZWNrVHlwZU9mQnV0dG9uKGVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50KTogdmFsaWRCdXR0b24ge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tZGVsZXRlLWljb24nKSkge1xuICAgIHJldHVybiAnZGVsZXRlLWJ0bic7XG4gIH0gZWxzZSBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBsZXRlLWJ0bicpKSB7XG4gICAgcmV0dXJuICdjb21wbGV0ZS1idG4nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnbm90LWEtYnV0dG9uJztcbiAgfVxufVxuXG4vKipcbiAqIEZpbmRzIGEgc3BlY2lmaWMgVG9kbyBiYXNlZCBvbiBhbiBJRFxuICogQHBhcmFtIGlkIC0gQSB1bmlxdWUgSUQgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvZiB0eXBlIFRvZG9cbiAqIEBwYXJhbSBtb2RlbCAtIFRoZSBnbG9iYWwgc3RhdGVcbiAqIEByZXR1cm5zIHtUb2RvfSBUaGUgVG9kbyB3aGljaCBtYXRjaGVzIHRoZSBpZCBwYXNzZWQgaW5cbiAqL1xuZnVuY3Rpb24gZmluZFRvZG8oaWQ6IHN0cmluZywgbW9kZWw6IE1vZGVsKTogVG9kbyB7XG4gIGNvbnN0IG1hdGNoaW5nVG9kbyA9IG1vZGVsLkFsbFRvZG9zLmZpbHRlcigodG9kbykgPT4gdG9kby5pZCA9PT0gaWQpO1xuXG4gIHJldHVybiBtYXRjaGluZ1RvZG9bMF07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ld1RvZG8gb3V0IG9mIHRoZSBleGFtcGxlIHRvZG9cbiAqIEBwYXJhbSB0ZW1wbGF0ZSAtIFRoZSB0ZW1wbGF0ZSB0byBjbG9uZSBhbmQgdHVybiBpbnRvIGEgbmV3VG9kbyBvYmplY3RcbiAqIEByZXR1cm5zIFRoZSBleGFtcGxlIFRvZG9cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGlzdEl0ZW1Ob2RlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KTogVG9kbyB7XG4gIGNvbnN0IGRvY0ZyYWdtZW50OiBEb2N1bWVudEZyYWdtZW50ID0gdGVtcGxhdGUuY29udGVudDtcbiAgY29uc3QgbGlzdEl0ZW1DbG9uZSA9IGRvY0ZyYWdtZW50LmZpcnN0RWxlbWVudENoaWxkPy5jbG9uZU5vZGUoXG4gICAgdHJ1ZVxuICApIGFzIEhUTUxMSUVsZW1lbnQ7XG5cbiAgY29uc3QgaWQgPSBsaXN0SXRlbUNsb25lLmRhdGFzZXQuaWQgYXMgc3RyaW5nO1xuICBjb25zdCBwRWwgPSBsaXN0SXRlbUNsb25lLmNoaWxkTm9kZXNbM107XG4gIGNvbnN0IHRleHQgPSBwRWwudGV4dENvbnRlbnQ/LnRyaW0oKSBhcyBzdHJpbmc7XG5cbiAgY29uc3QgbmV3VG9kbzogVG9kbyA9IHtcbiAgICBpZDogaWQsXG4gICAgdmFsdWU6IHRleHQsXG4gICAgY29tcGxldGVkOiBmYWxzZSxcbiAgfTtcblxuICByZXR1cm4gbmV3VG9kbztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgPHA+IGVsZW1lbnRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIHRleHQgY29udGVudCBvZiB0aGUgZWxlbWVudFxuICogQHJldHVybnMgQSBwYXJhZ3JhcGggZWxlbWVudCB3aGljaCB3aWxsIGJlIHRoZSB0b2RvIGl0c2VsZi4gSXQgY2FuIGJlIGVkaXRlZFxuICovXG5mdW5jdGlvbiBjcmVhdGVQYXJhZ3JhcGhFbGVtZW50KHRleHQ6IHN0cmluZyk6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHtcbiAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgcC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIHAuY2xhc3NOYW1lID0gJ2xpc3QtaXRlbS10ZXh0JztcbiAgcC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICd0cnVlJyk7XG5cbiAgcmV0dXJuIHA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIDxkZWw+IGVsZW1lbnRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIHRleHQgY29udGVudCBvZiB0aGUgZWxlbWVudFxuICogQHJldHVybnMgQSBkZWwgZWxlbWVudCB3aGljaCB3aWxsIGJlIHRoZSB0b2RvIGl0c2VsZi4gSXQgY2Fubm90IGJlIGVkaXRlZFxuICovXG5mdW5jdGlvbiBjcmVhdGVEZWxFbGVtZW50KHRleHQ6IHN0cmluZyk6IEhUTUxNb2RFbGVtZW50IHtcbiAgY29uc3QgZGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGVsJyk7XG4gIGRlbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIGRlbC5jbGFzc05hbWUgPSAnbGlzdC1pdGVtLXRleHQnO1xuICBkZWwuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCAnZmFsc2UnKTtcblxuICByZXR1cm4gZGVsO1xufVxuXG4vKipcbiAqIFNlbGVjdHMgYWxsIG9mIHRoZSBsaXN0IGl0ZW1zIHRvZG9zIGZyb20gdGhlIERPTSwgdHVybnMgdGhlbSBpbnRvIGFuIGFycmF5IGFuZCByZXR1cm5zIHRoZSBjb21wbGV0ZWQgb25lc1xuICogQHJldHVybnMgQW4gYXJyYXkgb2YgTGlzdCBJdGVtIHRvZG9zXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBsZXRlZExpc3RJdGVtcygpIHtcbiAgY29uc3QgbGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAnLmxpc3QtaXRlbSdcbiAgKSBhcyBOb2RlTGlzdE9mPEhUTUxMSUVsZW1lbnQ+O1xuICBjb25zdCBsaXN0SXRlbXNBcnJheTogSFRNTExJRWxlbWVudFtdID0gWy4uLmxpc3RJdGVtc107XG4gIGNvbnN0IGNvbXBsZXRlZExpc3RJdGVtcyA9IGxpc3RJdGVtc0FycmF5LmZpbHRlcihcbiAgICAobGkpID0+IGxpLmRhdGFzZXQuY29tcGxldGVkID09PSAndHJ1ZSdcbiAgKTtcblxuICByZXR1cm4gY29tcGxldGVkTGlzdEl0ZW1zO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBib29sZWFuIGRlcGVuZGluZyBvbiB0aGUgc3RyaW5nLiBVc2VkIG1haW5seSBmb3IgY29udmVydGluZyB0aGUgPGxpPi5kYXRhc2V0LmNvbXBsZXRlZCBmcm9tIGEgc3RyaW5nIHRvIGEgYm9vbCBzaW5jZSB0eXBlIFRvZG8gcmVxdWlyZXMgYSBib29sZWFuXG4gKiBAcGFyYW0gc3RyIEEgc3RyaW5nIHRvIGNvbnZlcnQgdG8gYSBib29sZWFuLiBXaWxsIHJldHVybiB0cnVlIGZvciBcInRydWVcIiBlbHNlIGZhbHNlIGZvciBhbnl0aGluZyBlbHNlXG4gKiBAcmV0dXJucyB0cnVlIG9yIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRTdHJpbmdUb0Jvb2woc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKHN0ciA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZWxlbWVudCB0aGF0IGNvbWVzIGFmdGVyIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIGEgZHJhZ2dlZCBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGdldERyYWdBZnRlckVsZW1lbnQoY29udGFpbmVyLCB5OiBudW1iZXIpIHtcbiAgY29uc3QgZHJhZ2dhYmxlRWxlbWVudHMgPSBbXG4gICAgLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkcmFnZ2FibGU9XCJ0cnVlXCJdOm5vdCguZHJhZ2dpbmcpJyksXG4gIF07XG5cbiAgcmV0dXJuIGRyYWdnYWJsZUVsZW1lbnRzLnJlZHVjZShcbiAgICAoY2xvc2VzdCwgY2hpbGQpID0+IHtcbiAgICAgIGNvbnN0IGJveCA9IGNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0geSAtIGJveC50b3AgLSBib3guaGVpZ2h0IC8gMjtcblxuICAgICAgaWYgKG9mZnNldCA8IDAgJiYgb2Zmc2V0ID4gY2xvc2VzdC5vZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb2Zmc2V0OiBvZmZzZXQsIGVsZW1lbnQ6IGNoaWxkIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2xvc2VzdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHsgb2Zmc2V0OiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgfVxuICApLmVsZW1lbnQ7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1VVEFUSU9OIE9CU0VSVkVSU1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqICBNdXRhdGlvbiB0aGF0IHNob3VsZCBvY2N1ciB0byBhIHRvZG8gbGlzdCBpdGVtIHdoZW4gdGhlIGNvbXBsZXRlIGJ1dHRvbiBpcyBjbGlja2VkXG4gKiBAcGFyYW0gbXV0YXRpb25MaXN0IFRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCBlYWNoIG11dGF0aW9uXG4gKiBAcGFyYW0gbW9kZWwgVXNlZCBiZWNhdXNlIHRoZSBnbG9iYWwgc3RhdGUgb2YgdGhlIHRvZG9zIGlzIHJlcXVpcmVkXG4gKi9cbmZ1bmN0aW9uIG11dGF0ZUNvbXBsZXRlZFRvZG9zKG11dGF0aW9uTGlzdDogTXV0YXRpb25SZWNvcmRbXSwgbW9kZWw6IE1vZGVsKSB7XG4gIC8vIGNoZWNrIHRoZSB0eXBlIG9mIG11dGF0aW9uXG4gIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25MaXN0KSB7XG4gICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAvLyBjaGVjayB0byBzZWUgaWYgYW55IG11dGF0aW9uIGhhcyBvY2N1cnJlZFxuICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGFsbENvbXBsZXRlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idG4nKTtcblxuICAgICAgICBhbGxDb21wbGV0ZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgLy8gcmVtb3ZlIGFueSBwcmV2aW91cyBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIGFkZGluZyBhbnltb3JlIGluIG9yZGVyIHRvIGF2b2lkIGFueSBzdHJhbmdlIGJlaGF2aW9yXG4gICAgICAgICAgYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge30pO1xuXG4gICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBsaXN0SXRlbSwgaXRzIGZpcnN0IGNoaWxkIHdoaWNoIHdpbGwgZWl0aGVyIGJ5IGEgcCB0YWcgb3IgYSBkZWwgdGFnIGFuZCBpdHMgdGV4dCBjb250ZW50XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50IGFzIEhUTUxMSUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBwT3JEZWwgPSBsaXN0SXRlbS5jaGlsZHJlblsxXTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9UZXh0ID0gcE9yRGVsLnRleHRDb250ZW50IGFzIHN0cmluZztcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGVsZW1lbnQgdGhhdCB3aWxsIGJlIGluc2VydGVkIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB0b2RvIGlzIGNvbXBsZXRlZCBvciBub3RcbiAgICAgICAgICAgIGNvbnN0IGRlbCA9IGNyZWF0ZURlbEVsZW1lbnQodG9kb1RleHQpO1xuICAgICAgICAgICAgY29uc3QgcCA9IGNyZWF0ZVBhcmFncmFwaEVsZW1lbnQodG9kb1RleHQpO1xuXG4gICAgICAgICAgICBpZiAocE9yRGVsIGluc3RhbmNlb2YgSFRNTFBhcmFncmFwaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgbGlzdEl0ZW0ucmVwbGFjZUNoaWxkKGRlbCwgcE9yRGVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpc3RJdGVtLnJlcGxhY2VDaGlsZChwLCBwT3JEZWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGNvbXBsZXRlZCBzdGF0dXMgb2YgdGhlIHRvZG9cbiAgICAgICAgICAgIGlmIChsaXN0SXRlbS5kYXRhc2V0LmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRvZG8gPSBmaW5kVG9kbyhsaXN0SXRlbS5kYXRhc2V0LmlkLCBtb2RlbCk7XG4gICAgICAgICAgICAgIGNvbnN0IG9wcG9zaXRlID0gIWN1cnJlbnRUb2RvLmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgbGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPSBTdHJpbmcob3Bwb3NpdGUpO1xuICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0uZGF0YXNldC5jb21wbGV0ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHZpZXdDaGFuZ2VBcmlhTGFiZWxsZWRCeShsaXN0SXRlbSwgJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RJdGVtLmRhdGFzZXQuY29tcGxldGVkID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgdmlld0NoYW5nZUFyaWFMYWJlbGxlZEJ5KGxpc3RJdGVtLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB1cGRhdGUoJ0NvbXBsZXRlVG9kbycsIG1vZGVsLCBjdXJyZW50VG9kbyk7XG4gICAgICAgICAgICAgIHNhdmVUb2Rvc1RvTG9jYWxTdG9yYWdlKG1vZGVsLkFsbFRvZG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogIE11dGF0aW9uIHRoYXQgc2hvdWxkIG9jY3VyIHRoZSBkaXNwbGF5IG9uIHRoZSBzdGF0dXMgYmFyIHRoYXQgc2hvd3MgdGhlIHJlbWFpbmluZyB1bi1jb21wbGV0ZWQgdG9kb3NcbiAqIEBwYXJhbSBtdXRhdGlvbkxpc3QgVGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGVhY2ggbXV0YXRpb25cbiAqIEBwYXJhbSBtb2RlbCBVc2VkIGJlY2F1c2UgdGhlIGdsb2JhbCBzdGF0ZSBvZiB0aGUgdG9kb3MgaXMgcmVxdWlyZWRcbiAqL1xuZnVuY3Rpb24gbXV0YXRlUmVtYWluaW5nVG9kb3NEaXNwbGF5KFxuICBtdXRhdGlvbkxpc3Q6IE11dGF0aW9uUmVjb3JkW10sXG4gIG1vZGVsOiBNb2RlbFxuKSB7XG4gIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25MaXN0KSB7XG4gICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICBpZiAoXG4gICAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXNbMF0gaW5zdGFuY2VvZiBIVE1MTW9kRWxlbWVudCB8fFxuICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzWzBdIGluc3RhbmNlb2YgSFRNTFBhcmFncmFwaEVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICByZW5kZXJOdW1iZXJPZlRvZG9zKG1vZGVsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiAgTXV0YXRpb24gdGhhdCBzaG91bGQgb2NjdXIgdG8gdGhlIHN0YXR1cyBiYXIgd2hlbiB0aGV5J3JlIG5vIHRvZG9zIGxlZnRcbiAqIEBwYXJhbSBtdXRhdGlvbkxpc3QgVGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGVhY2ggbXV0YXRpb25cbiAqIEBwYXJhbSBtb2RlbCBVc2VkIGJlY2F1c2UgdGhlIGdsb2JhbCBzdGF0ZSBvZiB0aGUgdG9kb3MgaXMgcmVxdWlyZWRcbiAqL1xuZnVuY3Rpb24gbXV0YXRlU3RhdHVzQmFyKG11dGF0aW9uTGlzdDogTXV0YXRpb25SZWNvcmRbXSwgbW9kZWw6IE1vZGVsKSB7XG4gIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25MaXN0KSB7XG4gICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICBpZiAobW9kZWwuQWxsVG9kb3MubGVuZ3RoID09PSAwICYmIG1haW4gIT09IG51bGwpIHtcbiAgICAgICAgbWFpbi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYWluLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0yNHB4KSc7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0="}